{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../../services/servico.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nfunction ServicoFormComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵtext(1, \" Nome \\u00E9 obrigat\\u00F3rio. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ServicoFormComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵtext(1, \" Pre\\u00E7o \\u00E9 obrigat\\u00F3rio. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ServicoFormComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵtext(1, \" Pre\\u00E7o deve ser positivo. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ServicoFormComponent_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.errorMessage, \" \");\n  }\n}\nexport class ServicoFormComponent {\n  constructor(fb, servicoService, router, route) {\n    this.fb = fb;\n    this.servicoService = servicoService;\n    this.router = router;\n    this.route = route;\n    this.isEditMode = false;\n    this.isLoading = false;\n    this.errorMessage = null;\n    this.servicoId = null;\n    // Correção: Removido [cite_start]\n    // UC04 - Formulário com campos pertinentes\n    this.servicoForm = this.fb.group({\n      nome: ['', Validators.required],\n      descricao: [''],\n      preco: [null, [Validators.required, Validators.min(0.01)]]\n    });\n  }\n  ngOnInit() {\n    const idParam = this.route.snapshot.paramMap.get('id');\n    if (idParam) {\n      // MODO EDIÇÃO\n      this.isEditMode = true;\n      this.servicoId = +idParam;\n      this.loadServicoData();\n    }\n  }\n  loadServicoData() {\n    if (!this.servicoId) return;\n    this.isLoading = true;\n    this.servicoService.getServicoById(this.servicoId).subscribe({\n      next: servico => {\n        this.isLoading = false;\n        this.servicoForm.patchValue(servico);\n      },\n      error: err => {\n        this.isLoading = false;\n        this.errorMessage = \"Serviço não encontrado.\";\n        this.router.navigate(['/admin/servicos']);\n      }\n    });\n  }\n  onSubmit() {\n    if (this.servicoForm.invalid) {\n      this.errorMessage = \"Por favor, corrija os erros no formulário.\";\n      return;\n    }\n    this.isLoading = true;\n    this.errorMessage = null;\n    const servicoData = this.servicoForm.value;\n    const saveOperation = this.isEditMode ? this.servicoService.updateServico(this.servicoId, servicoData) : this.servicoService.createServico(servicoData);\n    saveOperation.subscribe({\n      next: () => {\n        this.isLoading = false;\n        this.router.navigate(['/admin/servicos']);\n      },\n      error: err => {\n        this.isLoading = false;\n        // Validação de nome duplicado\n        this.errorMessage = err.error?.erro || \"Erro ao salvar serviço.\";\n      }\n    });\n  }\n  goBack() {\n    this.router.navigate(['/admin/servicos']);\n  }\n  static {\n    this.ɵfac = function ServicoFormComponent_Factory(t) {\n      return new (t || ServicoFormComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ServicoService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ServicoFormComponent,\n      selectors: [[\"app-servico-form\"]],\n      decls: 31,\n      vars: 8,\n      consts: [[1, \"form-container\"], [1, \"form-header\"], [1, \"btn-back\", 3, \"click\"], [1, \"card\", 3, \"formGroup\", \"ngSubmit\"], [1, \"form-section\"], [1, \"form-group\"], [\"for\", \"nome\", 1, \"form-label\"], [\"id\", \"nome\", \"type\", \"text\", \"formControlName\", \"nome\", 1, \"form-control\"], [\"class\", \"text-danger\", 4, \"ngIf\"], [\"for\", \"preco\", 1, \"form-label\"], [\"id\", \"preco\", \"type\", \"number\", \"formControlName\", \"preco\", \"min\", \"0.01\", \"step\", \"0.01\", \"placeholder\", \"ex: 50.00\", 1, \"form-control\"], [\"for\", \"descricao\", 1, \"form-label\"], [\"id\", \"descricao\", \"formControlName\", \"descricao\", \"rows\", \"4\", 1, \"form-control\"], [1, \"form-actions\"], [\"class\", \"error-message\", 4, \"ngIf\"], [\"type\", \"button\", 1, \"btn-secondary\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn-primary\", 3, \"disabled\"], [1, \"text-danger\"], [1, \"error-message\"]],\n      template: function ServicoFormComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"header\", 1)(2, \"button\", 2);\n          i0.ɵɵlistener(\"click\", function ServicoFormComponent_Template_button_click_2_listener() {\n            return ctx.goBack();\n          });\n          i0.ɵɵtext(3, \" \\u2190 Voltar para a Lista \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"h1\");\n          i0.ɵɵtext(5);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(6, \"form\", 3);\n          i0.ɵɵlistener(\"ngSubmit\", function ServicoFormComponent_Template_form_ngSubmit_6_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵelementStart(7, \"fieldset\", 4)(8, \"legend\");\n          i0.ɵɵtext(9, \"Dados do Servi\\u00E7o\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"div\", 5)(11, \"label\", 6);\n          i0.ɵɵtext(12, \"Nome do Servi\\u00E7o\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(13, \"input\", 7);\n          i0.ɵɵtemplate(14, ServicoFormComponent_div_14_Template, 2, 0, \"div\", 8);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"div\", 5)(16, \"label\", 9);\n          i0.ɵɵtext(17, \"Pre\\u00E7o (R$)\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(18, \"input\", 10);\n          i0.ɵɵtemplate(19, ServicoFormComponent_div_19_Template, 2, 0, \"div\", 8);\n          i0.ɵɵtemplate(20, ServicoFormComponent_div_20_Template, 2, 0, \"div\", 8);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(21, \"div\", 5)(22, \"label\", 11);\n          i0.ɵɵtext(23, \"Descri\\u00E7\\u00E3o (Opcional)\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(24, \"textarea\", 12);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(25, \"footer\", 13);\n          i0.ɵɵtemplate(26, ServicoFormComponent_div_26_Template, 2, 1, \"div\", 14);\n          i0.ɵɵelementStart(27, \"button\", 15);\n          i0.ɵɵlistener(\"click\", function ServicoFormComponent_Template_button_click_27_listener() {\n            return ctx.goBack();\n          });\n          i0.ɵɵtext(28, \"Cancelar\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(29, \"button\", 16);\n          i0.ɵɵtext(30);\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          let tmp_2_0;\n          let tmp_3_0;\n          let tmp_4_0;\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate(ctx.isEditMode ? \"Editar Servi\\u00E7o\" : \"Novo Servi\\u00E7o\");\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"formGroup\", ctx.servicoForm);\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = ctx.servicoForm.get(\"nome\")) == null ? null : tmp_2_0.touched) && ((tmp_2_0 = ctx.servicoForm.get(\"nome\")) == null ? null : tmp_2_0.hasError(\"required\")));\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ((tmp_3_0 = ctx.servicoForm.get(\"preco\")) == null ? null : tmp_3_0.touched) && ((tmp_3_0 = ctx.servicoForm.get(\"preco\")) == null ? null : tmp_3_0.hasError(\"required\")));\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ((tmp_4_0 = ctx.servicoForm.get(\"preco\")) == null ? null : tmp_4_0.touched) && ((tmp_4_0 = ctx.servicoForm.get(\"preco\")) == null ? null : tmp_4_0.hasError(\"min\")));\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"disabled\", ctx.isLoading || ctx.servicoForm.invalid);\n          i0.ɵɵadvance(1);\n          i0.ɵɵtextInterpolate1(\" \", ctx.isLoading ? \"Salvando...\" : ctx.isEditMode ? \"Salvar Altera\\u00E7\\u00F5es\" : \"Cadastrar Servi\\u00E7o\", \" \");\n        }\n      },\n      dependencies: [i4.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.MinValidator, i1.FormGroupDirective, i1.FormControlName],\n      styles: [\".form-container[_ngcontent-%COMP%] {\\n  max-width: 900px;\\n  margin: 0 auto;\\n}\\n\\n.form-header[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  gap: 1.5rem;\\n  margin-bottom: 1.5rem;\\n}\\n\\n.btn-back[_ngcontent-%COMP%] {\\n  background: none;\\n  border: none;\\n  color: var(--color-primary);\\n  font-weight: 500;\\n}\\n.btn-back[_ngcontent-%COMP%]:hover {\\n  text-decoration: underline;\\n}\\n\\n.form-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%] {\\n  font-size: 2rem;\\n  font-weight: 600;\\n}\\n\\n.card[_ngcontent-%COMP%] {\\n  background-color: var(--color-white);\\n  border-radius: 8px;\\n  box-shadow: var(--shadow-sm);\\n  padding: 2rem;\\n}\\n\\n.form-section[_ngcontent-%COMP%] {\\n  border: none;\\n  padding: 0;\\n  margin-bottom: 2rem;\\n}\\n.form-section[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%] {\\n  font-size: 1.2rem;\\n  font-weight: 600;\\n  margin-bottom: 1rem;\\n  padding-bottom: 0.5rem;\\n  border-bottom: 1px solid var(--color-border);\\n  width: 100%;\\n}\\n\\n.form-row[_ngcontent-%COMP%] {\\n  display: grid;\\n  grid-template-columns: 1fr 1fr;\\n  gap: 1.5rem;\\n}\\n\\n.form-actions[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: flex-end;\\n  align-items: center;\\n  gap: 1rem;\\n  border-top: 1px solid var(--color-border);\\n  padding-top: 1.5rem;\\n  margin-top: 1.5rem;\\n}\\n\\n.error-message[_ngcontent-%COMP%] {\\n  color: var(--color-danger);\\n  margin-right: auto;\\n}\\n\\n.btn-secondary[_ngcontent-%COMP%] {\\n  background-color: var(--color-light);\\n  color: var(--color-dark);\\n  border: 1px solid var(--color-border);\\n}\\n\\n\\n\\n.pet-section[_ngcontent-%COMP%] {\\n  margin-top: 2rem;\\n}\\n.pet-section[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%] {\\n  margin-bottom: 1.5rem;\\n  padding-bottom: 1rem;\\n  border-bottom: 1px solid var(--color-border);\\n}\\n.pet-section[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\n  font-size: 1.5rem;\\n}\\n.no-data[_ngcontent-%COMP%] {\\n  text-align: center;\\n  padding: 1rem;\\n}\\n\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmVhdHVyZXMvYWRtaW4vcGFnZXMvY2xpZW50ZXMvY2xpZW50ZS1mb3JtL2NsaWVudGUtZm9ybS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsZ0JBQWdCO0VBQ2hCLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLFdBQVc7RUFDWCxxQkFBcUI7QUFDdkI7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsWUFBWTtFQUNaLDJCQUEyQjtFQUMzQixnQkFBZ0I7QUFDbEI7QUFDQTtFQUNFLDBCQUEwQjtBQUM1Qjs7QUFFQTtFQUNFLGVBQWU7RUFDZixnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxvQ0FBb0M7RUFDcEMsa0JBQWtCO0VBQ2xCLDRCQUE0QjtFQUM1QixhQUFhO0FBQ2Y7O0FBRUE7RUFDRSxZQUFZO0VBQ1osVUFBVTtFQUNWLG1CQUFtQjtBQUNyQjtBQUNBO0VBQ0UsaUJBQWlCO0VBQ2pCLGdCQUFnQjtFQUNoQixtQkFBbUI7RUFDbkIsc0JBQXNCO0VBQ3RCLDRDQUE0QztFQUM1QyxXQUFXO0FBQ2I7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsOEJBQThCO0VBQzlCLFdBQVc7QUFDYjs7QUFFQTtFQUNFLGFBQWE7RUFDYix5QkFBeUI7RUFDekIsbUJBQW1CO0VBQ25CLFNBQVM7RUFDVCx5Q0FBeUM7RUFDekMsbUJBQW1CO0VBQ25CLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLDBCQUEwQjtFQUMxQixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxvQ0FBb0M7RUFDcEMsd0JBQXdCO0VBQ3hCLHFDQUFxQztBQUN2Qzs7QUFFQSxrQkFBa0I7QUFDbEI7RUFDRSxnQkFBZ0I7QUFDbEI7QUFDQTtFQUNFLHFCQUFxQjtFQUNyQixvQkFBb0I7RUFDcEIsNENBQTRDO0FBQzlDO0FBQ0E7RUFDRSxpQkFBaUI7QUFDbkI7QUFDQTtFQUNFLGtCQUFrQjtFQUNsQixhQUFhO0FBQ2Y7QUFDQSwwREFBMEQiLCJzb3VyY2VzQ29udGVudCI6WyIuZm9ybS1jb250YWluZXIge1xyXG4gIG1heC13aWR0aDogOTAwcHg7XHJcbiAgbWFyZ2luOiAwIGF1dG87XHJcbn1cclxuXHJcbi5mb3JtLWhlYWRlciB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIGdhcDogMS41cmVtO1xyXG4gIG1hcmdpbi1ib3R0b206IDEuNXJlbTtcclxufVxyXG5cclxuLmJ0bi1iYWNrIHtcclxuICBiYWNrZ3JvdW5kOiBub25lO1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBjb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeSk7XHJcbiAgZm9udC13ZWlnaHQ6IDUwMDtcclxufVxyXG4uYnRuLWJhY2s6aG92ZXIge1xyXG4gIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xyXG59XHJcblxyXG4uZm9ybS1oZWFkZXIgaDEge1xyXG4gIGZvbnQtc2l6ZTogMnJlbTtcclxuICBmb250LXdlaWdodDogNjAwO1xyXG59XHJcblxyXG4uY2FyZCB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3Itd2hpdGUpO1xyXG4gIGJvcmRlci1yYWRpdXM6IDhweDtcclxuICBib3gtc2hhZG93OiB2YXIoLS1zaGFkb3ctc20pO1xyXG4gIHBhZGRpbmc6IDJyZW07XHJcbn1cclxuXHJcbi5mb3JtLXNlY3Rpb24ge1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBwYWRkaW5nOiAwO1xyXG4gIG1hcmdpbi1ib3R0b206IDJyZW07XHJcbn1cclxuLmZvcm0tc2VjdGlvbiBsZWdlbmQge1xyXG4gIGZvbnQtc2l6ZTogMS4ycmVtO1xyXG4gIGZvbnQtd2VpZ2h0OiA2MDA7XHJcbiAgbWFyZ2luLWJvdHRvbTogMXJlbTtcclxuICBwYWRkaW5nLWJvdHRvbTogMC41cmVtO1xyXG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1jb2xvci1ib3JkZXIpO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG59XHJcblxyXG4uZm9ybS1yb3cge1xyXG4gIGRpc3BsYXk6IGdyaWQ7XHJcbiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyO1xyXG4gIGdhcDogMS41cmVtO1xyXG59XHJcblxyXG4uZm9ybS1hY3Rpb25zIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBnYXA6IDFyZW07XHJcbiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWNvbG9yLWJvcmRlcik7XHJcbiAgcGFkZGluZy10b3A6IDEuNXJlbTtcclxuICBtYXJnaW4tdG9wOiAxLjVyZW07XHJcbn1cclxuXHJcbi5lcnJvci1tZXNzYWdlIHtcclxuICBjb2xvcjogdmFyKC0tY29sb3ItZGFuZ2VyKTtcclxuICBtYXJnaW4tcmlnaHQ6IGF1dG87XHJcbn1cclxuXHJcbi5idG4tc2Vjb25kYXJ5IHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1saWdodCk7XHJcbiAgY29sb3I6IHZhcigtLWNvbG9yLWRhcmspO1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWNvbG9yLWJvcmRlcik7XHJcbn1cclxuXHJcbi8qIFNlw4PCp8ODwqNvIGRlIFBldHMgKi9cclxuLnBldC1zZWN0aW9uIHtcclxuICBtYXJnaW4tdG9wOiAycmVtO1xyXG59XHJcbi5wZXQtc2VjdGlvbiAucGFnZS1oZWFkZXIge1xyXG4gIG1hcmdpbi1ib3R0b206IDEuNXJlbTtcclxuICBwYWRkaW5nLWJvdHRvbTogMXJlbTtcclxuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tY29sb3ItYm9yZGVyKTtcclxufVxyXG4ucGV0LXNlY3Rpb24gLnBhZ2UtaGVhZGVyIGgyIHtcclxuICBmb250LXNpemU6IDEuNXJlbTtcclxufVxyXG4ubm8tZGF0YSB7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIHBhZGRpbmc6IDFyZW07XHJcbn1cclxuLyogKFJldXRpbGl6YSBlc3RpbG9zIGRhIGRhdGEtdGFibGUgZGEgY2xpZW50ZS1saXN0LmNzcykgKi8iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"names":["Validators","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r3","errorMessage","ServicoFormComponent","constructor","fb","servicoService","router","route","isEditMode","isLoading","servicoId","servicoForm","group","nome","required","descricao","preco","min","ngOnInit","idParam","snapshot","paramMap","get","loadServicoData","getServicoById","subscribe","next","servico","patchValue","error","err","navigate","onSubmit","invalid","servicoData","value","saveOperation","updateServico","createServico","erro","goBack","ɵɵdirectiveInject","i1","FormBuilder","i2","ServicoService","i3","Router","ActivatedRoute","selectors","decls","vars","consts","template","ServicoFormComponent_Template","rf","ctx","ɵɵlistener","ServicoFormComponent_Template_button_click_2_listener","ServicoFormComponent_Template_form_ngSubmit_6_listener","ɵɵelement","ɵɵtemplate","ServicoFormComponent_div_14_Template","ServicoFormComponent_div_19_Template","ServicoFormComponent_div_20_Template","ServicoFormComponent_div_26_Template","ServicoFormComponent_Template_button_click_27_listener","ɵɵtextInterpolate","ɵɵproperty","tmp_2_0","touched","hasError","tmp_3_0","tmp_4_0"],"sources":["C:\\TCC\\petflow\\petflow-web\\src\\app\\features\\admin\\pages\\servicos\\servico-form\\servico-form.component.ts","C:\\TCC\\petflow\\petflow-web\\src\\app\\features\\admin\\pages\\servicos\\servico-form\\servico-form.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ServicoService } from '../../../services/servico.service';\r\n\r\n@Component({\r\nselector: 'app-servico-form',\r\ntemplateUrl: './servico-form.component.html',\r\n// Reutilizaremos o CSS do cliente-form\r\nstyleUrls: ['../../clientes/cliente-form/cliente-form.component.css']\r\n})\r\nexport class ServicoFormComponent implements OnInit {\r\n\r\nservicoForm!: FormGroup; // Adicionado '!'\r\nisEditMode = false;\r\nisLoading = false;\r\nerrorMessage: string | null = null;\r\nprivate servicoId: number | null = null;\r\n\r\nconstructor(\r\n    private fb: FormBuilder,\r\n    private servicoService: ServicoService,\r\n    private router: Router,\r\n    private route: ActivatedRoute\r\n  ) {\r\n    // Correção: Removido [cite_start]\r\n    // UC04 - Formulário com campos pertinentes\r\n    this.servicoForm = this.fb.group({\r\n      nome: ['', Validators.required],\r\n      descricao: [''],\r\n      preco: [null, [Validators.required, Validators.min(0.01)]]\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    const idParam = this.route.snapshot.paramMap.get('id');\r\n    if (idParam) {\r\n      // MODO EDIÇÃO\r\n      this.isEditMode = true;\r\n      this.servicoId = +idParam;\r\n      this.loadServicoData();\r\n    }\r\n  }\r\n\r\n  loadServicoData(): void {\r\n    if (!this.servicoId) return;\r\n\r\n    this.isLoading = true;\r\n    this.servicoService.getServicoById(this.servicoId).subscribe({\r\n      next: (servico) => {\r\n        this.isLoading = false;\r\n        this.servicoForm.patchValue(servico);\r\n      },\r\n      error: (err) => {\r\n        this.isLoading = false;\r\n        this.errorMessage = \"Serviço não encontrado.\";\r\n        this.router.navigate(['/admin/servicos']);\r\n      }\r\n    });\r\n  }\r\n\r\n  onSubmit(): void {\r\n    if (this.servicoForm.invalid) {\r\n      this.errorMessage = \"Por favor, corrija os erros no formulário.\";\r\n      return;\r\n    }\r\n\r\n    this.isLoading = true;\r\n    this.errorMessage = null;\r\n\r\n    const servicoData = this.servicoForm.value;\r\n\r\n    const saveOperation = this.isEditMode\r\n      ? this.servicoService.updateServico(this.servicoId!, servicoData)\r\n      : this.servicoService.createServico(servicoData);\r\n\r\n    saveOperation.subscribe({\r\n      next: () => {\r\n        this.isLoading = false;\r\n        this.router.navigate(['/admin/servicos']);\r\n      },\r\n      error: (err) => {\r\n        this.isLoading = false;\r\n        // Validação de nome duplicado\r\n        this.errorMessage = err.error?.erro || \"Erro ao salvar serviço.\";\r\n      }\r\n    });\r\n  }\r\n\r\n  goBack(): void {\r\n    this.router.navigate(['/admin/servicos']);\r\n  }\r\n}\r\n\r\n","<div class=\"form-container\">\r\n\r\n    <header class=\"form-header\">\r\n        <button (click)=\"goBack()\" class=\"btn-back\">\r\n            &larr; Voltar para a Lista\r\n        </button>\r\n        <h1>{{ isEditMode ? 'Editar Serviço' : 'Novo Serviço' }}</h1>\r\n    </header>\r\n\r\n    <form [formGroup]=\"servicoForm\" (ngSubmit)=\"onSubmit()\" class=\"card\">\r\n        <fieldset class=\"form-section\">\r\n            <legend>Dados do Serviço</legend>\r\n\r\n            <div class=\"form-group\">\r\n                <label for=\"nome\" class=\"form-label\">Nome do Serviço</label>\r\n                <input id=\"nome\" type=\"text\" class=\"form-control\" formControlName=\"nome\">\r\n                <div *ngIf=\"servicoForm.get('nome')?.touched && servicoForm.get('nome')?.hasError('required')\" class=\"text-danger\">\r\n                    Nome é obrigatório.\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"form-group\">\r\n                <label for=\"preco\" class=\"form-label\">Preço (R$)</label>\r\n                <input id=\"preco\" type=\"number\" class=\"form-control\" formControlName=\"preco\"\r\n                       min=\"0.01\" step=\"0.01\" placeholder=\"ex: 50.00\">\r\n                <div *ngIf=\"servicoForm.get('preco')?.touched && servicoForm.get('preco')?.hasError('required')\" class=\"text-danger\">\r\n                    Preço é obrigatório.\r\n                </div>\r\n                <div *ngIf=\"servicoForm.get('preco')?.touched && servicoForm.get('preco')?.hasError('min')\" class=\"text-danger\">\r\n                    Preço deve ser positivo.\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"form-group\">\r\n                <label for=\"descricao\" class=\"form-label\">Descrição (Opcional)</label>\r\n                <textarea id=\"descricao\" class=\"form-control\" formControlName=\"descricao\" rows=\"4\"></textarea>\r\n            </div>\r\n\r\n        </fieldset>\r\n\r\n        <footer class=\"form-actions\">\r\n            <div *ngIf=\"errorMessage\" class=\"error-message\">\r\n                {{ errorMessage }}\r\n            </div>\r\n            <button type=\"button\" class=\"btn-secondary\" (click)=\"goBack()\">Cancelar</button>\r\n            <button type=\"submit\" class=\"btn-primary\" [disabled]=\"isLoading || servicoForm.invalid\">\r\n                {{ isLoading ? 'Salvando...' : (isEditMode ? 'Salvar Alterações' : 'Cadastrar Serviço') }}\r\n            </button>\r\n        </footer>\r\n    </form>\r\n\r\n</div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}