{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../../services/cliente.service\";\nimport * as i3 from \"../../../services/pet.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../../../components/pet-form-modal/pet-form-modal.component\";\nfunction ClienteFormComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"div\", 5)(2, \"label\");\n    i0.ɵɵtext(3, \"Senha\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"input\", 18);\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ClienteFormComponent_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r1.errorMessage);\n  }\n}\nfunction ClienteFormComponent_div_36_ul_4_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"button\", 24);\n    i0.ɵɵlistener(\"click\", function ClienteFormComponent_div_36_ul_4_li_1_Template_button_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const pet_r8 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r9.openPetModal(pet_r8));\n    });\n    i0.ɵɵtext(3, \"Editar\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 24);\n    i0.ɵɵlistener(\"click\", function ClienteFormComponent_div_36_ul_4_li_1_Template_button_click_4_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const pet_r8 = restoredCtx.$implicit;\n      const ctx_r11 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r11.onDeletePet(pet_r8));\n    });\n    i0.ɵɵtext(5, \"Excluir\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const pet_r8 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", pet_r8.nome, \" - \", pet_r8.especie, \" \");\n  }\n}\nfunction ClienteFormComponent_div_36_ul_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\");\n    i0.ɵɵtemplate(1, ClienteFormComponent_div_36_ul_4_li_1_Template, 6, 2, \"li\", 25);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.cliente.pets);\n  }\n}\nfunction ClienteFormComponent_div_36_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵtext(1, \"Nenhum pet cadastrado.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ClienteFormComponent_div_36_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"div\", 21)(2, \"h2\");\n    i0.ɵɵtext(3, \"Pets do Cliente\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(4, ClienteFormComponent_div_36_ul_4_Template, 2, 1, \"ul\", 22);\n    i0.ɵɵtemplate(5, ClienteFormComponent_div_36_ng_template_5_Template, 2, 0, \"ng-template\", null, 23, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementStart(7, \"button\", 24);\n    i0.ɵɵlistener(\"click\", function ClienteFormComponent_div_36_Template_button_click_7_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.openPetModal());\n    });\n    i0.ɵɵtext(8, \"Adicionar Pet\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const _r5 = i0.ɵɵreference(6);\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.cliente.pets.length > 0)(\"ngIfElse\", _r5);\n  }\n}\nfunction ClienteFormComponent_app_pet_form_modal_37_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-pet-form-modal\", 27);\n    i0.ɵɵlistener(\"saveSuccess\", function ClienteFormComponent_app_pet_form_modal_37_Template_app_pet_form_modal_saveSuccess_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.handlePetSave());\n    })(\"close\", function ClienteFormComponent_app_pet_form_modal_37_Template_app_pet_form_modal_close_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.closePetModal());\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"pet\", ctx_r3.currentPetToEdit)(\"clienteId\", ctx_r3.clienteId);\n  }\n}\nexport class ClienteFormComponent {\n  constructor(fb, clienteService, petService, router, route) {\n    this.fb = fb;\n    this.clienteService = clienteService;\n    this.petService = petService;\n    this.router = router;\n    this.route = route;\n    this.isEditMode = false;\n    this.isLoading = false;\n    this.errorMessage = null;\n    this.clienteId = null;\n    this.cliente = null; // Para listar os pets\n    this.isPetModalOpen = false;\n    this.currentPetToEdit = null;\n    this.clienteForm = this.fb.group({\n      nome: ['', [Validators.required, Validators.maxLength(100)]],\n      email: ['', [Validators.required, Validators.email, Validators.maxLength(100)]],\n      senha: ['', [Validators.required, Validators.minLength(6), Validators.maxLength(20)]],\n      cpf: ['', [Validators.required, this.cpfValidator]],\n      telefone: ['', [Validators.required, this.telefoneValidator]],\n      endereco: ['', [Validators.maxLength(200)]]\n    });\n  }\n  ngOnInit() {\n    const idParam = this.route.snapshot.paramMap.get('id');\n    if (idParam) {\n      this.isEditMode = true;\n      this.clienteId = +idParam;\n      this.loadClienteData();\n      // senha não obrigatória em edição\n      this.clienteForm.get('senha')?.clearValidators();\n      this.clienteForm.get('senha')?.updateValueAndValidity();\n    }\n  }\n  loadClienteData() {\n    if (!this.clienteId) return;\n    this.isLoading = true;\n    this.clienteService.getClienteById(this.clienteId).subscribe({\n      next: cliente => {\n        this.isLoading = false;\n        this.cliente = cliente;\n        this.clienteForm.patchValue({\n          nome: cliente.nome,\n          email: cliente.email,\n          cpf: cliente.cpf,\n          telefone: cliente.telefone,\n          endereco: cliente.endereco\n        });\n      },\n      error: () => {\n        this.isLoading = false;\n        this.errorMessage = \"Cliente não encontrado.\";\n        this.router.navigate(['/admin/clientes']);\n      }\n    });\n  }\n  onSubmit() {\n    if (this.clienteForm.invalid) {\n      this.errorMessage = \"Por favor, corrija os erros no formulário.\";\n      return;\n    }\n    this.isLoading = true;\n    this.errorMessage = null;\n    const formValue = this.clienteForm.value;\n    const saveOperation = this.isEditMode ? this.clienteService.updateCliente(this.clienteId, {\n      nome: formValue.nome,\n      cpf: formValue.cpf.replace(/\\D/g, ''),\n      telefone: formValue.telefone.replace(/\\D/g, ''),\n      endereco: formValue.endereco\n    }) : this.clienteService.createCliente({\n      ...formValue,\n      cpf: formValue.cpf.replace(/\\D/g, ''),\n      telefone: formValue.telefone.replace(/\\D/g, '')\n    });\n    saveOperation.subscribe({\n      next: () => {\n        this.isLoading = false;\n        this.router.navigate(['/admin/clientes']);\n      },\n      error: err => {\n        this.isLoading = false;\n        this.errorMessage = err.error?.erro || \"Erro ao salvar cliente. Verifique o CPF e E-mail.\";\n      }\n    });\n  }\n  // ===== Validação de CPF =====\n  cpfValidator(control) {\n    const cpf = control.value.replace(/\\D/g, '');\n    if (!cpf || cpf.length !== 11) {\n      return {\n        invalidCpf: 'CPF inválido. Deve conter 11 números.'\n      };\n    }\n    return null;\n  }\n  // ===== Validação de Telefone =====\n  telefoneValidator(control) {\n    const telefone = control.value.replace(/\\D/g, '');\n    if (!telefone || telefone.length !== 10 && telefone.length !== 11) {\n      return {\n        invalidTelefone: 'Telefone inválido. Deve conter 10 ou 11 números.'\n      };\n    }\n    return null;\n  }\n  // ===== Formatação visual CPF =====\n  formatCPF(event) {\n    const input = event.target;\n    let value = input.value.replace(/\\D/g, '').slice(0, 11);\n    if (value.length > 3) value = value.replace(/^(\\d{3})(\\d)/, '$1.$2');\n    if (value.length > 6) value = value.replace(/^(\\d{3})\\.(\\d{3})(\\d)/, '$1.$2.$3');\n    if (value.length > 9) value = value.replace(/^(\\d{3})\\.(\\d{3})\\.(\\d{3})(\\d)/, '$1.$2.$3-$4');\n    input.value = value;\n    this.clienteForm.get('cpf')?.setValue(value, {\n      emitEvent: false\n    });\n  }\n  // ===== Formatação visual Telefone =====\n  formatTelefone(event) {\n    const input = event.target;\n    let value = input.value.replace(/\\D/g, '').slice(0, 11);\n    if (value.length > 2) value = value.replace(/^(\\d{2})(\\d)/, '($1)$2');\n    if (value.length > 6) value = value.replace(/^(\\(\\d{2}\\))(\\d{5})(\\d)/, '$1$2-$3');\n    input.value = value;\n    this.clienteForm.get('telefone')?.setValue(value, {\n      emitEvent: false\n    });\n  }\n  openPetModal(pet = null) {\n    this.currentPetToEdit = pet;\n    this.isPetModalOpen = true;\n  }\n  closePetModal() {\n    this.isPetModalOpen = false;\n    this.currentPetToEdit = null;\n  }\n  handlePetSave() {\n    this.loadClienteData(); // Atualiza a lista de pets\n  }\n  onDeletePet(pet) {\n    if (confirm(`Tem certeza que deseja excluir o pet \"${pet.nome}\"?`)) {\n      this.petService.deletePet(pet.id).subscribe({\n        next: () => this.loadClienteData(),\n        error: () => alert(\"Erro ao excluir pet.\")\n      });\n    }\n  }\n  goBack() {\n    this.router.navigate(['/admin/clientes']);\n  }\n  static {\n    this.ɵfac = function ClienteFormComponent_Factory(t) {\n      return new (t || ClienteFormComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ClienteService), i0.ɵɵdirectiveInject(i3.PetService), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i4.ActivatedRoute));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ClienteFormComponent,\n      selectors: [[\"app-cliente-form\"]],\n      decls: 38,\n      vars: 8,\n      consts: [[1, \"form-container\", \"card\"], [1, \"form-header\"], [\"type\", \"button\", 1, \"btn-back\", 3, \"click\"], [1, \"form-section\", 3, \"formGroup\", \"ngSubmit\"], [1, \"form-row\"], [1, \"form-group\"], [\"type\", \"text\", \"formControlName\", \"nome\", \"maxlength\", \"100\"], [\"type\", \"email\", \"formControlName\", \"email\", \"maxlength\", \"100\"], [\"class\", \"form-row\", 4, \"ngIf\"], [\"type\", \"text\", \"formControlName\", \"cpf\", \"maxlength\", \"14\", \"placeholder\", \"000.000.000-00\", 3, \"input\"], [\"type\", \"text\", \"formControlName\", \"telefone\", \"maxlength\", \"15\", \"placeholder\", \"(00) 00000-0000\", 3, \"input\"], [\"type\", \"text\", \"formControlName\", \"endereco\", \"maxlength\", \"200\"], [\"class\", \"error-message\", 4, \"ngIf\"], [1, \"form-actions\"], [\"type\", \"submit\", 3, \"disabled\"], [\"type\", \"button\", 1, \"btn-secondary\", 3, \"click\"], [\"class\", \"pet-section\", 4, \"ngIf\"], [3, \"pet\", \"clienteId\", \"saveSuccess\", \"close\", 4, \"ngIf\"], [\"type\", \"password\", \"formControlName\", \"senha\", \"maxlength\", \"20\"], [1, \"error-message\"], [1, \"pet-section\"], [1, \"page-header\"], [4, \"ngIf\", \"ngIfElse\"], [\"noPets\", \"\"], [3, \"click\"], [4, \"ngFor\", \"ngForOf\"], [1, \"no-data\"], [3, \"pet\", \"clienteId\", \"saveSuccess\", \"close\"]],\n      template: function ClienteFormComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\");\n          i0.ɵɵtext(3);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"button\", 2);\n          i0.ɵɵlistener(\"click\", function ClienteFormComponent_Template_button_click_4_listener() {\n            return ctx.goBack();\n          });\n          i0.ɵɵtext(5, \"Voltar\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(6, \"form\", 3);\n          i0.ɵɵlistener(\"ngSubmit\", function ClienteFormComponent_Template_form_ngSubmit_6_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵelementStart(7, \"div\", 4)(8, \"div\", 5)(9, \"label\");\n          i0.ɵɵtext(10, \"Nome\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(11, \"input\", 6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"div\", 5)(13, \"label\");\n          i0.ɵɵtext(14, \"E-mail\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(15, \"input\", 7);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(16, ClienteFormComponent_div_16_Template, 5, 0, \"div\", 8);\n          i0.ɵɵelementStart(17, \"div\", 4)(18, \"div\", 5)(19, \"label\");\n          i0.ɵɵtext(20, \"CPF\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(21, \"input\", 9);\n          i0.ɵɵlistener(\"input\", function ClienteFormComponent_Template_input_input_21_listener($event) {\n            return ctx.formatCPF($event);\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(22, \"div\", 5)(23, \"label\");\n          i0.ɵɵtext(24, \"Telefone\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(25, \"input\", 10);\n          i0.ɵɵlistener(\"input\", function ClienteFormComponent_Template_input_input_25_listener($event) {\n            return ctx.formatTelefone($event);\n          });\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(26, \"div\", 5)(27, \"label\");\n          i0.ɵɵtext(28, \"Endere\\u00E7o\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(29, \"input\", 11);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(30, ClienteFormComponent_div_30_Template, 2, 1, \"div\", 12);\n          i0.ɵɵelementStart(31, \"div\", 13)(32, \"button\", 14);\n          i0.ɵɵtext(33);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(34, \"button\", 15);\n          i0.ɵɵlistener(\"click\", function ClienteFormComponent_Template_button_click_34_listener() {\n            return ctx.goBack();\n          });\n          i0.ɵɵtext(35, \"Voltar\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(36, ClienteFormComponent_div_36_Template, 9, 2, \"div\", 16);\n          i0.ɵɵtemplate(37, ClienteFormComponent_app_pet_form_modal_37_Template, 1, 2, \"app-pet-form-modal\", 17);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate(ctx.isEditMode ? \"Editar Cliente\" : \"Cadastrar Novo Cliente\");\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"formGroup\", ctx.clienteForm);\n          i0.ɵɵadvance(10);\n          i0.ɵɵproperty(\"ngIf\", !ctx.isEditMode);\n          i0.ɵɵadvance(14);\n          i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"disabled\", ctx.isLoading);\n          i0.ɵɵadvance(1);\n          i0.ɵɵtextInterpolate1(\" \", ctx.isLoading ? \"Salvando...\" : \"Salvar Cliente\", \" \");\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.cliente);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.isPetModalOpen);\n        }\n      },\n      dependencies: [i5.NgForOf, i5.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.MaxLengthValidator, i1.FormGroupDirective, i1.FormControlName, i6.PetFormModalComponent],\n      styles: [\".form-container[_ngcontent-%COMP%] {\\n  max-width: 900px;\\n  margin: 0 auto;\\n}\\n\\n.form-header[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  gap: 1.5rem;\\n  margin-bottom: 1.5rem;\\n}\\n\\n.btn-back[_ngcontent-%COMP%] {\\n  background: none;\\n  border: none;\\n  color: var(--color-primary);\\n  font-weight: 500;\\n}\\n.btn-back[_ngcontent-%COMP%]:hover {\\n  text-decoration: underline;\\n}\\n\\n.form-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%] {\\n  font-size: 2rem;\\n  font-weight: 600;\\n}\\n\\n.card[_ngcontent-%COMP%] {\\n  background-color: var(--color-white);\\n  border-radius: 8px;\\n  box-shadow: var(--shadow-sm);\\n  padding: 2rem;\\n}\\n\\n.form-section[_ngcontent-%COMP%] {\\n  border: none;\\n  padding: 0;\\n  margin-bottom: 2rem;\\n}\\n.form-section[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%] {\\n  font-size: 1.2rem;\\n  font-weight: 600;\\n  margin-bottom: 1rem;\\n  padding-bottom: 0.5rem;\\n  border-bottom: 1px solid var(--color-border);\\n  width: 100%;\\n}\\n\\n.form-row[_ngcontent-%COMP%] {\\n  display: grid;\\n  grid-template-columns: 1fr 1fr;\\n  gap: 1.5rem;\\n}\\n\\n.form-actions[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: flex-end;\\n  align-items: center;\\n  gap: 1rem;\\n  border-top: 1px solid var(--color-border);\\n  padding-top: 1.5rem;\\n  margin-top: 1.5rem;\\n}\\n\\n.error-message[_ngcontent-%COMP%] {\\n  color: var(--color-danger);\\n  margin-right: auto;\\n}\\n\\n.btn-secondary[_ngcontent-%COMP%] {\\n  background-color: var(--color-light);\\n  color: var(--color-dark);\\n  border: 1px solid var(--color-border);\\n}\\n\\n\\n\\n.pet-section[_ngcontent-%COMP%] {\\n  margin-top: 2rem;\\n}\\n.pet-section[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%] {\\n  margin-bottom: 1.5rem;\\n  padding-bottom: 1rem;\\n  border-bottom: 1px solid var(--color-border);\\n}\\n.pet-section[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\n  font-size: 1.5rem;\\n}\\n.no-data[_ngcontent-%COMP%] {\\n  text-align: center;\\n  padding: 1rem;\\n}\\n\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmVhdHVyZXMvYWRtaW4vcGFnZXMvY2xpZW50ZXMvY2xpZW50ZS1mb3JtL2NsaWVudGUtZm9ybS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsZ0JBQWdCO0VBQ2hCLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLFdBQVc7RUFDWCxxQkFBcUI7QUFDdkI7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsWUFBWTtFQUNaLDJCQUEyQjtFQUMzQixnQkFBZ0I7QUFDbEI7QUFDQTtFQUNFLDBCQUEwQjtBQUM1Qjs7QUFFQTtFQUNFLGVBQWU7RUFDZixnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxvQ0FBb0M7RUFDcEMsa0JBQWtCO0VBQ2xCLDRCQUE0QjtFQUM1QixhQUFhO0FBQ2Y7O0FBRUE7RUFDRSxZQUFZO0VBQ1osVUFBVTtFQUNWLG1CQUFtQjtBQUNyQjtBQUNBO0VBQ0UsaUJBQWlCO0VBQ2pCLGdCQUFnQjtFQUNoQixtQkFBbUI7RUFDbkIsc0JBQXNCO0VBQ3RCLDRDQUE0QztFQUM1QyxXQUFXO0FBQ2I7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsOEJBQThCO0VBQzlCLFdBQVc7QUFDYjs7QUFFQTtFQUNFLGFBQWE7RUFDYix5QkFBeUI7RUFDekIsbUJBQW1CO0VBQ25CLFNBQVM7RUFDVCx5Q0FBeUM7RUFDekMsbUJBQW1CO0VBQ25CLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLDBCQUEwQjtFQUMxQixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxvQ0FBb0M7RUFDcEMsd0JBQXdCO0VBQ3hCLHFDQUFxQztBQUN2Qzs7QUFFQSxrQkFBa0I7QUFDbEI7RUFDRSxnQkFBZ0I7QUFDbEI7QUFDQTtFQUNFLHFCQUFxQjtFQUNyQixvQkFBb0I7RUFDcEIsNENBQTRDO0FBQzlDO0FBQ0E7RUFDRSxpQkFBaUI7QUFDbkI7QUFDQTtFQUNFLGtCQUFrQjtFQUNsQixhQUFhO0FBQ2Y7QUFDQSwwREFBMEQiLCJzb3VyY2VzQ29udGVudCI6WyIuZm9ybS1jb250YWluZXIge1xyXG4gIG1heC13aWR0aDogOTAwcHg7XHJcbiAgbWFyZ2luOiAwIGF1dG87XHJcbn1cclxuXHJcbi5mb3JtLWhlYWRlciB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIGdhcDogMS41cmVtO1xyXG4gIG1hcmdpbi1ib3R0b206IDEuNXJlbTtcclxufVxyXG5cclxuLmJ0bi1iYWNrIHtcclxuICBiYWNrZ3JvdW5kOiBub25lO1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBjb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeSk7XHJcbiAgZm9udC13ZWlnaHQ6IDUwMDtcclxufVxyXG4uYnRuLWJhY2s6aG92ZXIge1xyXG4gIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xyXG59XHJcblxyXG4uZm9ybS1oZWFkZXIgaDEge1xyXG4gIGZvbnQtc2l6ZTogMnJlbTtcclxuICBmb250LXdlaWdodDogNjAwO1xyXG59XHJcblxyXG4uY2FyZCB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3Itd2hpdGUpO1xyXG4gIGJvcmRlci1yYWRpdXM6IDhweDtcclxuICBib3gtc2hhZG93OiB2YXIoLS1zaGFkb3ctc20pO1xyXG4gIHBhZGRpbmc6IDJyZW07XHJcbn1cclxuXHJcbi5mb3JtLXNlY3Rpb24ge1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBwYWRkaW5nOiAwO1xyXG4gIG1hcmdpbi1ib3R0b206IDJyZW07XHJcbn1cclxuLmZvcm0tc2VjdGlvbiBsZWdlbmQge1xyXG4gIGZvbnQtc2l6ZTogMS4ycmVtO1xyXG4gIGZvbnQtd2VpZ2h0OiA2MDA7XHJcbiAgbWFyZ2luLWJvdHRvbTogMXJlbTtcclxuICBwYWRkaW5nLWJvdHRvbTogMC41cmVtO1xyXG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1jb2xvci1ib3JkZXIpO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG59XHJcblxyXG4uZm9ybS1yb3cge1xyXG4gIGRpc3BsYXk6IGdyaWQ7XHJcbiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyO1xyXG4gIGdhcDogMS41cmVtO1xyXG59XHJcblxyXG4uZm9ybS1hY3Rpb25zIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBnYXA6IDFyZW07XHJcbiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWNvbG9yLWJvcmRlcik7XHJcbiAgcGFkZGluZy10b3A6IDEuNXJlbTtcclxuICBtYXJnaW4tdG9wOiAxLjVyZW07XHJcbn1cclxuXHJcbi5lcnJvci1tZXNzYWdlIHtcclxuICBjb2xvcjogdmFyKC0tY29sb3ItZGFuZ2VyKTtcclxuICBtYXJnaW4tcmlnaHQ6IGF1dG87XHJcbn1cclxuXHJcbi5idG4tc2Vjb25kYXJ5IHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1saWdodCk7XHJcbiAgY29sb3I6IHZhcigtLWNvbG9yLWRhcmspO1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWNvbG9yLWJvcmRlcik7XHJcbn1cclxuXHJcbi8qIFNlw4PCp8ODwqNvIGRlIFBldHMgKi9cclxuLnBldC1zZWN0aW9uIHtcclxuICBtYXJnaW4tdG9wOiAycmVtO1xyXG59XHJcbi5wZXQtc2VjdGlvbiAucGFnZS1oZWFkZXIge1xyXG4gIG1hcmdpbi1ib3R0b206IDEuNXJlbTtcclxuICBwYWRkaW5nLWJvdHRvbTogMXJlbTtcclxuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tY29sb3ItYm9yZGVyKTtcclxufVxyXG4ucGV0LXNlY3Rpb24gLnBhZ2UtaGVhZGVyIGgyIHtcclxuICBmb250LXNpemU6IDEuNXJlbTtcclxufVxyXG4ubm8tZGF0YSB7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIHBhZGRpbmc6IDFyZW07XHJcbn1cclxuLyogKFJldXRpbGl6YSBlc3RpbG9zIGRhIGRhdGEtdGFibGUgZGEgY2xpZW50ZS1saXN0LmNzcykgKi8iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"names":["Validators","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵadvance","ɵɵtextInterpolate","ctx_r1","errorMessage","ɵɵlistener","ClienteFormComponent_div_36_ul_4_li_1_Template_button_click_2_listener","restoredCtx","ɵɵrestoreView","_r10","pet_r8","$implicit","ctx_r9","ɵɵnextContext","ɵɵresetView","openPetModal","ClienteFormComponent_div_36_ul_4_li_1_Template_button_click_4_listener","ctx_r11","onDeletePet","ɵɵtextInterpolate2","nome","especie","ɵɵtemplate","ClienteFormComponent_div_36_ul_4_li_1_Template","ɵɵproperty","ctx_r4","cliente","pets","ClienteFormComponent_div_36_ul_4_Template","ClienteFormComponent_div_36_ng_template_5_Template","ɵɵtemplateRefExtractor","ClienteFormComponent_div_36_Template_button_click_7_listener","_r13","ctx_r12","ctx_r2","length","_r5","ClienteFormComponent_app_pet_form_modal_37_Template_app_pet_form_modal_saveSuccess_0_listener","_r15","ctx_r14","handlePetSave","ClienteFormComponent_app_pet_form_modal_37_Template_app_pet_form_modal_close_0_listener","ctx_r16","closePetModal","ctx_r3","currentPetToEdit","clienteId","ClienteFormComponent","constructor","fb","clienteService","petService","router","route","isEditMode","isLoading","isPetModalOpen","clienteForm","group","required","maxLength","email","senha","minLength","cpf","cpfValidator","telefone","telefoneValidator","endereco","ngOnInit","idParam","snapshot","paramMap","get","loadClienteData","clearValidators","updateValueAndValidity","getClienteById","subscribe","next","patchValue","error","navigate","onSubmit","invalid","formValue","value","saveOperation","updateCliente","replace","createCliente","err","erro","control","invalidCpf","invalidTelefone","formatCPF","event","input","target","slice","setValue","emitEvent","formatTelefone","pet","confirm","deletePet","id","alert","goBack","ɵɵdirectiveInject","i1","FormBuilder","i2","ClienteService","i3","PetService","i4","Router","ActivatedRoute","selectors","decls","vars","consts","template","ClienteFormComponent_Template","rf","ctx","ClienteFormComponent_Template_button_click_4_listener","ClienteFormComponent_Template_form_ngSubmit_6_listener","ClienteFormComponent_div_16_Template","ClienteFormComponent_Template_input_input_21_listener","$event","ClienteFormComponent_Template_input_input_25_listener","ClienteFormComponent_div_30_Template","ClienteFormComponent_Template_button_click_34_listener","ClienteFormComponent_div_36_Template","ClienteFormComponent_app_pet_form_modal_37_Template","ɵɵtextInterpolate1"],"sources":["C:\\TCC\\petflow\\petflow-web\\src\\app\\features\\admin\\pages\\clientes\\cliente-form\\cliente-form.component.ts","C:\\TCC\\petflow\\petflow-web\\src\\app\\features\\admin\\pages\\clientes\\cliente-form\\cliente-form.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators, AbstractControl, ValidationErrors } from '@angular/forms';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ClienteService } from '../../../services/cliente.service';\r\nimport { PetService } from '../../../services/pet.service';\r\nimport { Cliente } from '../../../models/cliente.model';\r\nimport { Pet } from '../../../models/pet.model';\r\n\r\n@Component({\r\nselector: 'app-cliente-form',\r\ntemplateUrl: './cliente-form.component.html',\r\nstyleUrls: ['./cliente-form.component.css']\r\n})\r\nexport class ClienteFormComponent implements OnInit {\r\nclienteForm: FormGroup;\r\nisEditMode = false;\r\nisLoading = false;\r\nerrorMessage: string | null = null;\r\n\r\npublic clienteId: number | null = null;\r\npublic cliente: Cliente | null = null; // Para listar os pets\r\n\r\npublic isPetModalOpen = false;\r\npublic currentPetToEdit: Pet | null = null;\r\n\r\nconstructor(\r\n    private fb: FormBuilder,\r\n    private clienteService: ClienteService,\r\n    private petService: PetService,\r\n    private router: Router,\r\n    private route: ActivatedRoute\r\n  ) {\r\n    this.clienteForm = this.fb.group({\r\n      nome: ['', [Validators.required, Validators.maxLength(100)]],\r\n      email: ['', [Validators.required, Validators.email, Validators.maxLength(100)]],\r\n      senha: ['', [Validators.required, Validators.minLength(6), Validators.maxLength(20)]],\r\n      cpf: ['', [Validators.required, this.cpfValidator]],\r\n      telefone: ['', [Validators.required, this.telefoneValidator]],\r\n      endereco: ['', [Validators.maxLength(200)]]\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    const idParam = this.route.snapshot.paramMap.get('id');\r\n    if (idParam) {\r\n      this.isEditMode = true;\r\n      this.clienteId = +idParam;\r\n      this.loadClienteData();\r\n\r\n      // senha não obrigatória em edição\r\n      this.clienteForm.get('senha')?.clearValidators();\r\n      this.clienteForm.get('senha')?.updateValueAndValidity();\r\n    }\r\n  }\r\n\r\n  loadClienteData(): void {\r\n    if (!this.clienteId) return;\r\n    this.isLoading = true;\r\n\r\n    this.clienteService.getClienteById(this.clienteId).subscribe({\r\n      next: (cliente) => {\r\n        this.isLoading = false;\r\n        this.cliente = cliente;\r\n        this.clienteForm.patchValue({\r\n          nome: cliente.nome,\r\n          email: cliente.email,\r\n          cpf: cliente.cpf,\r\n          telefone: cliente.telefone,\r\n          endereco: cliente.endereco\r\n        });\r\n      },\r\n      error: () => {\r\n        this.isLoading = false;\r\n        this.errorMessage = \"Cliente não encontrado.\";\r\n        this.router.navigate(['/admin/clientes']);\r\n      }\r\n    });\r\n  }\r\n\r\n  onSubmit(): void {\r\n    if (this.clienteForm.invalid) {\r\n      this.errorMessage = \"Por favor, corrija os erros no formulário.\";\r\n      return;\r\n    }\r\n\r\n    this.isLoading = true;\r\n    this.errorMessage = null;\r\n    const formValue = this.clienteForm.value;\r\n\r\n    const saveOperation = this.isEditMode\r\n      ? this.clienteService.updateCliente(this.clienteId!, {\r\n          nome: formValue.nome,\r\n          cpf: formValue.cpf.replace(/\\D/g, ''), // salva somente números\r\n          telefone: formValue.telefone.replace(/\\D/g, ''), // salva somente números\r\n          endereco: formValue.endereco\r\n        })\r\n      : this.clienteService.createCliente({\r\n          ...formValue,\r\n          cpf: formValue.cpf.replace(/\\D/g, ''),\r\n          telefone: formValue.telefone.replace(/\\D/g, '')\r\n        });\r\n\r\n    saveOperation.subscribe({\r\n      next: () => {\r\n        this.isLoading = false;\r\n        this.router.navigate(['/admin/clientes']);\r\n      },\r\n      error: (err) => {\r\n        this.isLoading = false;\r\n        this.errorMessage = err.error?.erro || \"Erro ao salvar cliente. Verifique o CPF e E-mail.\";\r\n      }\r\n    });\r\n  }\r\n\r\n  // ===== Validação de CPF =====\r\n  cpfValidator(control: AbstractControl): ValidationErrors | null {\r\n    const cpf = control.value.replace(/\\D/g, '');\r\n    if (!cpf || cpf.length !== 11) {\r\n      return { invalidCpf: 'CPF inválido. Deve conter 11 números.' };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  // ===== Validação de Telefone =====\r\n  telefoneValidator(control: AbstractControl): ValidationErrors | null {\r\n    const telefone = control.value.replace(/\\D/g, '');\r\n    if (!telefone || (telefone.length !== 10 && telefone.length !== 11)) {\r\n      return { invalidTelefone: 'Telefone inválido. Deve conter 10 ou 11 números.' };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  // ===== Formatação visual CPF =====\r\n  formatCPF(event: Event) {\r\n    const input = event.target as HTMLInputElement;\r\n    let value = input.value.replace(/\\D/g, '').slice(0, 11);\r\n    if (value.length > 3) value = value.replace(/^(\\d{3})(\\d)/, '$1.$2');\r\n    if (value.length > 6) value = value.replace(/^(\\d{3})\\.(\\d{3})(\\d)/, '$1.$2.$3');\r\n    if (value.length > 9) value = value.replace(/^(\\d{3})\\.(\\d{3})\\.(\\d{3})(\\d)/, '$1.$2.$3-$4');\r\n    input.value = value;\r\n    this.clienteForm.get('cpf')?.setValue(value, { emitEvent: false });\r\n  }\r\n\r\n  // ===== Formatação visual Telefone =====\r\n  formatTelefone(event: Event) {\r\n    const input = event.target as HTMLInputElement;\r\n    let value = input.value.replace(/\\D/g, '').slice(0, 11);\r\n    if (value.length > 2) value = value.replace(/^(\\d{2})(\\d)/, '($1)$2');\r\n    if (value.length > 6) value = value.replace(/^(\\(\\d{2}\\))(\\d{5})(\\d)/, '$1$2-$3');\r\n    input.value = value;\r\n    this.clienteForm.get('telefone')?.setValue(value, { emitEvent: false });\r\n  }\r\n\r\n  openPetModal(pet: Pet | null = null): void {\r\n    this.currentPetToEdit = pet;\r\n    this.isPetModalOpen = true;\r\n  }\r\n\r\n  closePetModal(): void {\r\n    this.isPetModalOpen = false;\r\n    this.currentPetToEdit = null;\r\n  }\r\n\r\n  handlePetSave(): void {\r\n    this.loadClienteData(); // Atualiza a lista de pets\r\n  }\r\n\r\n  onDeletePet(pet: Pet): void {\r\n    if (confirm(`Tem certeza que deseja excluir o pet \"${pet.nome}\"?`)) {\r\n      this.petService.deletePet(pet.id).subscribe({\r\n        next: () => this.loadClienteData(),\r\n        error: () => alert(\"Erro ao excluir pet.\")\r\n      });\r\n    }\r\n  }\r\n\r\n  goBack(): void {\r\n    this.router.navigate(['/admin/clientes']);\r\n  }\r\n}\r\n","<div class=\"form-container card\">\r\n    <div class=\"form-header\">\r\n        <h1>{{ isEditMode ? 'Editar Cliente' : 'Cadastrar Novo Cliente' }}</h1>\r\n        <button type=\"button\" class=\"btn-back\" (click)=\"goBack()\">Voltar</button>\r\n    </div>\r\n\r\n    <form [formGroup]=\"clienteForm\" (ngSubmit)=\"onSubmit()\" class=\"form-section\">\r\n        <div class=\"form-row\">\r\n            <div class=\"form-group\">\r\n                <label>Nome</label>\r\n                <input type=\"text\" formControlName=\"nome\" maxlength=\"100\">\r\n            </div>\r\n\r\n            <div class=\"form-group\">\r\n                <label>E-mail</label>\r\n                <input type=\"email\" formControlName=\"email\" maxlength=\"100\">\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"form-row\" *ngIf=\"!isEditMode\">\r\n            <div class=\"form-group\">\r\n                <label>Senha</label>\r\n                <input type=\"password\" formControlName=\"senha\" maxlength=\"20\">\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"form-row\">\r\n            <div class=\"form-group\">\r\n                <label>CPF</label>\r\n                <input type=\"text\"\r\n                       formControlName=\"cpf\"\r\n                       maxlength=\"14\"\r\n                       placeholder=\"000.000.000-00\"\r\n                       (input)=\"formatCPF($event)\">\r\n            </div>\r\n\r\n            <div class=\"form-group\">\r\n                <label>Telefone</label>\r\n                <input type=\"text\"\r\n                       formControlName=\"telefone\"\r\n                       maxlength=\"15\"\r\n                       placeholder=\"(00) 00000-0000\"\r\n                       (input)=\"formatTelefone($event)\">\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n            <label>Endereço</label>\r\n            <input type=\"text\" formControlName=\"endereco\" maxlength=\"200\">\r\n        </div>\r\n\r\n        <div *ngIf=\"errorMessage\" class=\"error-message\">{{ errorMessage }}</div>\r\n\r\n        <div class=\"form-actions\">\r\n            <button type=\"submit\" [disabled]=\"isLoading\">\r\n                {{ isLoading ? 'Salvando...' : 'Salvar Cliente' }}\r\n            </button>\r\n            <button type=\"button\" class=\"btn-secondary\" (click)=\"goBack()\">Voltar</button>\r\n        </div>\r\n    </form>\r\n\r\n    <div class=\"pet-section\" *ngIf=\"cliente\">\r\n        <div class=\"page-header\">\r\n            <h2>Pets do Cliente</h2>\r\n        </div>\r\n        <ul *ngIf=\"cliente.pets.length > 0; else noPets\">\r\n            <li *ngFor=\"let pet of cliente.pets\">\r\n                {{ pet.nome }} - {{ pet.especie }}\r\n                <button (click)=\"openPetModal(pet)\">Editar</button>\r\n                <button (click)=\"onDeletePet(pet)\">Excluir</button>\r\n            </li>\r\n        </ul>\r\n        <ng-template #noPets>\r\n            <div class=\"no-data\">Nenhum pet cadastrado.</div>\r\n        </ng-template>\r\n\r\n        <button (click)=\"openPetModal()\">Adicionar Pet</button>\r\n    </div>\r\n\r\n    <app-pet-form-modal\r\n            *ngIf=\"isPetModalOpen\"\r\n            [pet]=\"currentPetToEdit\"\r\n            [clienteId]=\"clienteId\"\r\n            (saveSuccess)=\"handlePetSave()\"\r\n            (close)=\"closePetModal()\">\r\n    </app-pet-form-modal>\r\n</div>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}