{"ast":null,"code":"// Imports do Calendário\nimport { CalendarView } from 'angular-calendar';\nimport { endOfMonth, startOfMonth, endOfWeek, startOfWeek } from 'date-fns';\nimport { Subject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../admin/services/agendamento.service\";\nfunction AgendaComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1, \" Carregando agendamentos... \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AgendaComponent_mwl_calendar_month_view_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mwl-calendar-month-view\", 13);\n    i0.ɵɵlistener(\"dayClicked\", function AgendaComponent_mwl_calendar_month_view_24_Template_mwl_calendar_month_view_dayClicked_0_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      ctx_r4.setView(ctx_r4.CalendarView.Day);\n      return i0.ɵɵresetView(ctx_r4.viewDate = $event.day.date);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"viewDate\", ctx_r1.viewDate)(\"events\", ctx_r1.events)(\"refresh\", ctx_r1.refresh)(\"locale\", ctx_r1.locale);\n  }\n}\nfunction AgendaComponent_mwl_calendar_week_view_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mwl-calendar-week-view\", 14);\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"viewDate\", ctx_r2.viewDate)(\"events\", ctx_r2.events)(\"refresh\", ctx_r2.refresh)(\"locale\", ctx_r2.locale);\n  }\n}\nfunction AgendaComponent_mwl_calendar_day_view_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mwl-calendar-day-view\", 14);\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"viewDate\", ctx_r3.viewDate)(\"events\", ctx_r3.events)(\"refresh\", ctx_r3.refresh)(\"locale\", ctx_r3.locale);\n  }\n}\n// Cores para os status (Exemplo)\nconst colors = {\n  AGENDADO: {\n    primary: '#007bff',\n    secondary: '#D1E7FD'\n  },\n  CONCLUIDO: {\n    primary: '#198754',\n    secondary: '#D1FAD0'\n  },\n  CANCELADO: {\n    primary: '#6c757d',\n    secondary: '#E2E3E5'\n  }\n};\nclass AgendaComponent {\n  constructor(agendamentoService) {\n    this.agendamentoService = agendamentoService;\n    // --- Configuração do Calendário ---\n    this.view = CalendarView.Month; // Visão de Mês\n    this.CalendarView = CalendarView; // Para usar no HTML\n    this.viewDate = new Date(); // Data atual\n    this.locale = 'pt'; // Define o idioma para \"pt-BR\"\n    this.events = [];\n    this.isLoading = true;\n    this.refresh = new Subject();\n  }\n  ngOnInit() {\n    this.loadAgendamentos();\n  }\n  /**\n   * Carrega os agendamentos do back-end\n   * UC05 - Visão do Administrador (calendário)\n   */\n  loadAgendamentos() {\n    this.isLoading = true;\n    // Calcula o início e o fim do mês visível\n    const inicio = startOfWeek(startOfMonth(this.viewDate));\n    const fim = endOfWeek(endOfMonth(this.viewDate));\n    // Busca na API\n    this.agendamentoService.getAgendamentos(inicio.toISOString(), fim.toISOString()).subscribe(data => {\n      // Converte a resposta da API para o formato do Calendário\n      this.events = data.map(ag => {\n        return {\n          id: ag.id,\n          start: new Date(ag.dataHora),\n          title: `(${ag.status.substring(0, 3)}) ${ag.pet.nome} - ${ag.servicos.map(s => s.nome).join(', ')}`,\n          color: colors[ag.status] || colors.CANCELADO,\n          allDay: false // Eventos têm hora marcada\n        };\n      });\n      this.isLoading = false;\n      this.refresh.next(); // Atualiza a view do calendário\n    });\n  }\n  /**\n   * Chamado quando o usuário troca de mês ou dia.\n   */\n  onViewDateChange() {\n    this.loadAgendamentos();\n  }\n  /**\n   * Chamado quando o usuário troca a visão (Mês, Semana, Dia).\n   */\n  setView(view) {\n    this.view = view;\n  }\n  static {\n    this.ɵfac = function AgendaComponent_Factory(t) {\n      return new (t || AgendaComponent)(i0.ɵɵdirectiveInject(i1.AgendamentoService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AgendaComponent,\n      selectors: [[\"app-agenda\"]],\n      decls: 27,\n      vars: 21,\n      consts: [[1, \"list-container\"], [1, \"page-header\"], [1, \"calendar-header\"], [1, \"btn-group\"], [1, \"btn-secondary\", 3, \"click\"], [\"mwlCalendarPreviousView\", \"\", 1, \"btn-secondary\", 3, \"view\", \"viewDate\", \"viewDateChange\"], [\"mwlCalendarToday\", \"\", 1, \"btn-secondary\", 3, \"viewDate\", \"viewDateChange\"], [\"mwlCalendarNextView\", \"\", 1, \"btn-secondary\", 3, \"view\", \"viewDate\", \"viewDateChange\"], [\"class\", \"loading-indicator\", 4, \"ngIf\"], [1, \"calendar-container\", \"card\", 3, \"ngSwitch\"], [3, \"viewDate\", \"events\", \"refresh\", \"locale\", \"dayClicked\", 4, \"ngSwitchCase\"], [3, \"viewDate\", \"events\", \"refresh\", \"locale\", 4, \"ngSwitchCase\"], [1, \"loading-indicator\"], [3, \"viewDate\", \"events\", \"refresh\", \"locale\", \"dayClicked\"], [3, \"viewDate\", \"events\", \"refresh\", \"locale\"]],\n      template: function AgendaComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"header\", 1)(2, \"h1\");\n          i0.ɵɵtext(3, \"Agenda de Agendamentos\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(4, \"div\", 2)(5, \"div\", 3)(6, \"button\", 4);\n          i0.ɵɵlistener(\"click\", function AgendaComponent_Template_button_click_6_listener() {\n            return ctx.setView(ctx.CalendarView.Month);\n          });\n          i0.ɵɵtext(7, \" M\\u00EAs \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(8, \"button\", 4);\n          i0.ɵɵlistener(\"click\", function AgendaComponent_Template_button_click_8_listener() {\n            return ctx.setView(ctx.CalendarView.Week);\n          });\n          i0.ɵɵtext(9, \" Semana \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"button\", 4);\n          i0.ɵɵlistener(\"click\", function AgendaComponent_Template_button_click_10_listener() {\n            return ctx.setView(ctx.CalendarView.Day);\n          });\n          i0.ɵɵtext(11, \" Dia \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(12, \"div\", 3)(13, \"button\", 5);\n          i0.ɵɵlistener(\"viewDateChange\", function AgendaComponent_Template_button_viewDateChange_13_listener($event) {\n            return ctx.viewDate = $event;\n          })(\"viewDateChange\", function AgendaComponent_Template_button_viewDateChange_13_listener() {\n            return ctx.onViewDateChange();\n          });\n          i0.ɵɵtext(14, \" Anterior \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"button\", 6);\n          i0.ɵɵlistener(\"viewDateChange\", function AgendaComponent_Template_button_viewDateChange_15_listener($event) {\n            return ctx.viewDate = $event;\n          })(\"viewDateChange\", function AgendaComponent_Template_button_viewDateChange_15_listener() {\n            return ctx.onViewDateChange();\n          });\n          i0.ɵɵtext(16, \" Hoje \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(17, \"button\", 7);\n          i0.ɵɵlistener(\"viewDateChange\", function AgendaComponent_Template_button_viewDateChange_17_listener($event) {\n            return ctx.viewDate = $event;\n          })(\"viewDateChange\", function AgendaComponent_Template_button_viewDateChange_17_listener() {\n            return ctx.onViewDateChange();\n          });\n          i0.ɵɵtext(18, \" Pr\\u00F3ximo \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(19, \"h3\");\n          i0.ɵɵtext(20);\n          i0.ɵɵpipe(21, \"calendarDate\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(22, AgendaComponent_div_22_Template, 2, 0, \"div\", 8);\n          i0.ɵɵelementStart(23, \"div\", 9);\n          i0.ɵɵtemplate(24, AgendaComponent_mwl_calendar_month_view_24_Template, 1, 4, \"mwl-calendar-month-view\", 10);\n          i0.ɵɵtemplate(25, AgendaComponent_mwl_calendar_week_view_25_Template, 1, 4, \"mwl-calendar-week-view\", 11);\n          i0.ɵɵtemplate(26, AgendaComponent_mwl_calendar_day_view_26_Template, 1, 4, \"mwl-calendar-day-view\", 11);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(6);\n          i0.ɵɵclassProp(\"active\", ctx.view === ctx.CalendarView.Month);\n          i0.ɵɵadvance(2);\n          i0.ɵɵclassProp(\"active\", ctx.view === ctx.CalendarView.Week);\n          i0.ɵɵadvance(2);\n          i0.ɵɵclassProp(\"active\", ctx.view === ctx.CalendarView.Day);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"view\", ctx.view)(\"viewDate\", ctx.viewDate);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"viewDate\", ctx.viewDate);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"view\", ctx.view)(\"viewDate\", ctx.viewDate);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(21, 17, ctx.viewDate, ctx.view + \"ViewTitle\", ctx.locale));\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngSwitch\", ctx.view);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngSwitchCase\", ctx.CalendarView.Month);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngSwitchCase\", ctx.CalendarView.Week);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngSwitchCase\", ctx.CalendarView.Day);\n        }\n      },\n      styles: [\"\\n\\n\\n.calendar-header[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  margin-bottom: 1.5rem;\\n  padding: 1rem;\\n  background-color: var(--color-white);\\n  border-radius: 8px;\\n  box-shadow: var(--shadow-sm);\\n}\\n\\n.calendar-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\\n  font-size: 1.5rem;\\n  font-weight: 500;\\n  margin: 0;\\n}\\n\\n.btn-group[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 0.25rem;\\n}\\n\\n.btn-group[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%] {\\n  background-color: var(--color-light);\\n  color: var(--color-dark);\\n  border: 1px solid var(--color-border);\\n  padding: 8px 12px;\\n}\\n\\n.btn-group[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover {\\n  background-color: #e2e6ea;\\n}\\n\\n.btn-group[_ngcontent-%COMP%]   .btn-secondary.active[_ngcontent-%COMP%] {\\n  background-color: var(--color-primary);\\n  color: var(--color-white);\\n  border-color: var(--color-primary-dark);\\n}\\n\\n.calendar-container.card[_ngcontent-%COMP%] {\\n  background-color: var(--color-white);\\n  border-radius: 8px;\\n  box-shadow: var(--shadow-sm);\\n  padding: 1rem;\\n}\\n\\n\\n\\nmwl-calendar-week-view[_ngcontent-%COMP%], mwl-calendar-day-view[_ngcontent-%COMP%] {\\n  display: block;\\n  height: 600px; \\n\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmVhdHVyZXMvYWRtaW4vcGFnZXMvYWdlbmRhL2FnZW5kYS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHNEQUFzRDs7QUFFdEQ7RUFDRSxhQUFhO0VBQ2IsOEJBQThCO0VBQzlCLG1CQUFtQjtFQUNuQixxQkFBcUI7RUFDckIsYUFBYTtFQUNiLG9DQUFvQztFQUNwQyxrQkFBa0I7RUFDbEIsNEJBQTRCO0FBQzlCOztBQUVBO0VBQ0UsaUJBQWlCO0VBQ2pCLGdCQUFnQjtFQUNoQixTQUFTO0FBQ1g7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsWUFBWTtBQUNkOztBQUVBO0VBQ0Usb0NBQW9DO0VBQ3BDLHdCQUF3QjtFQUN4QixxQ0FBcUM7RUFDckMsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UseUJBQXlCO0FBQzNCOztBQUVBO0VBQ0Usc0NBQXNDO0VBQ3RDLHlCQUF5QjtFQUN6Qix1Q0FBdUM7QUFDekM7O0FBRUE7RUFDRSxvQ0FBb0M7RUFDcEMsa0JBQWtCO0VBQ2xCLDRCQUE0QjtFQUM1QixhQUFhO0FBQ2Y7O0FBRUEseUNBQXlDO0FBQ3pDOztFQUVFLGNBQWM7RUFDZCxhQUFhLEVBQUUsd0NBQXdDO0FBQ3pEIiwic291cmNlc0NvbnRlbnQiOlsiLyogKE11aXRvcyBlc3RpbG9zIHPDg8KjbyBoZXJkYWRvcyBkbyBjbGllbnRlLWxpc3QuY3NzKSAqL1xyXG5cclxuLmNhbGVuZGFyLWhlYWRlciB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBtYXJnaW4tYm90dG9tOiAxLjVyZW07XHJcbiAgcGFkZGluZzogMXJlbTtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci13aGl0ZSk7XHJcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xyXG4gIGJveC1zaGFkb3c6IHZhcigtLXNoYWRvdy1zbSk7XHJcbn1cclxuXHJcbi5jYWxlbmRhci1oZWFkZXIgaDMge1xyXG4gIGZvbnQtc2l6ZTogMS41cmVtO1xyXG4gIGZvbnQtd2VpZ2h0OiA1MDA7XHJcbiAgbWFyZ2luOiAwO1xyXG59XHJcblxyXG4uYnRuLWdyb3VwIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGdhcDogMC4yNXJlbTtcclxufVxyXG5cclxuLmJ0bi1ncm91cCAuYnRuLXNlY29uZGFyeSB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItbGlnaHQpO1xyXG4gIGNvbG9yOiB2YXIoLS1jb2xvci1kYXJrKTtcclxuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1jb2xvci1ib3JkZXIpO1xyXG4gIHBhZGRpbmc6IDhweCAxMnB4O1xyXG59XHJcblxyXG4uYnRuLWdyb3VwIC5idG4tc2Vjb25kYXJ5OmhvdmVyIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTJlNmVhO1xyXG59XHJcblxyXG4uYnRuLWdyb3VwIC5idG4tc2Vjb25kYXJ5LmFjdGl2ZSB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeSk7XHJcbiAgY29sb3I6IHZhcigtLWNvbG9yLXdoaXRlKTtcclxuICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnktZGFyayk7XHJcbn1cclxuXHJcbi5jYWxlbmRhci1jb250YWluZXIuY2FyZCB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3Itd2hpdGUpO1xyXG4gIGJvcmRlci1yYWRpdXM6IDhweDtcclxuICBib3gtc2hhZG93OiB2YXIoLS1zaGFkb3ctc20pO1xyXG4gIHBhZGRpbmc6IDFyZW07XHJcbn1cclxuXHJcbi8qIEZvcsODwqdhIGEgYWx0dXJhIGRhIHZpZXcgZGEgc2VtYW5hL2RpYSAqL1xyXG5td2wtY2FsZW5kYXItd2Vlay12aWV3LFxyXG5td2wtY2FsZW5kYXItZGF5LXZpZXcge1xyXG4gIGRpc3BsYXk6IGJsb2NrO1xyXG4gIGhlaWdodDogNjAwcHg7IC8qIEFsdHVyYSBmaXhhIHBhcmEgbyBzY3JvbGwgZnVuY2lvbmFyICovXHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}\nexport { AgendaComponent };","map":{"version":3,"names":["CalendarView","endOfMonth","startOfMonth","endOfWeek","startOfWeek","Subject","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","AgendaComponent_mwl_calendar_month_view_24_Template_mwl_calendar_month_view_dayClicked_0_listener","$event","ɵɵrestoreView","_r5","ctx_r4","ɵɵnextContext","setView","Day","ɵɵresetView","viewDate","day","date","ɵɵproperty","ctx_r1","events","refresh","locale","ɵɵelement","ctx_r2","ctx_r3","colors","AGENDADO","primary","secondary","CONCLUIDO","CANCELADO","AgendaComponent","constructor","agendamentoService","view","Month","Date","isLoading","ngOnInit","loadAgendamentos","inicio","fim","getAgendamentos","toISOString","subscribe","data","map","ag","id","start","dataHora","title","status","substring","pet","nome","servicos","s","join","color","allDay","next","onViewDateChange","ɵɵdirectiveInject","i1","AgendamentoService","selectors","decls","vars","consts","template","AgendaComponent_Template","rf","ctx","AgendaComponent_Template_button_click_6_listener","AgendaComponent_Template_button_click_8_listener","Week","AgendaComponent_Template_button_click_10_listener","AgendaComponent_Template_button_viewDateChange_13_listener","AgendaComponent_Template_button_viewDateChange_15_listener","AgendaComponent_Template_button_viewDateChange_17_listener","ɵɵtemplate","AgendaComponent_div_22_Template","AgendaComponent_mwl_calendar_month_view_24_Template","AgendaComponent_mwl_calendar_week_view_25_Template","AgendaComponent_mwl_calendar_day_view_26_Template","ɵɵadvance","ɵɵclassProp","ɵɵtextInterpolate","ɵɵpipeBind3"],"sources":["C:\\TCC\\petflow\\petflow-web\\src\\app\\features\\admin\\pages\\agenda\\agenda.component.ts","C:\\TCC\\petflow\\petflow-web\\src\\app\\features\\admin\\pages\\agenda\\agenda.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { AgendamentoService } from '../../../admin/services/agendamento.service';\r\nimport { AgendamentoResponse } from '../../../admin/models/agendamento.model';\r\n\r\n// Imports do Calendário\r\nimport { CalendarEvent, CalendarEventAction, CalendarView } from 'angular-calendar';\r\nimport {\r\nstartOfDay,\r\nendOfDay,\r\nsubDays,\r\naddDays,\r\nendOfMonth,\r\nisSameDay,\r\nisSameMonth,\r\naddHours,\r\nstartOfMonth,\r\nendOfWeek,\r\nstartOfWeek,\r\n} from 'date-fns';\r\nimport { Subject } from 'rxjs';\r\n\r\n// Cores para os status (Exemplo)\r\nconst colors: any = {\r\nAGENDADO: {\r\nprimary: '#007bff', // Azul\r\nsecondary: '#D1E7FD',\r\n},\r\nCONCLUIDO: {\r\nprimary: '#198754', // Verde\r\nsecondary: '#D1FAD0',\r\n},\r\nCANCELADO: {\r\nprimary: '#6c757d', // Cinza\r\nsecondary: '#E2E3E5',\r\n},\r\n};\r\n\r\n@Component({\r\nselector: 'app-agenda',\r\ntemplateUrl: './agenda.component.html',\r\nstyleUrls: ['./agenda.component.css']\r\n})\r\nexport class AgendaComponent implements OnInit {\r\n\r\n// --- Configuração do Calendário ---\r\nview: CalendarView = CalendarView.Month; // Visão de Mês\r\nCalendarView = CalendarView; // Para usar no HTML\r\nviewDate: Date = new Date(); // Data atual\r\nlocale: string = 'pt'; // Define o idioma para \"pt-BR\"\r\nevents: CalendarEvent[] = [];\r\nisLoading = true;\r\nrefresh = new Subject<void>();\r\n\r\nconstructor(private agendamentoService: AgendamentoService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.loadAgendamentos();\r\n  }\r\n\r\n  /**\r\n   * Carrega os agendamentos do back-end\r\n   * UC05 - Visão do Administrador (calendário)\r\n   */\r\n  loadAgendamentos(): void {\r\n    this.isLoading = true;\r\n\r\n    // Calcula o início e o fim do mês visível\r\n    const inicio = startOfWeek(startOfMonth(this.viewDate));\r\n    const fim = endOfWeek(endOfMonth(this.viewDate));\r\n\r\n    // Busca na API\r\n    this.agendamentoService.getAgendamentos(\r\n      inicio.toISOString(),\r\n      fim.toISOString()\r\n    ).subscribe(data => {\r\n      // Converte a resposta da API para o formato do Calendário\r\n      this.events = data.map((ag: AgendamentoResponse) => {\r\n        return {\r\n          id: ag.id,\r\n          start: new Date(ag.dataHora),\r\n          title: `(${ag.status.substring(0, 3)}) ${ag.pet.nome} - ${ag.servicos.map(s => s.nome).join(', ')}`,\r\n          color: colors[ag.status] || colors.CANCELADO,\r\n          allDay: false, // Eventos têm hora marcada\r\n        };\r\n      });\r\n      this.isLoading = false;\r\n      this.refresh.next(); // Atualiza a view do calendário\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Chamado quando o usuário troca de mês ou dia.\r\n   */\r\n  onViewDateChange(): void {\r\n    this.loadAgendamentos();\r\n  }\r\n\r\n  /**\r\n   * Chamado quando o usuário troca a visão (Mês, Semana, Dia).\r\n   */\r\n  setView(view: CalendarView): void {\r\n    this.view = view;\r\n  }\r\n}\r\n","<!-- (Usamos CSS do cliente-list e agenda.css) -->\r\n<div class=\"list-container\">\r\n\r\n    <!-- Cabeçalho da Página -->\r\n    <header class=\"page-header\">\r\n        <h1>Agenda de Agendamentos</h1>\r\n    </header>\r\n\r\n    <!-- Cabeçalho do Calendário (Controles) -->\r\n    <div class=\"calendar-header\">\r\n        <!-- Botões Mês/Semana/Dia -->\r\n        <div class=\"btn-group\">\r\n            <button\r\n                    class=\"btn-secondary\"\r\n                    (click)=\"setView(CalendarView.Month)\"\r\n                    [class.active]=\"view === CalendarView.Month\">\r\n                Mês\r\n            </button>\r\n            <button\r\n                    class=\"btn-secondary\"\r\n                    (click)=\"setView(CalendarView.Week)\"\r\n                    [class.active]=\"view === CalendarView.Week\">\r\n                Semana\r\n            </button>\r\n            <button\r\n                    class=\"btn-secondary\"\r\n                    (click)=\"setView(CalendarView.Day)\"\r\n                    [class.active]=\"view === CalendarView.Day\">\r\n                Dia\r\n            </button>\r\n        </div>\r\n\r\n        <!-- Botões Mês Anterior/Próximo -->\r\n        <div class=\"btn-group\">\r\n            <button\r\n                    class=\"btn-secondary\"\r\n                    mwlCalendarPreviousView\r\n                    [view]=\"view\"\r\n                    [(viewDate)]=\"viewDate\"\r\n                    (viewDateChange)=\"onViewDateChange()\">\r\n                Anterior\r\n            </button>\r\n            <button\r\n                    class=\"btn-secondary\"\r\n                    mwlCalendarToday\r\n                    [(viewDate)]=\"viewDate\"\r\n                    (viewDateChange)=\"onViewDateChange()\">\r\n                Hoje\r\n            </button>\r\n            <button\r\n                    class=\"btn-secondary\"\r\n                    mwlCalendarNextView\r\n                    [view]=\"view\"\r\n                    [(viewDate)]=\"viewDate\"\r\n                    (viewDateChange)=\"onViewDateChange()\">\r\n                Próximo\r\n            </button>\r\n        </div>\r\n\r\n        <!-- Título (Mês e Ano) -->\r\n        <h3>{{ viewDate | calendarDate:(view + 'ViewTitle'):locale }}</h3>\r\n    </div>\r\n\r\n    <!-- Estado de Loading -->\r\n    <div *ngIf=\"isLoading\" class=\"loading-indicator\">\r\n        Carregando agendamentos...\r\n    </div>\r\n\r\n    <!-- O Calendário (Visão de Mês/Semana/Dia) -->\r\n    <div [ngSwitch]=\"view\" class=\"calendar-container card\">\r\n        <!-- Visão de Mês -->\r\n        <mwl-calendar-month-view\r\n                *ngSwitchCase=\"CalendarView.Month\"\r\n                [viewDate]=\"viewDate\"\r\n                [events]=\"events\"\r\n                [refresh]=\"refresh\"\r\n                [locale]=\"locale\"\r\n                (dayClicked)=\"setView(CalendarView.Day); viewDate = $event.day.date\">\r\n        </mwl-calendar-month-view>\r\n\r\n        <!-- Visão de Semana -->\r\n        <mwl-calendar-week-view\r\n                *ngSwitchCase=\"CalendarView.Week\"\r\n                [viewDate]=\"viewDate\"\r\n                [events]=\"events\"\r\n                [refresh]=\"refresh\"\r\n                [locale]=\"locale\">\r\n        </mwl-calendar-week-view>\r\n\r\n        <!-- Visão de Dia -->\r\n        <mwl-calendar-day-view\r\n                *ngSwitchCase=\"CalendarView.Day\"\r\n                [viewDate]=\"viewDate\"\r\n                [events]=\"events\"\r\n                [refresh]=\"refresh\"\r\n                [locale]=\"locale\">\r\n        </mwl-calendar-day-view>\r\n    </div>\r\n</div>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}