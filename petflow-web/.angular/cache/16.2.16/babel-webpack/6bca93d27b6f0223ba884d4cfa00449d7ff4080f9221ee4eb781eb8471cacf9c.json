{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../../services/produto.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nfunction ProdutoFormComponent_div_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.errorMessage, \" \");\n  }\n}\nexport class ProdutoFormComponent {\n  constructor(fb, produtoService, router, route) {\n    this.fb = fb;\n    this.produtoService = produtoService;\n    this.router = router;\n    this.route = route;\n    this.isEditMode = false;\n    this.isLoading = false;\n    this.errorMessage = null;\n    this.produtoId = null;\n    // UC04 - Formulário com campos pertinentes [cite: 70, 222-251]\n    this.produtoForm = this.fb.group({\n      nome: ['', Validators.required],\n      descricao: [''],\n      precoCusto: [null, [Validators.required, Validators.min(0)]],\n      precoVenda: [null, [Validators.required, Validators.min(0.01)]],\n      qtdEstoque: [null, [Validators.required, Validators.min(0)]]\n    });\n  }\n  ngOnInit() {\n    const idParam = this.route.snapshot.paramMap.get('id');\n    if (idParam) {\n      // MODO EDIÇÃO\n      this.isEditMode = true;\n      this.produtoId = +idParam;\n      this.loadProdutoData();\n    }\n  }\n  loadProdutoData() {\n    if (!this.produtoId) return;\n    this.isLoading = true;\n    this.produtoService.getProdutoById(this.produtoId).subscribe({\n      next: produto => {\n        this.isLoading = false;\n        this.produtoForm.patchValue(produto);\n      },\n      error: err => {\n        this.isLoading = false;\n        this.errorMessage = \"Produto não encontrado.\";\n        this.router.navigate(['/admin/produtos']);\n      }\n    });\n  }\n  onSubmit() {\n    if (this.produtoForm.invalid) {\n      this.errorMessage = \"Por favor, corrija os erros no formulário.\";\n      return;\n    }\n    this.isLoading = true;\n    this.errorMessage = null;\n    const produtoData = this.produtoForm.value;\n    const saveOperation = this.isEditMode ? this.produtoService.updateProduto(this.produtoId, produtoData) : this.produtoService.createProduto(produtoData);\n    saveOperation.subscribe({\n      next: () => {\n        this.isLoading = false;\n        this.router.navigate(['/admin/produtos']);\n      },\n      error: err => {\n        this.isLoading = false;\n        // Validação de nome duplicado\n        this.errorMessage = err.error?.erro || \"Erro ao salvar produto.\";\n      }\n    });\n  }\n  goBack() {\n    this.router.navigate(['/admin/produtos']);\n  }\n  static {\n    this.ɵfac = function ProdutoFormComponent_Factory(t) {\n      return new (t || ProdutoFormComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ProdutoService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ProdutoFormComponent,\n      selectors: [[\"app-produto-form\"]],\n      decls: 37,\n      vars: 5,\n      consts: [[1, \"form-container\"], [1, \"form-header\"], [1, \"btn-back\", 3, \"click\"], [1, \"card\", 3, \"formGroup\", \"ngSubmit\"], [1, \"form-section\"], [1, \"form-group\"], [\"for\", \"nome\", 1, \"form-label\"], [\"id\", \"nome\", \"type\", \"text\", \"formControlName\", \"nome\", 1, \"form-control\"], [1, \"form-row\"], [\"for\", \"precoCusto\", 1, \"form-label\"], [\"id\", \"precoCusto\", \"type\", \"number\", \"formControlName\", \"precoCusto\", \"min\", \"0\", \"step\", \"0.01\", \"placeholder\", \"ex: 20.00\", 1, \"form-control\"], [\"for\", \"precoVenda\", 1, \"form-label\"], [\"id\", \"precoVenda\", \"type\", \"number\", \"formControlName\", \"precoVenda\", \"min\", \"0.01\", \"step\", \"0.01\", \"placeholder\", \"ex: 35.00\", 1, \"form-control\"], [\"for\", \"qtdEstoque\", 1, \"form-label\"], [\"id\", \"qtdEstoque\", \"type\", \"number\", \"formControlName\", \"qtdEstoque\", \"min\", \"0\", \"step\", \"1\", \"placeholder\", \"ex: 100\", 1, \"form-control\"], [\"for\", \"descricao\", 1, \"form-label\"], [\"id\", \"descricao\", \"formControlName\", \"descricao\", \"rows\", \"4\", 1, \"form-control\"], [1, \"form-actions\"], [\"class\", \"error-message\", 4, \"ngIf\"], [\"type\", \"button\", 1, \"btn-secondary\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn-primary\", 3, \"disabled\"], [1, \"error-message\"]],\n      template: function ProdutoFormComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"header\", 1)(2, \"button\", 2);\n          i0.ɵɵlistener(\"click\", function ProdutoFormComponent_Template_button_click_2_listener() {\n            return ctx.goBack();\n          });\n          i0.ɵɵtext(3, \" \\u2190 Voltar para a Lista \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"h1\");\n          i0.ɵɵtext(5);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(6, \"form\", 3);\n          i0.ɵɵlistener(\"ngSubmit\", function ProdutoFormComponent_Template_form_ngSubmit_6_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵelementStart(7, \"fieldset\", 4)(8, \"legend\");\n          i0.ɵɵtext(9, \"Dados do Produto\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"div\", 5)(11, \"label\", 6);\n          i0.ɵɵtext(12, \"Nome do Produto\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(13, \"input\", 7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"div\", 8)(15, \"div\", 5)(16, \"label\", 9);\n          i0.ɵɵtext(17, \"Pre\\u00E7o de Custo (R$)\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(18, \"input\", 10);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(19, \"div\", 5)(20, \"label\", 11);\n          i0.ɵɵtext(21, \"Pre\\u00E7o de Venda (R$)\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(22, \"input\", 12);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(23, \"div\", 5)(24, \"label\", 13);\n          i0.ɵɵtext(25, \"Estoque (Unid.)\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(26, \"input\", 14);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(27, \"div\", 5)(28, \"label\", 15);\n          i0.ɵɵtext(29, \"Descri\\u00E7\\u00E3o (Opcional)\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(30, \"textarea\", 16);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(31, \"footer\", 17);\n          i0.ɵɵtemplate(32, ProdutoFormComponent_div_32_Template, 2, 1, \"div\", 18);\n          i0.ɵɵelementStart(33, \"button\", 19);\n          i0.ɵɵlistener(\"click\", function ProdutoFormComponent_Template_button_click_33_listener() {\n            return ctx.goBack();\n          });\n          i0.ɵɵtext(34, \"Cancelar\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(35, \"button\", 20);\n          i0.ɵɵtext(36);\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate(ctx.isEditMode ? \"Editar Produto\" : \"Novo Produto\");\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"formGroup\", ctx.produtoForm);\n          i0.ɵɵadvance(26);\n          i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"disabled\", ctx.isLoading || ctx.produtoForm.invalid);\n          i0.ɵɵadvance(1);\n          i0.ɵɵtextInterpolate1(\" \", ctx.isLoading ? \"Salvando...\" : ctx.isEditMode ? \"Salvar Altera\\u00E7\\u00F5es\" : \"Cadastrar Produto\", \" \");\n        }\n      },\n      dependencies: [i4.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.MinValidator, i1.FormGroupDirective, i1.FormControlName],\n      styles: [\".form-container[_ngcontent-%COMP%] {\\n  max-width: 900px;\\n  margin: 0 auto;\\n}\\n\\n.form-header[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  gap: 1.5rem;\\n  margin-bottom: 1.5rem;\\n}\\n\\n.btn-back[_ngcontent-%COMP%] {\\n  background: none;\\n  border: none;\\n  color: var(--color-primary);\\n  font-weight: 500;\\n}\\n.btn-back[_ngcontent-%COMP%]:hover {\\n  text-decoration: underline;\\n}\\n\\n.form-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%] {\\n  font-size: 2rem;\\n  font-weight: 600;\\n}\\n\\n.card[_ngcontent-%COMP%] {\\n  background-color: var(--color-white);\\n  border-radius: 8px;\\n  box-shadow: var(--shadow-sm);\\n  padding: 2rem;\\n}\\n\\n.form-section[_ngcontent-%COMP%] {\\n  border: none;\\n  padding: 0;\\n  margin-bottom: 2rem;\\n}\\n.form-section[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%] {\\n  font-size: 1.2rem;\\n  font-weight: 600;\\n  margin-bottom: 1rem;\\n  padding-bottom: 0.5rem;\\n  border-bottom: 1px solid var(--color-border);\\n  width: 100%;\\n}\\n\\n.form-row[_ngcontent-%COMP%] {\\n  display: grid;\\n  grid-template-columns: 1fr 1fr;\\n  gap: 1.5rem;\\n}\\n\\n.form-actions[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: flex-end;\\n  align-items: center;\\n  gap: 1rem;\\n  border-top: 1px solid var(--color-border);\\n  padding-top: 1.5rem;\\n  margin-top: 1.5rem;\\n}\\n\\n.error-message[_ngcontent-%COMP%] {\\n  color: var(--color-danger);\\n  margin-right: auto;\\n}\\n\\n.btn-secondary[_ngcontent-%COMP%] {\\n  background-color: var(--color-light);\\n  color: var(--color-dark);\\n  border: 1px solid var(--color-border);\\n}\\n\\n\\n\\n.pet-section[_ngcontent-%COMP%] {\\n  margin-top: 2rem;\\n}\\n.pet-section[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%] {\\n  margin-bottom: 1.5rem;\\n  padding-bottom: 1rem;\\n  border-bottom: 1px solid var(--color-border);\\n}\\n.pet-section[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\n  font-size: 1.5rem;\\n}\\n.no-data[_ngcontent-%COMP%] {\\n  text-align: center;\\n  padding: 1rem;\\n}\\n\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmVhdHVyZXMvYWRtaW4vcGFnZXMvY2xpZW50ZXMvY2xpZW50ZS1mb3JtL2NsaWVudGUtZm9ybS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsZ0JBQWdCO0VBQ2hCLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLFdBQVc7RUFDWCxxQkFBcUI7QUFDdkI7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsWUFBWTtFQUNaLDJCQUEyQjtFQUMzQixnQkFBZ0I7QUFDbEI7QUFDQTtFQUNFLDBCQUEwQjtBQUM1Qjs7QUFFQTtFQUNFLGVBQWU7RUFDZixnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxvQ0FBb0M7RUFDcEMsa0JBQWtCO0VBQ2xCLDRCQUE0QjtFQUM1QixhQUFhO0FBQ2Y7O0FBRUE7RUFDRSxZQUFZO0VBQ1osVUFBVTtFQUNWLG1CQUFtQjtBQUNyQjtBQUNBO0VBQ0UsaUJBQWlCO0VBQ2pCLGdCQUFnQjtFQUNoQixtQkFBbUI7RUFDbkIsc0JBQXNCO0VBQ3RCLDRDQUE0QztFQUM1QyxXQUFXO0FBQ2I7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsOEJBQThCO0VBQzlCLFdBQVc7QUFDYjs7QUFFQTtFQUNFLGFBQWE7RUFDYix5QkFBeUI7RUFDekIsbUJBQW1CO0VBQ25CLFNBQVM7RUFDVCx5Q0FBeUM7RUFDekMsbUJBQW1CO0VBQ25CLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLDBCQUEwQjtFQUMxQixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxvQ0FBb0M7RUFDcEMsd0JBQXdCO0VBQ3hCLHFDQUFxQztBQUN2Qzs7QUFFQSxrQkFBa0I7QUFDbEI7RUFDRSxnQkFBZ0I7QUFDbEI7QUFDQTtFQUNFLHFCQUFxQjtFQUNyQixvQkFBb0I7RUFDcEIsNENBQTRDO0FBQzlDO0FBQ0E7RUFDRSxpQkFBaUI7QUFDbkI7QUFDQTtFQUNFLGtCQUFrQjtFQUNsQixhQUFhO0FBQ2Y7QUFDQSwwREFBMEQiLCJzb3VyY2VzQ29udGVudCI6WyIuZm9ybS1jb250YWluZXIge1xyXG4gIG1heC13aWR0aDogOTAwcHg7XHJcbiAgbWFyZ2luOiAwIGF1dG87XHJcbn1cclxuXHJcbi5mb3JtLWhlYWRlciB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIGdhcDogMS41cmVtO1xyXG4gIG1hcmdpbi1ib3R0b206IDEuNXJlbTtcclxufVxyXG5cclxuLmJ0bi1iYWNrIHtcclxuICBiYWNrZ3JvdW5kOiBub25lO1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBjb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeSk7XHJcbiAgZm9udC13ZWlnaHQ6IDUwMDtcclxufVxyXG4uYnRuLWJhY2s6aG92ZXIge1xyXG4gIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xyXG59XHJcblxyXG4uZm9ybS1oZWFkZXIgaDEge1xyXG4gIGZvbnQtc2l6ZTogMnJlbTtcclxuICBmb250LXdlaWdodDogNjAwO1xyXG59XHJcblxyXG4uY2FyZCB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3Itd2hpdGUpO1xyXG4gIGJvcmRlci1yYWRpdXM6IDhweDtcclxuICBib3gtc2hhZG93OiB2YXIoLS1zaGFkb3ctc20pO1xyXG4gIHBhZGRpbmc6IDJyZW07XHJcbn1cclxuXHJcbi5mb3JtLXNlY3Rpb24ge1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBwYWRkaW5nOiAwO1xyXG4gIG1hcmdpbi1ib3R0b206IDJyZW07XHJcbn1cclxuLmZvcm0tc2VjdGlvbiBsZWdlbmQge1xyXG4gIGZvbnQtc2l6ZTogMS4ycmVtO1xyXG4gIGZvbnQtd2VpZ2h0OiA2MDA7XHJcbiAgbWFyZ2luLWJvdHRvbTogMXJlbTtcclxuICBwYWRkaW5nLWJvdHRvbTogMC41cmVtO1xyXG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1jb2xvci1ib3JkZXIpO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG59XHJcblxyXG4uZm9ybS1yb3cge1xyXG4gIGRpc3BsYXk6IGdyaWQ7XHJcbiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyO1xyXG4gIGdhcDogMS41cmVtO1xyXG59XHJcblxyXG4uZm9ybS1hY3Rpb25zIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBnYXA6IDFyZW07XHJcbiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWNvbG9yLWJvcmRlcik7XHJcbiAgcGFkZGluZy10b3A6IDEuNXJlbTtcclxuICBtYXJnaW4tdG9wOiAxLjVyZW07XHJcbn1cclxuXHJcbi5lcnJvci1tZXNzYWdlIHtcclxuICBjb2xvcjogdmFyKC0tY29sb3ItZGFuZ2VyKTtcclxuICBtYXJnaW4tcmlnaHQ6IGF1dG87XHJcbn1cclxuXHJcbi5idG4tc2Vjb25kYXJ5IHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1saWdodCk7XHJcbiAgY29sb3I6IHZhcigtLWNvbG9yLWRhcmspO1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWNvbG9yLWJvcmRlcik7XHJcbn1cclxuXHJcbi8qIFNlw4PCp8ODwqNvIGRlIFBldHMgKi9cclxuLnBldC1zZWN0aW9uIHtcclxuICBtYXJnaW4tdG9wOiAycmVtO1xyXG59XHJcbi5wZXQtc2VjdGlvbiAucGFnZS1oZWFkZXIge1xyXG4gIG1hcmdpbi1ib3R0b206IDEuNXJlbTtcclxuICBwYWRkaW5nLWJvdHRvbTogMXJlbTtcclxuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tY29sb3ItYm9yZGVyKTtcclxufVxyXG4ucGV0LXNlY3Rpb24gLnBhZ2UtaGVhZGVyIGgyIHtcclxuICBmb250LXNpemU6IDEuNXJlbTtcclxufVxyXG4ubm8tZGF0YSB7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIHBhZGRpbmc6IDFyZW07XHJcbn1cclxuLyogKFJldXRpbGl6YSBlc3RpbG9zIGRhIGRhdGEtdGFibGUgZGEgY2xpZW50ZS1saXN0LmNzcykgKi8iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"names":["Validators","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r0","errorMessage","ProdutoFormComponent","constructor","fb","produtoService","router","route","isEditMode","isLoading","produtoId","produtoForm","group","nome","required","descricao","precoCusto","min","precoVenda","qtdEstoque","ngOnInit","idParam","snapshot","paramMap","get","loadProdutoData","getProdutoById","subscribe","next","produto","patchValue","error","err","navigate","onSubmit","invalid","produtoData","value","saveOperation","updateProduto","createProduto","erro","goBack","ɵɵdirectiveInject","i1","FormBuilder","i2","ProdutoService","i3","Router","ActivatedRoute","selectors","decls","vars","consts","template","ProdutoFormComponent_Template","rf","ctx","ɵɵlistener","ProdutoFormComponent_Template_button_click_2_listener","ProdutoFormComponent_Template_form_ngSubmit_6_listener","ɵɵelement","ɵɵtemplate","ProdutoFormComponent_div_32_Template","ProdutoFormComponent_Template_button_click_33_listener","ɵɵtextInterpolate","ɵɵproperty"],"sources":["C:\\TCC\\petflow\\petflow-web\\src\\app\\features\\admin\\pages\\produtos\\produto-form\\produto-form.component.ts","C:\\TCC\\petflow\\petflow-web\\src\\app\\features\\admin\\pages\\produtos\\produto-form\\produto-form.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ProdutoService } from '../../../services/produto.service';\r\n\r\n@Component({\r\nselector: 'app-produto-form',\r\ntemplateUrl: './produto-form.component.html',\r\n// Reutilizando o CSS do formulário de cliente\r\nstyleUrls: ['../../clientes/cliente-form/cliente-form.component.css']\r\n})\r\nexport class ProdutoFormComponent implements OnInit {\r\n\r\nprodutoForm: FormGroup;\r\nisEditMode = false;\r\nisLoading = false;\r\nerrorMessage: string | null = null;\r\nprivate produtoId: number | null = null;\r\n\r\nconstructor(\r\n    private fb: FormBuilder,\r\n    private produtoService: ProdutoService,\r\n    private router: Router,\r\n    private route: ActivatedRoute\r\n  ) {\r\n    // UC04 - Formulário com campos pertinentes [cite: 70, 222-251]\r\n    this.produtoForm = this.fb.group({\r\n      nome: ['', Validators.required],\r\n      descricao: [''],\r\n      precoCusto: [null, [Validators.required, Validators.min(0)]],\r\n      precoVenda: [null, [Validators.required, Validators.min(0.01)]],\r\n      qtdEstoque: [null, [Validators.required, Validators.min(0)]]\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    const idParam = this.route.snapshot.paramMap.get('id');\r\n    if (idParam) {\r\n      // MODO EDIÇÃO\r\n      this.isEditMode = true;\r\n      this.produtoId = +idParam;\r\n      this.loadProdutoData();\r\n    }\r\n  }\r\n\r\n  loadProdutoData(): void {\r\n    if (!this.produtoId) return;\r\n\r\n    this.isLoading = true;\r\n    this.produtoService.getProdutoById(this.produtoId).subscribe({\r\n      next: (produto) => {\r\n        this.isLoading = false;\r\n        this.produtoForm.patchValue(produto);\r\n      },\r\n      error: (err) => {\r\n        this.isLoading = false;\r\n        this.errorMessage = \"Produto não encontrado.\";\r\n        this.router.navigate(['/admin/produtos']);\r\n      }\r\n    });\r\n  }\r\n\r\n  onSubmit(): void {\r\n    if (this.produtoForm.invalid) {\r\n      this.errorMessage = \"Por favor, corrija os erros no formulário.\";\r\n      return;\r\n    }\r\n\r\n    this.isLoading = true;\r\n    this.errorMessage = null;\r\n\r\n    const produtoData = this.produtoForm.value;\r\n\r\n    const saveOperation = this.isEditMode\r\n      ? this.produtoService.updateProduto(this.produtoId!, produtoData)\r\n      : this.produtoService.createProduto(produtoData);\r\n\r\n    saveOperation.subscribe({\r\n      next: () => {\r\n        this.isLoading = false;\r\n        this.router.navigate(['/admin/produtos']);\r\n      },\r\n      error: (err) => {\r\n        this.isLoading = false;\r\n        // Validação de nome duplicado\r\n        this.errorMessage = err.error?.erro || \"Erro ao salvar produto.\";\r\n      }\r\n    });\r\n  }\r\n\r\n  goBack(): void {\r\n    this.router.navigate(['/admin/produtos']);\r\n  }\r\n}","<div class=\"form-container\">\r\n\r\n    <header class=\"form-header\">\r\n        <button (click)=\"goBack()\" class=\"btn-back\">\r\n            &larr; Voltar para a Lista\r\n        </button>\r\n        <h1>{{ isEditMode ? 'Editar Produto' : 'Novo Produto' }}</h1>\r\n    </header>\r\n\r\n    <form [formGroup]=\"produtoForm\" (ngSubmit)=\"onSubmit()\" class=\"card\">\r\n        <fieldset class=\"form-section\">\r\n            <legend>Dados do Produto</legend>\r\n\r\n            <div class=\"form-group\">\r\n                <label for=\"nome\" class=\"form-label\">Nome do Produto</label>\r\n                <input id=\"nome\" type=\"text\" class=\"form-control\" formControlName=\"nome\">\r\n            </div>\r\n\r\n            <div class=\"form-row\">\r\n                <div class=\"form-group\">\r\n                    <label for=\"precoCusto\" class=\"form-label\">Preço de Custo (R$)</label>\r\n                    <input id=\"precoCusto\" type=\"number\" class=\"form-control\" formControlName=\"precoCusto\"\r\n                           min=\"0\" step=\"0.01\" placeholder=\"ex: 20.00\">\r\n                </div>\r\n\r\n                <div class=\"form-group\">\r\n                    <label for=\"precoVenda\" class=\"form-label\">Preço de Venda (R$)</label>\r\n                    <input id=\"precoVenda\" type=\"number\" class=\"form-control\" formControlName=\"precoVenda\"\r\n                           min=\"0.01\" step=\"0.01\" placeholder=\"ex: 35.00\">\r\n                </div>\r\n\r\n                <div class=\"form-group\">\r\n                    <label for=\"qtdEstoque\" class=\"form-label\">Estoque (Unid.)</label>\r\n                    <input id=\"qtdEstoque\" type=\"number\" class=\"form-control\" formControlName=\"qtdEstoque\"\r\n                           min=\"0\" step=\"1\" placeholder=\"ex: 100\">\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"form-group\">\r\n                <label for=\"descricao\" class=\"form-label\">Descrição (Opcional)</label>\r\n                <textarea id=\"descricao\" class=\"form-control\" formControlName=\"descricao\" rows=\"4\"></textarea>\r\n            </div>\r\n\r\n        </fieldset>\r\n\r\n        <footer class=\"form-actions\">\r\n            <div *ngIf=\"errorMessage\" class=\"error-message\">\r\n                {{ errorMessage }}\r\n            </div>\r\n            <button type=\"button\" class=\"btn-secondary\" (click)=\"goBack()\">Cancelar</button>\r\n            <button type=\"submit\" class=\"btn-primary\" [disabled]=\"isLoading || produtoForm.invalid\">\r\n                {{ isLoading ? 'Salvando...' : (isEditMode ? 'Salvar Alterações' : 'Cadastrar Produto') }}\r\n            </button>\r\n        </footer>\r\n    </form>\r\n\r\n</div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}