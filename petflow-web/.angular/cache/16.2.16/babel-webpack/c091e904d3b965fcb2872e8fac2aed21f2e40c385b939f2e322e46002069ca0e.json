{"ast":null,"code":"// Imports do Calendário\nimport {\n// <-- Importe este\nCalendarView } from 'angular-calendar';\nimport { endOfMonth, startOfMonth, endOfWeek, startOfWeek } from 'date-fns';\nimport { Subject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../admin/services/agendamento.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"angular-calendar\";\nfunction AgendaComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1, \" Carregando agendamentos... \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AgendaComponent_mwl_calendar_month_view_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mwl-calendar-month-view\", 13);\n    i0.ɵɵlistener(\"dayClicked\", function AgendaComponent_mwl_calendar_month_view_24_Template_mwl_calendar_month_view_dayClicked_0_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      ctx_r4.setView(ctx_r4.CalendarView.Day);\n      return i0.ɵɵresetView(ctx_r4.viewDate = $event.day.date);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"viewDate\", ctx_r1.viewDate)(\"events\", ctx_r1.events)(\"refresh\", ctx_r1.refresh)(\"locale\", ctx_r1.locale);\n  }\n}\nfunction AgendaComponent_mwl_calendar_week_view_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mwl-calendar-week-view\", 14);\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"viewDate\", ctx_r2.viewDate)(\"events\", ctx_r2.events)(\"refresh\", ctx_r2.refresh)(\"locale\", ctx_r2.locale);\n  }\n}\nfunction AgendaComponent_mwl_calendar_day_view_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mwl-calendar-day-view\", 14);\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"viewDate\", ctx_r3.viewDate)(\"events\", ctx_r3.events)(\"refresh\", ctx_r3.refresh)(\"locale\", ctx_r3.locale);\n  }\n}\n// === FIM SPRINT 04 ===\n// Cores para os status (Exemplo)\nconst colors = {\n  AGENDADO: {\n    primary: '#007bff',\n    secondary: '#D1E7FD'\n  },\n  CONCLUIDO: {\n    primary: '#198754',\n    secondary: '#D1FAD0'\n  },\n  CANCELADO: {\n    primary: '#6c757d',\n    secondary: '#E2E3E5'\n  }\n};\nexport class AgendaComponent {\n  // === FIM SPRINT 04 ===\n  constructor(agendamentoService) {\n    this.agendamentoService = agendamentoService;\n    // --- Configuração do Calendário ---\n    this.view = CalendarView.Month;\n    this.CalendarView = CalendarView;\n    this.viewDate = new Date();\n    this.locale = 'pt';\n    this.events = [];\n    this.isLoading = true;\n    this.refresh = new Subject();\n    // === INÍCIO SPRINT 04 ===\n    this.errorMessage = null;\n  }\n  ngOnInit() {\n    this.loadAgendamentos();\n  }\n  /**\n   * Carrega os agendamentos do back-end\n   * UC05 - Visão do Administrador (calendário)\n   */\n  loadAgendamentos() {\n    this.isLoading = true;\n    this.errorMessage = null; // Limpa erros anteriores\n    const inicio = startOfWeek(startOfMonth(this.viewDate));\n    const fim = endOfWeek(endOfMonth(this.viewDate));\n    this.agendamentoService.getAgendamentos(inicio.toISOString(), fim.toISOString()).subscribe({\n      next: data => {\n        // Converte a resposta da API para o formato do Calendário\n        this.events = data.map(ag => {\n          // === INÍCIO SPRINT 04 (Adicionar Ações) ===\n          const actions = [];\n          // Só adiciona a ação \"Concluir\" se o status for AGENDADO\n          if (ag.status === 'AGENDADO') {\n            actions.push({\n              label: 'Concluir',\n              cssClass: 'concluir-action',\n              onClick: ({\n                event\n              }) => {\n                this.concluirAgendamento(event); // Chama nosso novo método\n              }\n            });\n          }\n          // === FIM SPRINT 04 ===\n          return {\n            id: ag.id,\n            start: new Date(ag.dataHora),\n            title: `(${ag.status.substring(0, 3)}) ${ag.pet.nome} - ${ag.servicos.map(s => s.nome).join(', ')}`,\n            color: colors[ag.status] || colors.CANCELADO,\n            allDay: false,\n            actions: actions,\n            meta: {\n              agendamento: ag // <-- Guarda o objeto original\n            }\n          };\n        });\n        this.isLoading = false;\n        this.refresh.next();\n      },\n      error: err => {\n        console.error('Erro ao carregar agendamentos', err);\n        this.errorMessage = 'Falha ao carregar agendamentos. Tente novamente.';\n        this.isLoading = false;\n      }\n    });\n  }\n  // === INÍCIO SPRINT 04 (Método para Concluir) ===\n  /**\n   * UC05 - Chamado quando o admin clica na ação \"Concluir\"\n   */\n  concluirAgendamento(event) {\n    const id = event.id;\n    if (!confirm(`Deseja realmente concluir este agendamento?\\n\\n\"${event.title}\"\\n\\nEsta ação dará baixa no estoque.`)) {\n      return;\n    }\n    this.errorMessage = null; // Limpa erros\n    this.agendamentoService.concluirAgendamento(id).subscribe({\n      next: agendamentoAtualizado => {\n        // Sucesso! Atualiza o evento na tela\n        // 1. Atualiza o objeto 'meta' com os dados mais recentes\n        event.meta.agendamento = agendamentoAtualizado;\n        // 2. Atualiza as propriedades visuais do evento\n        event.title = `(CON) ${agendamentoAtualizado.pet.nome} - ${agendamentoAtualizado.servicos.map(s => s.nome).join(', ')}`;\n        event.color = colors.CONCLUIDO;\n        event.actions = []; // Remove a ação \"Concluir\"\n        // 3. Notifica o calendário para redesenhar\n        this.refresh.next();\n      },\n      error: err => {\n        console.error('Erro ao concluir agendamento', err);\n        this.errorMessage = `Erro ao concluir: ${err.error?.message || 'Tente novamente.'}`;\n      }\n    });\n  }\n  // === FIM SPRINT 04 ===\n  /**\n   * Chamado quando o usuário troca de mês ou dia.\n   */\n  onViewDateChange() {\n    this.loadAgendamentos();\n  }\n  /**\n   * Chamado quando o usuário troca a visão (Mês, Semana, Dia).\n   */\n  setView(view) {\n    this.view = view;\n  }\n  static {\n    this.ɵfac = function AgendaComponent_Factory(t) {\n      return new (t || AgendaComponent)(i0.ɵɵdirectiveInject(i1.AgendamentoService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AgendaComponent,\n      selectors: [[\"app-agenda\"]],\n      decls: 27,\n      vars: 21,\n      consts: [[1, \"list-container\"], [1, \"page-header\"], [1, \"calendar-header\"], [1, \"btn-group\"], [1, \"btn-secondary\", 3, \"click\"], [\"mwlCalendarPreviousView\", \"\", 1, \"btn-secondary\", 3, \"view\", \"viewDate\", \"viewDateChange\"], [\"mwlCalendarToday\", \"\", 1, \"btn-secondary\", 3, \"viewDate\", \"viewDateChange\"], [\"mwlCalendarNextView\", \"\", 1, \"btn-secondary\", 3, \"view\", \"viewDate\", \"viewDateChange\"], [\"class\", \"loading-indicator\", 4, \"ngIf\"], [1, \"calendar-container\", \"card\", 3, \"ngSwitch\"], [3, \"viewDate\", \"events\", \"refresh\", \"locale\", \"dayClicked\", 4, \"ngSwitchCase\"], [3, \"viewDate\", \"events\", \"refresh\", \"locale\", 4, \"ngSwitchCase\"], [1, \"loading-indicator\"], [3, \"viewDate\", \"events\", \"refresh\", \"locale\", \"dayClicked\"], [3, \"viewDate\", \"events\", \"refresh\", \"locale\"]],\n      template: function AgendaComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"header\", 1)(2, \"h1\");\n          i0.ɵɵtext(3, \"Agenda de Agendamentos\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(4, \"div\", 2)(5, \"div\", 3)(6, \"button\", 4);\n          i0.ɵɵlistener(\"click\", function AgendaComponent_Template_button_click_6_listener() {\n            return ctx.setView(ctx.CalendarView.Month);\n          });\n          i0.ɵɵtext(7, \" M\\u00EAs \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(8, \"button\", 4);\n          i0.ɵɵlistener(\"click\", function AgendaComponent_Template_button_click_8_listener() {\n            return ctx.setView(ctx.CalendarView.Week);\n          });\n          i0.ɵɵtext(9, \" Semana \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"button\", 4);\n          i0.ɵɵlistener(\"click\", function AgendaComponent_Template_button_click_10_listener() {\n            return ctx.setView(ctx.CalendarView.Day);\n          });\n          i0.ɵɵtext(11, \" Dia \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(12, \"div\", 3)(13, \"button\", 5);\n          i0.ɵɵlistener(\"viewDateChange\", function AgendaComponent_Template_button_viewDateChange_13_listener($event) {\n            return ctx.viewDate = $event;\n          })(\"viewDateChange\", function AgendaComponent_Template_button_viewDateChange_13_listener() {\n            return ctx.onViewDateChange();\n          });\n          i0.ɵɵtext(14, \" Anterior \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"button\", 6);\n          i0.ɵɵlistener(\"viewDateChange\", function AgendaComponent_Template_button_viewDateChange_15_listener($event) {\n            return ctx.viewDate = $event;\n          })(\"viewDateChange\", function AgendaComponent_Template_button_viewDateChange_15_listener() {\n            return ctx.onViewDateChange();\n          });\n          i0.ɵɵtext(16, \" Hoje \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(17, \"button\", 7);\n          i0.ɵɵlistener(\"viewDateChange\", function AgendaComponent_Template_button_viewDateChange_17_listener($event) {\n            return ctx.viewDate = $event;\n          })(\"viewDateChange\", function AgendaComponent_Template_button_viewDateChange_17_listener() {\n            return ctx.onViewDateChange();\n          });\n          i0.ɵɵtext(18, \" Pr\\u00F3ximo \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(19, \"h3\");\n          i0.ɵɵtext(20);\n          i0.ɵɵpipe(21, \"calendarDate\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(22, AgendaComponent_div_22_Template, 2, 0, \"div\", 8);\n          i0.ɵɵelementStart(23, \"div\", 9);\n          i0.ɵɵtemplate(24, AgendaComponent_mwl_calendar_month_view_24_Template, 1, 4, \"mwl-calendar-month-view\", 10);\n          i0.ɵɵtemplate(25, AgendaComponent_mwl_calendar_week_view_25_Template, 1, 4, \"mwl-calendar-week-view\", 11);\n          i0.ɵɵtemplate(26, AgendaComponent_mwl_calendar_day_view_26_Template, 1, 4, \"mwl-calendar-day-view\", 11);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(6);\n          i0.ɵɵclassProp(\"active\", ctx.view === ctx.CalendarView.Month);\n          i0.ɵɵadvance(2);\n          i0.ɵɵclassProp(\"active\", ctx.view === ctx.CalendarView.Week);\n          i0.ɵɵadvance(2);\n          i0.ɵɵclassProp(\"active\", ctx.view === ctx.CalendarView.Day);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"view\", ctx.view)(\"viewDate\", ctx.viewDate);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"viewDate\", ctx.viewDate);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"view\", ctx.view)(\"viewDate\", ctx.viewDate);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(21, 17, ctx.viewDate, ctx.view + \"ViewTitle\", ctx.locale));\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngSwitch\", ctx.view);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngSwitchCase\", ctx.CalendarView.Month);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngSwitchCase\", ctx.CalendarView.Week);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngSwitchCase\", ctx.CalendarView.Day);\n        }\n      },\n      dependencies: [i2.NgIf, i2.NgSwitch, i2.NgSwitchCase, i3.ɵCalendarPreviousViewDirective, i3.ɵCalendarNextViewDirective, i3.ɵCalendarTodayDirective, i3.CalendarMonthViewComponent, i3.CalendarWeekViewComponent, i3.CalendarDayViewComponent, i3.ɵCalendarDatePipe],\n      styles: [\"\\n\\n\\n.calendar-header[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  margin-bottom: 1.5rem;\\n  padding: 1rem;\\n  background-color: var(--color-white);\\n  border-radius: 8px;\\n  box-shadow: var(--shadow-sm);\\n}\\n\\n.calendar-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\\n  font-size: 1.5rem;\\n  font-weight: 500;\\n  margin: 0;\\n}\\n\\n.btn-group[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 0.25rem;\\n}\\n\\n.btn-group[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%] {\\n  background-color: var(--color-light);\\n  color: var(--color-dark);\\n  border: 1px solid var(--color-border);\\n  padding: 8px 12px;\\n}\\n\\n.btn-group[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover {\\n  background-color: #e2e6ea;\\n}\\n\\n.btn-group[_ngcontent-%COMP%]   .btn-secondary.active[_ngcontent-%COMP%] {\\n  background-color: var(--color-primary);\\n  color: var(--color-white);\\n  border-color: var(--color-primary-dark);\\n}\\n\\n.calendar-container.card[_ngcontent-%COMP%] {\\n  background-color: var(--color-white);\\n  border-radius: 8px;\\n  box-shadow: var(--shadow-sm);\\n  padding: 1rem;\\n}\\n\\n\\n\\nmwl-calendar-week-view[_ngcontent-%COMP%], mwl-calendar-day-view[_ngcontent-%COMP%] {\\n  display: block;\\n  height: 600px; \\n\\n}\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n[_nghost-%COMP%]     .concluir-action {\\n  cursor: pointer;\\n  \\n\\n  color: #198754;\\n  font-weight: bold;\\n  margin-left: 8px;\\n  padding: 4px 8px;\\n  border-radius: 4px;\\n  background-color: #d1fad0;\\n  border: 1px solid #198754;\\n  transition: all 0.2s ease-in-out;\\n}\\n\\n[_nghost-%COMP%]     .concluir-action:hover {\\n  background-color: #198754;\\n  color: #fff;\\n}\\n\\n\\n\\n.error-message[_ngcontent-%COMP%] {\\n  \\n\\n  background-color: #f8d7da;\\n  color: #721c24;\\n  border: 1px solid #f5c6cb;\\n  padding: 12px 20px;\\n  border-radius: 8px;\\n  margin: 16px 0;\\n  text-align: center;\\n}\\n\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmVhdHVyZXMvYWRtaW4vcGFnZXMvYWdlbmRhL2FnZW5kYS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHNEQUFzRDs7QUFFdEQ7RUFDRSxhQUFhO0VBQ2IsOEJBQThCO0VBQzlCLG1CQUFtQjtFQUNuQixxQkFBcUI7RUFDckIsYUFBYTtFQUNiLG9DQUFvQztFQUNwQyxrQkFBa0I7RUFDbEIsNEJBQTRCO0FBQzlCOztBQUVBO0VBQ0UsaUJBQWlCO0VBQ2pCLGdCQUFnQjtFQUNoQixTQUFTO0FBQ1g7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsWUFBWTtBQUNkOztBQUVBO0VBQ0Usb0NBQW9DO0VBQ3BDLHdCQUF3QjtFQUN4QixxQ0FBcUM7RUFDckMsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UseUJBQXlCO0FBQzNCOztBQUVBO0VBQ0Usc0NBQXNDO0VBQ3RDLHlCQUF5QjtFQUN6Qix1Q0FBdUM7QUFDekM7O0FBRUE7RUFDRSxvQ0FBb0M7RUFDcEMsa0JBQWtCO0VBQ2xCLDRCQUE0QjtFQUM1QixhQUFhO0FBQ2Y7O0FBRUEseUNBQXlDO0FBQ3pDOztFQUVFLGNBQWM7RUFDZCxhQUFhLEVBQUUsd0NBQXdDO0FBQ3pEOztBQUVBLDhDQUE4Qzs7QUFFOUM7Ozs7Q0FJQztBQUNEO0VBQ0UsZUFBZTtFQUNmLHlDQUF5QztFQUN6QyxjQUFjO0VBQ2QsaUJBQWlCO0VBQ2pCLGdCQUFnQjtFQUNoQixnQkFBZ0I7RUFDaEIsa0JBQWtCO0VBQ2xCLHlCQUF5QjtFQUN6Qix5QkFBeUI7RUFDekIsZ0NBQWdDO0FBQ2xDOztBQUVBO0VBQ0UseUJBQXlCO0VBQ3pCLFdBQVc7QUFDYjs7QUFFQSxtQ0FBbUM7QUFDbkM7RUFDRSxrQ0FBa0M7RUFDbEMseUJBQXlCO0VBQ3pCLGNBQWM7RUFDZCx5QkFBeUI7RUFDekIsa0JBQWtCO0VBQ2xCLGtCQUFrQjtFQUNsQixjQUFjO0VBQ2Qsa0JBQWtCO0FBQ3BCO0FBQ0EsMEJBQTBCIiwic291cmNlc0NvbnRlbnQiOlsiLyogKE11aXRvcyBlc3RpbG9zIHPDg8KjbyBoZXJkYWRvcyBkbyBjbGllbnRlLWxpc3QuY3NzKSAqL1xyXG5cclxuLmNhbGVuZGFyLWhlYWRlciB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBtYXJnaW4tYm90dG9tOiAxLjVyZW07XHJcbiAgcGFkZGluZzogMXJlbTtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci13aGl0ZSk7XHJcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xyXG4gIGJveC1zaGFkb3c6IHZhcigtLXNoYWRvdy1zbSk7XHJcbn1cclxuXHJcbi5jYWxlbmRhci1oZWFkZXIgaDMge1xyXG4gIGZvbnQtc2l6ZTogMS41cmVtO1xyXG4gIGZvbnQtd2VpZ2h0OiA1MDA7XHJcbiAgbWFyZ2luOiAwO1xyXG59XHJcblxyXG4uYnRuLWdyb3VwIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGdhcDogMC4yNXJlbTtcclxufVxyXG5cclxuLmJ0bi1ncm91cCAuYnRuLXNlY29uZGFyeSB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItbGlnaHQpO1xyXG4gIGNvbG9yOiB2YXIoLS1jb2xvci1kYXJrKTtcclxuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1jb2xvci1ib3JkZXIpO1xyXG4gIHBhZGRpbmc6IDhweCAxMnB4O1xyXG59XHJcblxyXG4uYnRuLWdyb3VwIC5idG4tc2Vjb25kYXJ5OmhvdmVyIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTJlNmVhO1xyXG59XHJcblxyXG4uYnRuLWdyb3VwIC5idG4tc2Vjb25kYXJ5LmFjdGl2ZSB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeSk7XHJcbiAgY29sb3I6IHZhcigtLWNvbG9yLXdoaXRlKTtcclxuICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnktZGFyayk7XHJcbn1cclxuXHJcbi5jYWxlbmRhci1jb250YWluZXIuY2FyZCB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3Itd2hpdGUpO1xyXG4gIGJvcmRlci1yYWRpdXM6IDhweDtcclxuICBib3gtc2hhZG93OiB2YXIoLS1zaGFkb3ctc20pO1xyXG4gIHBhZGRpbmc6IDFyZW07XHJcbn1cclxuXHJcbi8qIEZvcsODwqdhIGEgYWx0dXJhIGRhIHZpZXcgZGEgc2VtYW5hL2RpYSAqL1xyXG5td2wtY2FsZW5kYXItd2Vlay12aWV3LFxyXG5td2wtY2FsZW5kYXItZGF5LXZpZXcge1xyXG4gIGRpc3BsYXk6IGJsb2NrO1xyXG4gIGhlaWdodDogNjAwcHg7IC8qIEFsdHVyYSBmaXhhIHBhcmEgbyBzY3JvbGwgZnVuY2lvbmFyICovXHJcbn1cclxuXHJcbi8qID09PSBJTsODwo1DSU8gU1BSSU5UIDA0IChVQzA1IC0gRXN0aWxvcykgPT09ICovXHJcblxyXG4vKlxyXG4gIEVzdGlsbyBwYXJhIGEgYcODwqfDg8KjbyBcIkNvbmNsdWlyXCJcclxuICBVc2Ftb3MgOmhvc3QgOjpuZy1kZWVwIHBhcmEgXCJwZXJmdXJhclwiIGEgZW5jYXBzdWxhw4PCp8ODwqNvXHJcbiAgZGEgYmlibGlvdGVjYSBhbmd1bGFyLWNhbGVuZGFyIGUgZXN0aWxpemFyIG8gYm90w4PCo28uXHJcbiovXHJcbjpob3N0IDo6bmctZGVlcCAuY29uY2x1aXItYWN0aW9uIHtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgLyogQ29yIHZlcmRlIChwYWRyw4PCo28gYm9vdHN0cmFwIHN1Y2Nlc3MpICovXHJcbiAgY29sb3I6ICMxOTg3NTQ7XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgbWFyZ2luLWxlZnQ6IDhweDtcclxuICBwYWRkaW5nOiA0cHggOHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZDFmYWQwO1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkICMxOTg3NTQ7XHJcbiAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZS1pbi1vdXQ7XHJcbn1cclxuXHJcbjpob3N0IDo6bmctZGVlcCAuY29uY2x1aXItYWN0aW9uOmhvdmVyIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMTk4NzU0O1xyXG4gIGNvbG9yOiAjZmZmO1xyXG59XHJcblxyXG4vKiBFc3RpbG8gcGFyYSBhIG1lbnNhZ2VtIGRlIGVycm8gKi9cclxuLmVycm9yLW1lc3NhZ2Uge1xyXG4gIC8qIENvcmVzIHBhZHLDg8KjbyBib290c3RyYXAgZGFuZ2VyICovXHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZDdkYTtcclxuICBjb2xvcjogIzcyMWMyNDtcclxuICBib3JkZXI6IDFweCBzb2xpZCAjZjVjNmNiO1xyXG4gIHBhZGRpbmc6IDEycHggMjBweDtcclxuICBib3JkZXItcmFkaXVzOiA4cHg7XHJcbiAgbWFyZ2luOiAxNnB4IDA7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59XHJcbi8qID09PSBGSU0gU1BSSU5UIDA0ID09PSAqLyJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n    });\n  }\n}","map":{"version":3,"names":["CalendarView","endOfMonth","startOfMonth","endOfWeek","startOfWeek","Subject","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","AgendaComponent_mwl_calendar_month_view_24_Template_mwl_calendar_month_view_dayClicked_0_listener","$event","ɵɵrestoreView","_r5","ctx_r4","ɵɵnextContext","setView","Day","ɵɵresetView","viewDate","day","date","ɵɵproperty","ctx_r1","events","refresh","locale","ɵɵelement","ctx_r2","ctx_r3","colors","AGENDADO","primary","secondary","CONCLUIDO","CANCELADO","AgendaComponent","constructor","agendamentoService","view","Month","Date","isLoading","errorMessage","ngOnInit","loadAgendamentos","inicio","fim","getAgendamentos","toISOString","subscribe","next","data","map","ag","actions","status","push","label","cssClass","onClick","event","concluirAgendamento","id","start","dataHora","title","substring","pet","nome","servicos","s","join","color","allDay","meta","agendamento","error","err","console","confirm","agendamentoAtualizado","message","onViewDateChange","ɵɵdirectiveInject","i1","AgendamentoService","selectors","decls","vars","consts","template","AgendaComponent_Template","rf","ctx","AgendaComponent_Template_button_click_6_listener","AgendaComponent_Template_button_click_8_listener","Week","AgendaComponent_Template_button_click_10_listener","AgendaComponent_Template_button_viewDateChange_13_listener","AgendaComponent_Template_button_viewDateChange_15_listener","AgendaComponent_Template_button_viewDateChange_17_listener","ɵɵtemplate","AgendaComponent_div_22_Template","AgendaComponent_mwl_calendar_month_view_24_Template","AgendaComponent_mwl_calendar_week_view_25_Template","AgendaComponent_mwl_calendar_day_view_26_Template","ɵɵadvance","ɵɵclassProp","ɵɵtextInterpolate","ɵɵpipeBind3"],"sources":["C:\\TCC\\petflow\\petflow-web\\src\\app\\features\\admin\\pages\\agenda\\agenda.component.ts","C:\\TCC\\petflow\\petflow-web\\src\\app\\features\\admin\\pages\\agenda\\agenda.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { AgendamentoService } from '../../../admin/services/agendamento.service';\r\nimport { AgendamentoResponse } from '../../../admin/models/agendamento.model';\r\n\r\n// Imports do Calendário\r\nimport {\r\nCalendarEvent,\r\nCalendarEventAction, // <-- Importe este\r\nCalendarView\r\n} from 'angular-calendar';\r\nimport {\r\nstartOfDay,\r\nendOfDay,\r\nsubDays,\r\naddDays,\r\nendOfMonth,\r\nisSameDay,\r\nisSameMonth,\r\naddHours,\r\nstartOfMonth,\r\nendOfWeek,\r\nstartOfWeek,\r\n} from 'date-fns';\r\nimport { Subject } from 'rxjs';\r\n// === INÍCIO SPRINT 04 ===\r\n// Import para tratar erros\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\n// === FIM SPRINT 04 ===\r\n\r\n// Cores para os status (Exemplo)\r\nconst colors: any = {\r\nAGENDADO: {\r\nprimary: '#007bff', // Azul\r\nsecondary: '#D1E7FD',\r\n},\r\nCONCLUIDO: {\r\nprimary: '#198754', // Verde\r\nsecondary: '#D1FAD0',\r\n},\r\nCANCELADO: {\r\nprimary: '#6c757d', // Cinza\r\nsecondary: '#E2E3E5',\r\n},\r\n};\r\n\r\n@Component({\r\nselector: 'app-agenda',\r\ntemplateUrl: './agenda.component.html',\r\nstyleUrls: ['./agenda.component.css'] // <-- Mudei para .scss para o estilo da ação\r\n})\r\nexport class AgendaComponent implements OnInit {\r\n\r\n// --- Configuração do Calendário ---\r\nview: CalendarView = CalendarView.Month;\r\nCalendarView = CalendarView;\r\nviewDate: Date = new Date();\r\nlocale: string = 'pt';\r\nevents: CalendarEvent[] = [];\r\nisLoading = true;\r\nrefresh = new Subject<void>();\r\n\r\n// === INÍCIO SPRINT 04 ===\r\nerrorMessage: string | null = null;\r\n// === FIM SPRINT 04 ===\r\n\r\nconstructor(private agendamentoService: AgendamentoService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.loadAgendamentos();\r\n  }\r\n\r\n  /**\r\n   * Carrega os agendamentos do back-end\r\n   * UC05 - Visão do Administrador (calendário)\r\n   */\r\n  loadAgendamentos(): void {\r\n    this.isLoading = true;\r\n    this.errorMessage = null; // Limpa erros anteriores\r\n\r\n    const inicio = startOfWeek(startOfMonth(this.viewDate));\r\n    const fim = endOfWeek(endOfMonth(this.viewDate));\r\n\r\n    this.agendamentoService.getAgendamentos(\r\n      inicio.toISOString(),\r\n      fim.toISOString()\r\n    ).subscribe({\r\n      next: (data) => {\r\n        // Converte a resposta da API para o formato do Calendário\r\n        this.events = data.map((ag: AgendamentoResponse) => {\r\n\r\n          // === INÍCIO SPRINT 04 (Adicionar Ações) ===\r\n          const actions: CalendarEventAction[] = [];\r\n\r\n          // Só adiciona a ação \"Concluir\" se o status for AGENDADO\r\n          if (ag.status === 'AGENDADO') {\r\n            actions.push({\r\n              label: 'Concluir', // Texto da ação\r\n              cssClass: 'concluir-action', // Classe CSS para estilizar\r\n              onClick: ({ event }: { event: CalendarEvent }): void => {\r\n                this.concluirAgendamento(event); // Chama nosso novo método\r\n              },\r\n            });\r\n          }\r\n          // === FIM SPRINT 04 ===\r\n\r\n          return {\r\n            id: ag.id,\r\n            start: new Date(ag.dataHora),\r\n            title: `(${ag.status.substring(0, 3)}) ${ag.pet.nome} - ${ag.servicos.map(s => s.nome).join(', ')}`,\r\n            color: colors[ag.status] || colors.CANCELADO,\r\n            allDay: false,\r\n            actions: actions, // <-- Adiciona as ações ao evento\r\n            meta: {\r\n              agendamento: ag // <-- Guarda o objeto original\r\n            }\r\n          };\r\n        });\r\n        this.isLoading = false;\r\n        this.refresh.next();\r\n      },\r\n      error: (err: HttpErrorResponse) => {\r\n        console.error('Erro ao carregar agendamentos', err);\r\n        this.errorMessage = 'Falha ao carregar agendamentos. Tente novamente.';\r\n        this.isLoading = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  // === INÍCIO SPRINT 04 (Método para Concluir) ===\r\n\r\n  /**\r\n   * UC05 - Chamado quando o admin clica na ação \"Concluir\"\r\n   */\r\n  concluirAgendamento(event: CalendarEvent): void {\r\n    const id = event.id as number;\r\n\r\n    if (!confirm(`Deseja realmente concluir este agendamento?\\n\\n\"${event.title}\"\\n\\nEsta ação dará baixa no estoque.`)) {\r\n      return;\r\n    }\r\n\r\n    this.errorMessage = null; // Limpa erros\r\n\r\n    this.agendamentoService.concluirAgendamento(id).subscribe({\r\n      next: (agendamentoAtualizado) => {\r\n        // Sucesso! Atualiza o evento na tela\r\n\r\n        // 1. Atualiza o objeto 'meta' com os dados mais recentes\r\n        event.meta.agendamento = agendamentoAtualizado;\r\n\r\n        // 2. Atualiza as propriedades visuais do evento\r\n        event.title = `(CON) ${agendamentoAtualizado.pet.nome} - ${agendamentoAtualizado.servicos.map(s => s.nome).join(', ')}`;\r\n        event.color = colors.CONCLUIDO;\r\n        event.actions = []; // Remove a ação \"Concluir\"\r\n\r\n        // 3. Notifica o calendário para redesenhar\r\n        this.refresh.next();\r\n      },\r\n      error: (err: HttpErrorResponse) => {\r\n        console.error('Erro ao concluir agendamento', err);\r\n        this.errorMessage = `Erro ao concluir: ${err.error?.message || 'Tente novamente.'}`;\r\n      }\r\n    });\r\n  }\r\n  // === FIM SPRINT 04 ===\r\n\r\n  /**\r\n   * Chamado quando o usuário troca de mês ou dia.\r\n   */\r\n  onViewDateChange(): void {\r\n    this.loadAgendamentos();\r\n  }\r\n\r\n  /**\r\n   * Chamado quando o usuário troca a visão (Mês, Semana, Dia).\r\n   */\r\n  setView(view: CalendarView): void {\r\n    this.view = view;\r\n  }\r\n}","<!-- (Usamos CSS do cliente-list e agenda.css) -->\r\n<div class=\"list-container\">\r\n\r\n    <!-- Cabeçalho da Página -->\r\n    <header class=\"page-header\">\r\n        <h1>Agenda de Agendamentos</h1>\r\n    </header>\r\n\r\n    <!-- Cabeçalho do Calendário (Controles) -->\r\n    <div class=\"calendar-header\">\r\n        <!-- Botões Mês/Semana/Dia -->\r\n        <div class=\"btn-group\">\r\n            <button\r\n                    class=\"btn-secondary\"\r\n                    (click)=\"setView(CalendarView.Month)\"\r\n                    [class.active]=\"view === CalendarView.Month\">\r\n                Mês\r\n            </button>\r\n            <button\r\n                    class=\"btn-secondary\"\r\n                    (click)=\"setView(CalendarView.Week)\"\r\n                    [class.active]=\"view === CalendarView.Week\">\r\n                Semana\r\n            </button>\r\n            <button\r\n                    class=\"btn-secondary\"\r\n                    (click)=\"setView(CalendarView.Day)\"\r\n                    [class.active]=\"view === CalendarView.Day\">\r\n                Dia\r\n            </button>\r\n        </div>\r\n\r\n        <!-- Botões Mês Anterior/Próximo -->\r\n        <div class=\"btn-group\">\r\n            <button\r\n                    class=\"btn-secondary\"\r\n                    mwlCalendarPreviousView\r\n                    [view]=\"view\"\r\n                    [(viewDate)]=\"viewDate\"\r\n                    (viewDateChange)=\"onViewDateChange()\">\r\n                Anterior\r\n            </button>\r\n            <button\r\n                    class=\"btn-secondary\"\r\n                    mwlCalendarToday\r\n                    [(viewDate)]=\"viewDate\"\r\n                    (viewDateChange)=\"onViewDateChange()\">\r\n                Hoje\r\n            </button>\r\n            <button\r\n                    class=\"btn-secondary\"\r\n                    mwlCalendarNextView\r\n                    [view]=\"view\"\r\n                    [(viewDate)]=\"viewDate\"\r\n                    (viewDateChange)=\"onViewDateChange()\">\r\n                Próximo\r\n            </button>\r\n        </div>\r\n\r\n        <!-- Título (Mês e Ano) -->\r\n        <h3>{{ viewDate | calendarDate:(view + 'ViewTitle'):locale }}</h3>\r\n    </div>\r\n\r\n    <!-- Estado de Loading -->\r\n    <div *ngIf=\"isLoading\" class=\"loading-indicator\">\r\n        Carregando agendamentos...\r\n    </div>\r\n\r\n    <!-- O Calendário (Visão de Mês/Semana/Dia) -->\r\n    <div [ngSwitch]=\"view\" class=\"calendar-container card\">\r\n        <!-- Visão de Mês -->\r\n        <mwl-calendar-month-view\r\n                *ngSwitchCase=\"CalendarView.Month\"\r\n                [viewDate]=\"viewDate\"\r\n                [events]=\"events\"\r\n                [refresh]=\"refresh\"\r\n                [locale]=\"locale\"\r\n                (dayClicked)=\"setView(CalendarView.Day); viewDate = $event.day.date\">\r\n        </mwl-calendar-month-view>\r\n\r\n        <!-- Visão de Semana -->\r\n        <mwl-calendar-week-view\r\n                *ngSwitchCase=\"CalendarView.Week\"\r\n                [viewDate]=\"viewDate\"\r\n                [events]=\"events\"\r\n                [refresh]=\"refresh\"\r\n                [locale]=\"locale\">\r\n        </mwl-calendar-week-view>\r\n\r\n        <!-- Visão de Dia -->\r\n        <mwl-calendar-day-view\r\n                *ngSwitchCase=\"CalendarView.Day\"\r\n                [viewDate]=\"viewDate\"\r\n                [events]=\"events\"\r\n                [refresh]=\"refresh\"\r\n                [locale]=\"locale\">\r\n        </mwl-calendar-day-view>\r\n    </div>\r\n</div>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}