{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nexport let LoginComponent = class LoginComponent {\n  constructor(fb, authService, router) {\n    this.fb = fb;\n    this.authService = authService;\n    this.router = router;\n    this.loading = false;\n    this.errorMessage = '';\n  }\n  ngOnInit() {\n    this.loginForm = this.fb.group({\n      email: ['', [Validators.required, Validators.email]],\n      senha: ['', Validators.required] // ‚úÖ MUDOU DE \"senha_normal\" PARA \"senha\"\n    });\n  }\n  onSubmit() {\n    if (this.loginForm.invalid) {\n      this.errorMessage = \"Por favor, preencha o e-mail e a senha.\";\n      return;\n    }\n    this.isLoading = true;\n    this.errorMessage = null;\n    // ‚úÖ CORRE√á√ÉO: Envia um objeto com { email, senha }\n    const credentials = {\n      email: this.loginForm.value.email,\n      senha: this.loginForm.value.senha\n    };\n    console.log('üì§ Enviando credenciais:', credentials);\n    this.authService.login(credentials).subscribe({\n      next: response => {\n        console.log('‚úÖ Response completa:', response);\n        console.log('‚úÖ UserRole:', response.userRole);\n        console.log('‚úÖ Tipo do userRole:', typeof response.userRole);\n        this.isLoading = false;\n        if (response.userRole) {\n          console.log('‚úÖ Vai redirecionar para:', response.userRole);\n          this.redirectUser(response.userRole);\n        } else {\n          this.errorMessage = \"E-mail ou senha inv√°lidos.\";\n        }\n      },\n      error: err => {\n        console.error('‚ùå Erro no login:', err);\n        this.isLoading = false;\n        this.errorMessage = \"E-mail ou senha inv√°lidos.\";\n      }\n    });\n  }\n};\nLoginComponent = __decorate([Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.scss']\n})], LoginComponent);","map":{"version":3,"names":["Component","Validators","LoginComponent","constructor","fb","authService","router","loading","errorMessage","ngOnInit","loginForm","group","email","required","senha","onSubmit","invalid","isLoading","credentials","value","console","log","login","subscribe","next","response","userRole","redirectUser","error","err","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\TCC\\petflow\\petflow-web\\src\\app\\features\\admin\\auth\\login\\login.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { AuthService } from '../../services/auth.service';\r\n\r\n@Component({\r\nselector: 'app-login',\r\ntemplateUrl: './login.component.html',\r\nstyleUrls: ['./login.component.scss']\r\n})\r\nexport class LoginComponent implements OnInit {\r\nloginForm!: FormGroup;\r\nloading = false;\r\nerrorMessage = '';\r\n\r\nconstructor(\r\n    private fb: FormBuilder,\r\n    private authService: AuthService,\r\n    private router: Router\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loginForm = this.fb.group({\r\n      email: ['', [Validators.required, Validators.email]],\r\n      senha: ['', Validators.required]  // ‚úÖ MUDOU DE \"senha_normal\" PARA \"senha\"\r\n    });\r\n  }\r\n\r\n    onSubmit(): void {\r\n        if (this.loginForm.invalid) {\r\n            this.errorMessage = \"Por favor, preencha o e-mail e a senha.\";\r\n            return;\r\n        }\r\n\r\n        this.isLoading = true;\r\n        this.errorMessage = null;\r\n\r\n        // ‚úÖ CORRE√á√ÉO: Envia um objeto com { email, senha }\r\n        const credentials = {\r\n            email: this.loginForm.value.email,\r\n            senha: this.loginForm.value.senha\r\n        };\r\n\r\n        console.log('üì§ Enviando credenciais:', credentials);\r\n\r\n        this.authService.login(credentials).subscribe({\r\n            next: (response) => {\r\n                console.log('‚úÖ Response completa:', response);\r\n                console.log('‚úÖ UserRole:', response.userRole);\r\n                console.log('‚úÖ Tipo do userRole:', typeof response.userRole);\r\n\r\n                this.isLoading = false;\r\n                if (response.userRole) {\r\n                    console.log('‚úÖ Vai redirecionar para:', response.userRole);\r\n                    this.redirectUser(response.userRole);\r\n                } else {\r\n                    this.errorMessage = \"E-mail ou senha inv√°lidos.\";\r\n                }\r\n            },\r\n            error: (err) => {\r\n                console.error('‚ùå Erro no login:', err);\r\n                this.isLoading = false;\r\n                this.errorMessage = \"E-mail ou senha inv√°lidos.\";\r\n            }\r\n        });\r\n    }\r\n}"],"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AACjD,SAAiCC,UAAU,QAAQ,gBAAgB;AAS5D,WAAMC,cAAc,GAApB,MAAMA,cAAc;EAK3BC,YACYC,EAAe,EACfC,WAAwB,EACxBC,MAAc;IAFd,KAAAF,EAAE,GAAFA,EAAE;IACF,KAAAC,WAAW,GAAXA,WAAW;IACX,KAAAC,MAAM,GAANA,MAAM;IANlB,KAAAC,OAAO,GAAG,KAAK;IACf,KAAAC,YAAY,GAAG,EAAE;EAMZ;EAEHC,QAAQA,CAAA;IACN,IAAI,CAACC,SAAS,GAAG,IAAI,CAACN,EAAE,CAACO,KAAK,CAAC;MAC7BC,KAAK,EAAE,CAAC,EAAE,EAAE,CAACX,UAAU,CAACY,QAAQ,EAAEZ,UAAU,CAACW,KAAK,CAAC,CAAC;MACpDE,KAAK,EAAE,CAAC,EAAE,EAAEb,UAAU,CAACY,QAAQ,CAAC,CAAE;KACnC,CAAC;EACJ;EAEEE,QAAQA,CAAA;IACJ,IAAI,IAAI,CAACL,SAAS,CAACM,OAAO,EAAE;MACxB,IAAI,CAACR,YAAY,GAAG,yCAAyC;MAC7D;;IAGJ,IAAI,CAACS,SAAS,GAAG,IAAI;IACrB,IAAI,CAACT,YAAY,GAAG,IAAI;IAExB;IACA,MAAMU,WAAW,GAAG;MAChBN,KAAK,EAAE,IAAI,CAACF,SAAS,CAACS,KAAK,CAACP,KAAK;MACjCE,KAAK,EAAE,IAAI,CAACJ,SAAS,CAACS,KAAK,CAACL;KAC/B;IAEDM,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEH,WAAW,CAAC;IAEpD,IAAI,CAACb,WAAW,CAACiB,KAAK,CAACJ,WAAW,CAAC,CAACK,SAAS,CAAC;MAC1CC,IAAI,EAAGC,QAAQ,IAAI;QACfL,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEI,QAAQ,CAAC;QAC7CL,OAAO,CAACC,GAAG,CAAC,aAAa,EAAEI,QAAQ,CAACC,QAAQ,CAAC;QAC7CN,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAE,OAAOI,QAAQ,CAACC,QAAQ,CAAC;QAE5D,IAAI,CAACT,SAAS,GAAG,KAAK;QACtB,IAAIQ,QAAQ,CAACC,QAAQ,EAAE;UACnBN,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEI,QAAQ,CAACC,QAAQ,CAAC;UAC1D,IAAI,CAACC,YAAY,CAACF,QAAQ,CAACC,QAAQ,CAAC;SACvC,MAAM;UACH,IAAI,CAAClB,YAAY,GAAG,4BAA4B;;MAExD,CAAC;MACDoB,KAAK,EAAGC,GAAG,IAAI;QACXT,OAAO,CAACQ,KAAK,CAAC,kBAAkB,EAAEC,GAAG,CAAC;QACtC,IAAI,CAACZ,SAAS,GAAG,KAAK;QACtB,IAAI,CAACT,YAAY,GAAG,4BAA4B;MACpD;KACH,CAAC;EACN;CACH;AAxDYN,cAAc,GAAA4B,UAAA,EAL1B9B,SAAS,CAAC;EACX+B,QAAQ,EAAE,WAAW;EACrBC,WAAW,EAAE,wBAAwB;EACrCC,SAAS,EAAE,CAAC,wBAAwB;CACnC,CAAC,C,EACW/B,cAAc,CAwD1B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}