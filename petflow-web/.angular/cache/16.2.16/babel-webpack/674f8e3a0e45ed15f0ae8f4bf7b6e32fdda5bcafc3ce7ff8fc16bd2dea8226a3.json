{"ast":null,"code":"import { HttpParams } from '@angular/common/http';\nimport { environment } from '../../../../environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class AgendamentoService {\n  constructor(http) {\n    this.http = http;\n    this.apiUrl = `${environment.apiUrl}/api/agendamentos`;\n  }\n  /**\n   * UC05 - Criar Agendamento (Usado pelo Cliente e Admin)\n   */\n  createAgendamento(dto) {\n    return this.http.post(this.apiUrl, dto);\n  }\n  /**\n   * UC05 - Listar Agendamentos (para Cliente ou Admin)\n   * O back-end filtra automaticamente com base no perfil (ROLE) do token.\n   */\n  getAgendamentos(inicio, fim) {\n    let params = new HttpParams();\n    if (inicio) {\n      params = params.set('inicio', inicio);\n    }\n    if (fim) {\n      params = params.set('fim', fim);\n    }\n    return this.http.get(this.apiUrl, {\n      params\n    });\n  }\n  /**\n   * CT03.4 - Cancelar Agendamento\n   */\n  cancelarAgendamento(id) {\n    return this.http.patch(`${this.apiUrl}/${id}/cancelar`, {});\n  }\n  getAgendamentosCliente() {\n    return this.http.get('http://localhost:8081/api/clientes/me/agendamentos');\n  }\n  // === INÍCIO SPRINT 04 (UC05 - Concluir Agendamento) ===\n  /**\n   * UC05 - Marca um agendamento como 'CONCLUÍDO'\n   * (Consome PATCH /api/agendamentos/{id}/concluir)\n   *\n   * @param id O ID do agendamento a ser concluído.\n   * @returns Um Observable com o agendamento atualizado.\n   */\n  concluirAgendamento(id) {\n    // O Interceptor de Autenticação (se houver) já deve adicionar\n    // o token de ADMIN automaticamente.\n    return this.http.patch(`${this.apiUrl}/${id}/concluir`, {} // Envia um corpo vazio, pois é um PATCH sem dados\n    );\n  }\n  static {\n    this.ɵfac = function AgendamentoService_Factory(t) {\n      return new (t || AgendamentoService)(i0.ɵɵinject(i1.HttpClient));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: AgendamentoService,\n      factory: AgendamentoService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["HttpParams","environment","AgendamentoService","constructor","http","apiUrl","createAgendamento","dto","post","getAgendamentos","inicio","fim","params","set","get","cancelarAgendamento","id","patch","getAgendamentosCliente","concluirAgendamento","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["C:\\TCC\\petflow\\petflow-web\\src\\app\\features\\admin\\services\\agendamento.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { environment } from '../../../../environments/environment';\r\nimport { AgendamentoRequestDTO, AgendamentoResponse } from '../models/agendamento.model';\r\n\r\n@Injectable({\r\nprovidedIn: 'root'\r\n})\r\nexport class AgendamentoService {\r\n\r\nprivate apiUrl = `${environment.apiUrl}/api/agendamentos`;\r\n\r\nconstructor(private http: HttpClient) { }\r\n\r\n  /**\r\n   * UC05 - Criar Agendamento (Usado pelo Cliente e Admin)\r\n   */\r\n  createAgendamento(dto: AgendamentoRequestDTO): Observable<AgendamentoResponse> {\r\n    return this.http.post<AgendamentoResponse>(this.apiUrl, dto);\r\n  }\r\n\r\n  /**\r\n   * UC05 - Listar Agendamentos (para Cliente ou Admin)\r\n   * O back-end filtra automaticamente com base no perfil (ROLE) do token.\r\n   */\r\n  getAgendamentos(inicio?: string, fim?: string): Observable<AgendamentoResponse[]> {\r\n    let params = new HttpParams();\r\n    if (inicio) {\r\n      params = params.set('inicio', inicio);\r\n    }\r\n    if (fim) {\r\n      params = params.set('fim', fim);\r\n    }\r\n    return this.http.get<AgendamentoResponse[]>(this.apiUrl, { params });\r\n  }\r\n\r\n  /**\r\n   * CT03.4 - Cancelar Agendamento\r\n   */\r\n  cancelarAgendamento(id: number): Observable<AgendamentoResponse> {\r\n    return this.http.patch<AgendamentoResponse>(`${this.apiUrl}/${id}/cancelar`, {});\r\n  }\r\n\r\n\r\ngetAgendamentosCliente(): Observable<AgendamentoResponse[]> {\r\n  return this.http.get<AgendamentoResponse[]>('http://localhost:8081/api/clientes/me/agendamentos');\r\n}\r\n\r\n  // === INÍCIO SPRINT 04 (UC05 - Concluir Agendamento) ===\r\n\r\n  /**\r\n   * UC05 - Marca um agendamento como 'CONCLUÍDO'\r\n   * (Consome PATCH /api/agendamentos/{id}/concluir)\r\n   *\r\n   * @param id O ID do agendamento a ser concluído.\r\n   * @returns Um Observable com o agendamento atualizado.\r\n   */\r\n  concluirAgendamento(id: number): Observable<AgendamentoResponse> {\r\n    // O Interceptor de Autenticação (se houver) já deve adicionar\r\n    // o token de ADMIN automaticamente.\r\n    return this.http.patch<AgendamentoResponse>(\r\n      `${this.apiUrl}/${id}/concluir`,\r\n      {} // Envia um corpo vazio, pois é um PATCH sem dados\r\n    );\r\n  }\r\n  // === FIM SPRINT 04 ===\r\n}"],"mappings":"AACA,SAAqBA,UAAU,QAAQ,sBAAsB;AAE7D,SAASC,WAAW,QAAQ,sCAAsC;;;AAMlE,OAAM,MAAOC,kBAAkB;EAI/BC,YAAoBC,IAAgB;IAAhB,KAAAA,IAAI,GAAJA,IAAI;IAFhB,KAAAC,MAAM,GAAG,GAAGJ,WAAW,CAACI,MAAM,mBAAmB;EAEjB;EAEtC;;;EAGAC,iBAAiBA,CAACC,GAA0B;IAC1C,OAAO,IAAI,CAACH,IAAI,CAACI,IAAI,CAAsB,IAAI,CAACH,MAAM,EAAEE,GAAG,CAAC;EAC9D;EAEA;;;;EAIAE,eAAeA,CAACC,MAAe,EAAEC,GAAY;IAC3C,IAAIC,MAAM,GAAG,IAAIZ,UAAU,EAAE;IAC7B,IAAIU,MAAM,EAAE;MACVE,MAAM,GAAGA,MAAM,CAACC,GAAG,CAAC,QAAQ,EAAEH,MAAM,CAAC;;IAEvC,IAAIC,GAAG,EAAE;MACPC,MAAM,GAAGA,MAAM,CAACC,GAAG,CAAC,KAAK,EAAEF,GAAG,CAAC;;IAEjC,OAAO,IAAI,CAACP,IAAI,CAACU,GAAG,CAAwB,IAAI,CAACT,MAAM,EAAE;MAAEO;IAAM,CAAE,CAAC;EACtE;EAEA;;;EAGAG,mBAAmBA,CAACC,EAAU;IAC5B,OAAO,IAAI,CAACZ,IAAI,CAACa,KAAK,CAAsB,GAAG,IAAI,CAACZ,MAAM,IAAIW,EAAE,WAAW,EAAE,EAAE,CAAC;EAClF;EAGFE,sBAAsBA,CAAA;IACpB,OAAO,IAAI,CAACd,IAAI,CAACU,GAAG,CAAwB,oDAAoD,CAAC;EACnG;EAEE;EAEA;;;;;;;EAOAK,mBAAmBA,CAACH,EAAU;IAC5B;IACA;IACA,OAAO,IAAI,CAACZ,IAAI,CAACa,KAAK,CACpB,GAAG,IAAI,CAACZ,MAAM,IAAIW,EAAE,WAAW,EAC/B,EAAE,CAAC;KACJ;EACH;;;uBAxDWd,kBAAkB,EAAAkB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;IAAA;EAAA;;;aAAlBrB,kBAAkB;MAAAsB,OAAA,EAAlBtB,kBAAkB,CAAAuB,IAAA;MAAAC,UAAA,EAFnB;IAAM;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}