<div class="cliente-form-container">
    <h2>{{ isEditMode ? 'Editar Cliente' : 'Cadastrar Novo Cliente' }}</h2>

    <form [formGroup]="clienteForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
            <label>Nome</label>
            <input type="text" formControlName="nome" maxlength="100">
        </div>

        <div class="form-group">
            <label>E-mail</label>
            <input type="email" formControlName="email" maxlength="100">
        </div>

        <div class="form-group" *ngIf="!isEditMode">
            <label>Senha</label>
            <input type="password" formControlName="senha" maxlength="20">
        </div>

        <div class="form-group">
            <label>CPF</label>
            <input
                    type="text"
                    formControlName="cpf"
                    mask="000.000.000-00"
                    maxlength="14"
                    placeholder="000.000.000-00">
        </div>

        <div class="form-group">
            <label>Telefone</label>
            <input
                    type="text"
                    formControlName="telefone"
                    mask="(00) 00000-0000"
                    maxlength="15"
                    placeholder="(00) 00000-0000">
        </div>

        <div class="form-group">
            <label>Endere√ßo</label>
            <input type="text" formControlName="endereco" maxlength="200">
        </div>

        <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>

        <button type="submit" [disabled]="isLoading">
            {{ isLoading ? 'Salvando...' : 'Salvar Cliente' }}
        </button>

        <button type="button" (click)="goBack()">Voltar</button>
    </form>

    <hr>

    <div *ngIf="cliente">
        <h3>Pets do Cliente</h3>
        <ul>
            <li *ngFor="let pet of cliente?.pets">
                {{ pet.nome }} - {{ pet.especie }}
                <button (click)="openPetModal(pet)">Editar</button>
                <button (click)="onDeletePet(pet)">Excluir</button>
            </li>
        </ul>

        <button (click)="openPetModal()">Adicionar Pet</button>
    </div>

    <app-pet-form-modal
            *ngIf="isPetModalOpen"
            [pet]="currentPetToEdit"
            [clienteId]="clienteId"
            (saveSuccess)="handlePetSave()"
            (close)="closePetModal()">
    </app-pet-form-modal>
</div>
