<div class="form-container">

    <header class="form-header">
        <button (click)="goBack()" class="btn-back">
            &larr; Voltar para a Lista
        </button>
        <h1>{{ isEditMode ? 'Editar Serviço' : 'Novo Serviço' }}</h1>
    </header>

    <form [formGroup]="servicoForm" (ngSubmit)="onSubmit()" class="card">
        <fieldset class="form-section">
            <legend>Dados do Serviço</legend>

            <div class="form-group">
                <label for="nome" class="form-label">Nome do Serviço</label>
                <input id="nome" type="text" class="form-control" formControlName="nome">
                <div *ngIf="servicoForm.get('nome')?.touched && servicoForm.get('nome')?.hasError('required')" class="text-danger">
                    Nome é obrigatório.
                </div>
            </div>

            <div class="form-group">
                <label for="preco" class="form-label">Preço (R$)</label>
                <input id="preco" type="number" class="form-control" formControlName="preco"
                       min="0.01" step="0.01" placeholder="ex: 50.00">
                <div *ngIf="servicoForm.get('preco')?.touched && servicoForm.get('preco')?.hasError('required')" class="text-danger">
                    Preço é obrigatório.
                </div>
                <div *ngIf="servicoForm.get('preco')?.touched && servicoForm.get('preco')?.hasError('min')" class="text-danger">
                    Preço deve ser positivo.
                </div>
            </div>

            <div class="form-group">
                <label for="descricao" class="form-label">Descrição (Opcional)</label>
                <textarea id="descricao" class="form-control" formControlName="descricao" rows="4"></textarea>
            </div>

        </fieldset>

        <footer class="form-actions">
            <div *ngIf="errorMessage" class="error-message">
                {{ errorMessage }}
            </div>
            <button type="button" class="btn-secondary" (click)="goBack()">Cancelar</button>
            <button type="submit" class="btn-primary" [disabled]="isLoading || servicoForm.invalid">
                {{ isLoading ? 'Salvando...' : (isEditMode ? 'Salvar Alterações' : 'Cadastrar Serviço') }}
            </button>
        </footer>
    </form>

</div>