<div class="form-container">

    <header class="form-header">
        <button (click)="goBack()" class="btn-back">
            &larr; Voltar para a Lista
        </button>
        <h1>{{ isEditMode ? 'Editar Produto' : 'Novo Produto' }}</h1>
    </header>

    <form [formGroup]="produtoForm" (ngSubmit)="onSubmit()" class="card">
        <fieldset class="form-section">
            <legend>Dados do Produto</legend>

            <div class="form-group">
                <label for="nome" class="form-label">Nome do Produto</label>
                <input id="nome" type="text" class="form-control" formControlName="nome">
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="precoCusto" class="form-label">Preço de Custo (R$)</label>
                    <input id="precoCusto" type="number" class="form-control" formControlName="precoCusto"
                           min="0" step="0.01" placeholder="ex: 20.00">
                </div>

                <div class="form-group">
                    <label for="precoVenda" class="form-label">Preço de Venda (R$)</label>
                    <input id="precoVenda" type="number" class="form-control" formControlName="precoVenda"
                           min="0.01" step="0.01" placeholder="ex: 35.00">
                </div>

                <div class="form-group">
                    <label for="qtdEstoque" class="form-label">Estoque (Unid.)</label>
                    <input id="qtdEstoque" type="number" class="form-control" formControlName="qtdEstoque"
                           min="0" step="1" placeholder="ex: 100">
                </div>
            </div>

            <div class="form-group">
                <label for="descricao" class="form-label">Descrição (Opcional)</label>
                <textarea id="descricao" class="form-control" formControlName="descricao" rows="4"></textarea>
            </div>

        </fieldset>

        <footer class="form-actions">
            <div *ngIf="errorMessage" class="error-message">
                {{ errorMessage }}
            </div>
            <button type="button" class="btn-secondary" (click)="goBack()">Cancelar</button>
            <button type="submit" class="btn-primary" [disabled]="isLoading || produtoForm.invalid">
                {{ isLoading ? 'Salvando...' : (isEditMode ? 'Salvar Alterações' : 'Cadastrar Produto') }}
            </button>
        </footer>
    </form>

</div>