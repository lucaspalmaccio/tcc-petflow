"use strict";(self.webpackChunkpetflow_web=self.webpackChunkpetflow_web||[]).push([[418],{3418:(M,d,l)=>{l.r(d),l.d(d,{AuthModule:()=>C});var c=l(177),r=l(4341),u=l(1874),e=l(7705),h=l(8010);function f(o,g){1&o&&(e.j41(0,"div",13),e.EFF(1," O e-mail \xe9 obrigat\xf3rio. "),e.k0s())}function p(o,g){1&o&&(e.j41(0,"div",13),e.EFF(1," Formato de e-mail inv\xe1lido. "),e.k0s())}function v(o,g){1&o&&(e.j41(0,"div",13),e.EFF(1," A senha \xe9 obrigat\xf3ria. "),e.k0s())}function b(o,g){if(1&o&&(e.j41(0,"div",14),e.EFF(1),e.k0s()),2&o){const i=e.XpG();e.R7$(1),e.SpI(" ",i.errorMessage," ")}}const F=[{path:"login",component:(()=>{class o{constructor(i,n,t){this.fb=i,this.authService=n,this.router=t,this.errorMessage=null,this.isLoading=!1,this.loginForm=this.fb.group({email:["",[r.k0.required,r.k0.email]],senha:["",[r.k0.required]]})}ngOnInit(){if(this.authService.isAuthenticated()){const i=this.authService.getUserRole();"ROLE_ADMIN"===i?this.router.navigate(["/admin"]):"ROLE_CLIENTE"===i&&this.router.navigate(["/cliente"])}}onSubmit(){if(this.loginForm.invalid)return void(this.errorMessage="Por favor, preencha o e-mail e a senha.");this.isLoading=!0,this.errorMessage=null;const{email:i,senha:n}=this.loginForm.value;this.authService.login(i,n).subscribe({next:t=>{this.isLoading=!1,t?"ROLE_ADMIN"===t.userRole?this.router.navigate(["/admin"]):"ROLE_CLIENTE"===t.userRole?this.router.navigate(["/cliente"]):(this.errorMessage="Perfil de usu\xe1rio inv\xe1lido.",this.authService.logout()):this.errorMessage="E-mail ou senha inv\xe1lidos."},error:t=>{this.isLoading=!1,this.errorMessage="Erro ao tentar conectar. Tente novamente."}})}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(r.ok),e.rXU(h.u),e.rXU(u.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-login"]],decls:21,vars:7,consts:[[1,"login-container"],[1,"login-box"],[1,"login-title"],[1,"login-subtitle"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","placeholder","admin@petflow.com.br",1,"form-control"],["class","text-danger",4,"ngIf"],["for","senha",1,"form-label"],["type","password","id","senha","formControlName","senha","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"form-control"],["class","error-message",4,"ngIf"],["type","submit",1,"btn-primary","login-button",3,"disabled"],[1,"text-danger"],[1,"error-message"]],template:function(n,t){if(1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"h1",2),e.EFF(3,"Petflow"),e.k0s(),e.j41(4,"p",3),e.EFF(5,"Acesso ao Painel Administrativo"),e.k0s(),e.j41(6,"form",4),e.bIt("ngSubmit",function(){return t.onSubmit()}),e.j41(7,"div",5)(8,"label",6),e.EFF(9,"E-mail"),e.k0s(),e.nrm(10,"input",7),e.DNE(11,f,2,0,"div",8),e.DNE(12,p,2,0,"div",8),e.k0s(),e.j41(13,"div",5)(14,"label",9),e.EFF(15,"Senha"),e.k0s(),e.nrm(16,"input",10),e.DNE(17,v,2,0,"div",8),e.k0s(),e.DNE(18,b,2,1,"div",11),e.j41(19,"button",12),e.EFF(20),e.k0s()()()()),2&n){let a,s,m;e.R7$(6),e.Y8G("formGroup",t.loginForm),e.R7$(5),e.Y8G("ngIf",(null==(a=t.loginForm.get("email"))?null:a.touched)&&(null==(a=t.loginForm.get("email"))?null:a.hasError("required"))),e.R7$(1),e.Y8G("ngIf",(null==(s=t.loginForm.get("email"))?null:s.touched)&&(null==(s=t.loginForm.get("email"))?null:s.hasError("email"))),e.R7$(5),e.Y8G("ngIf",(null==(m=t.loginForm.get("senha"))?null:m.touched)&&(null==(m=t.loginForm.get("senha"))?null:m.hasError("required"))),e.R7$(1),e.Y8G("ngIf",t.errorMessage),e.R7$(1),e.Y8G("disabled",t.isLoading||t.loginForm.invalid),e.R7$(1),e.SpI(" ",t.isLoading?"Entrando...":"Entrar"," ")}},dependencies:[c.bT,r.qT,r.me,r.BC,r.cb,r.j4,r.JD],styles:[".login-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;background-color:var(--color-light)}.login-box[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:2.5rem;background-color:var(--color-white);border-radius:8px;box-shadow:var(--shadow-md);border-top:4px solid var(--color-primary)}.login-title[_ngcontent-%COMP%]{text-align:center;font-size:2.5rem;font-weight:700;color:var(--color-primary);margin-bottom:.5rem}.login-subtitle[_ngcontent-%COMP%]{text-align:center;font-size:1rem;color:var(--color-secondary);margin-bottom:2rem}.login-button[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:1.1rem;margin-top:1rem}.login-button[_ngcontent-%COMP%]:disabled{background-color:var(--color-secondary);cursor:not-allowed}.error-message[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb;padding:.75rem 1.25rem;border-radius:4px;margin-top:1rem;text-align:center}"]})}}return o})()},{path:"",redirectTo:"login",pathMatch:"full"}];let E=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({imports:[u.iI.forChild(F),u.iI]})}}return o})(),C=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({imports:[c.MD,E,r.X1]})}}return o})()}}]);