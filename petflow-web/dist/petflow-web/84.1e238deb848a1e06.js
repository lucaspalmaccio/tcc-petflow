"use strict";(self.webpackChunkpetflow_web=self.webpackChunkpetflow_web||[]).push([[84],{6084:(je,h,d)=>{d.r(h),d.d(h,{AdminModule:()=>we});var l=d(177),m=d(1874),a=d(4341),g=d(1626),e=d(7705),M=d(8010);let O=(()=>{class o{constructor(t){this.authService=t,this.userName=null}ngOnInit(){this.userName=this.authService.getUserName()}logout(){this.authService.logout()}static{this.\u0275fac=function(r){return new(r||o)(e.rXU(M.u))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-layout"]],decls:33,vars:1,consts:[[1,"admin-layout"],[1,"sidebar"],[1,"sidebar-header"],[1,"sidebar-title"],[1,"sidebar-subtitle"],[1,"sidebar-nav"],["routerLink","/admin/clientes","routerLinkActive","active"],[1,"icon"],["routerLink","/admin/servicos","routerLinkActive","active"],["routerLink","/admin/produtos","routerLinkActive","active"],["routerLink","/admin/agenda","routerLinkActive","active"],["routerLink","/admin/dashboard","routerLinkActive","active"],[1,"main-content"],[1,"main-header"],[1,"header-welcome"],[1,"btn-logout",3,"click"],[1,"page-content"]],template:function(r,n){1&r&&(e.j41(0,"div",0)(1,"aside",1)(2,"div",2)(3,"h2",3),e.EFF(4,"Petflow"),e.k0s(),e.j41(5,"span",4),e.EFF(6,"Admin"),e.k0s()(),e.j41(7,"nav",5)(8,"a",6),e.nrm(9,"i",7),e.EFF(10," Clientes e Pets "),e.k0s(),e.j41(11,"a",8),e.nrm(12,"i",7),e.EFF(13," Servi\xe7os "),e.k0s(),e.j41(14,"a",9),e.nrm(15,"i",7),e.EFF(16," Produtos "),e.k0s(),e.j41(17,"a",10),e.nrm(18,"i",7),e.EFF(19," Agenda "),e.k0s(),e.j41(20,"a",11),e.nrm(21,"i",7),e.EFF(22," Dashboard "),e.k0s()()(),e.j41(23,"main",12)(24,"header",13)(25,"div",14),e.EFF(26," Ol\xe1, "),e.j41(27,"strong"),e.EFF(28),e.k0s()(),e.j41(29,"button",15),e.bIt("click",function(){return n.logout()}),e.EFF(30," Sair "),e.k0s()(),e.j41(31,"div",16),e.nrm(32,"router-outlet"),e.k0s()()()),2&r&&(e.R7$(28),e.JRh(n.userName||"Administrador"))},dependencies:[m.n3,m.Wk,m.wQ],styles:["[_nghost-%COMP%]{--sidebar-width: 250px;--header-height: 70px}.admin-layout[_ngcontent-%COMP%]{display:flex}.sidebar[_ngcontent-%COMP%]{width:var(--sidebar-width);height:100vh;background-color:var(--color-dark);color:var(--color-light);display:flex;flex-direction:column;position:fixed;top:0;left:0}.sidebar-header[_ngcontent-%COMP%]{padding:1.5rem;text-align:center;border-bottom:1px solid #4a5056}.sidebar-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:var(--color-primary)}.sidebar-subtitle[_ngcontent-%COMP%]{font-size:.9rem;color:var(--color-secondary)}.sidebar-nav[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:1rem}.sidebar-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:1rem 1.5rem;color:var(--color-light);text-decoration:none;font-weight:500;border-left:4px solid transparent;transition:all .2s ease}.sidebar-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#ffffff0d}.sidebar-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:var(--color-primary);border-left-color:var(--color-primary-dark);font-weight:700}.main-content[_ngcontent-%COMP%]{flex:1;margin-left:var(--sidebar-width);display:flex;flex-direction:column;height:100vh}.main-header[_ngcontent-%COMP%]{height:var(--header-height);display:flex;justify-content:space-between;align-items:center;padding:0 2rem;background-color:var(--color-white);border-bottom:1px solid var(--color-border);flex-shrink:0}.header-welcome[_ngcontent-%COMP%]{font-size:1.1rem}.btn-logout[_ngcontent-%COMP%]{background:none;border:none;color:var(--color-danger);font-size:1rem;font-weight:600;cursor:pointer}.btn-logout[_ngcontent-%COMP%]:hover{text-decoration:underline}.page-content[_ngcontent-%COMP%]{flex:1;padding:2rem;background-color:var(--color-light);overflow-y:auto}"]})}}return o})();var f=d(5312);let v=(()=>{class o{constructor(t){this.http=t,this.apiUrl=`${f.c.apiUrl}/api/clientes`}getAllClientes(){return this.http.get(this.apiUrl)}getClienteById(t){return this.http.get(`${this.apiUrl}/${t}`)}createCliente(t){return this.http.post(this.apiUrl,t)}updateCliente(t,r){return this.http.put(`${this.apiUrl}/${t}`,r)}deleteCliente(t){return this.http.delete(`${this.apiUrl}/${t}`)}static{this.\u0275fac=function(r){return new(r||o)(e.KVO(g.Qq))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function w(o,s){1&o&&(e.j41(0,"div",6),e.EFF(1," Carregando... "),e.k0s())}function j(o,s){if(1&o&&(e.j41(0,"div",7),e.EFF(1),e.k0s()),2&o){const t=e.XpG();e.R7$(1),e.SpI(" ",t.error," ")}}function y(o,s){if(1&o){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td",12)(12,"button",13),e.bIt("click",function(){const i=e.eBV(t).$implicit,c=e.XpG(3);return e.Njj(c.navigateToEdit(i.id))}),e.EFF(13," Editar "),e.k0s(),e.j41(14,"button",14),e.bIt("click",function(){const i=e.eBV(t).$implicit,c=e.XpG(3);return e.Njj(c.onDelete(i.id,i.nome))}),e.EFF(15," Excluir "),e.k0s()()()}if(2&o){const t=s.$implicit;e.R7$(2),e.JRh(t.nome),e.R7$(2),e.JRh(t.email),e.R7$(2),e.JRh(t.cpf),e.R7$(2),e.JRh(t.telefone),e.R7$(2),e.JRh(t.pets.length||0)}}function I(o,s){if(1&o&&(e.j41(0,"table",10)(1,"thead")(2,"tr")(3,"th"),e.EFF(4,"Nome"),e.k0s(),e.j41(5,"th"),e.EFF(6,"E-mail"),e.k0s(),e.j41(7,"th"),e.EFF(8,"CPF"),e.k0s(),e.j41(9,"th"),e.EFF(10,"Telefone"),e.k0s(),e.j41(11,"th"),e.EFF(12,"Pets"),e.k0s(),e.j41(13,"th"),e.EFF(14,"A\xe7\xf5es"),e.k0s()()(),e.j41(15,"tbody"),e.DNE(16,y,16,5,"tr",11),e.k0s()()),2&o){const t=e.XpG().ngIf;e.R7$(16),e.Y8G("ngForOf",t)}}function x(o,s){1&o&&(e.j41(0,"div",15),e.EFF(1," Nenhum cliente cadastrado ainda. "),e.k0s())}function S(o,s){if(1&o&&(e.j41(0,"div"),e.DNE(1,I,17,1,"table",8),e.DNE(2,x,2,0,"div",9),e.k0s()),2&o){const t=s.ngIf,r=e.XpG();e.R7$(1),e.Y8G("ngIf",!r.isLoading&&t.length>0),e.R7$(1),e.Y8G("ngIf",!r.isLoading&&0===t.length)}}let D=(()=>{class o{constructor(t,r){this.clienteService=t,this.router=r,this.isLoading=!0,this.error=null}ngOnInit(){this.loadClientes()}loadClientes(){this.isLoading=!0,this.error=null,this.clientes$=this.clienteService.getAllClientes(),this.clientes$.subscribe({next:()=>this.isLoading=!1,error:t=>{this.isLoading=!1,this.error="Falha ao carregar clientes. Tente novamente.",console.error(t)}})}navigateToAdd(){this.router.navigate(["/admin/clientes/novo"])}navigateToEdit(t){this.router.navigate(["/admin/clientes/editar",t])}onDelete(t,r){confirm(`Tem certeza que deseja excluir o cliente "${r}"?`)&&this.clienteService.deleteCliente(t).subscribe({next:()=>{this.loadClientes()},error:n=>{this.error=n.error?.erro||"Falha ao excluir cliente. Verifique se ele possui agendamentos.",console.error(n)}})}static{this.\u0275fac=function(r){return new(r||o)(e.rXU(v),e.rXU(m.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-cliente-list"]],decls:10,vars:5,consts:[[1,"list-container"],[1,"page-header"],[1,"btn-primary","btn-add",3,"click"],["class","loading-indicator",4,"ngIf"],["class","error-message",4,"ngIf"],[4,"ngIf"],[1,"loading-indicator"],[1,"error-message"],["class","data-table",4,"ngIf"],["class","no-data",4,"ngIf"],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"action-buttons"],[1,"btn-edit",3,"click"],[1,"btn-delete",3,"click"],[1,"no-data"]],template:function(r,n){1&r&&(e.j41(0,"div",0)(1,"header",1)(2,"h1"),e.EFF(3,"Gerenciar Clientes"),e.k0s(),e.j41(4,"button",2),e.bIt("click",function(){return n.navigateToAdd()}),e.EFF(5," + Novo Cliente "),e.k0s()(),e.DNE(6,w,2,0,"div",3),e.DNE(7,j,2,1,"div",4),e.DNE(8,S,3,2,"div",5),e.nI1(9,"async"),e.k0s()),2&r&&(e.R7$(6),e.Y8G("ngIf",n.isLoading),e.R7$(1),e.Y8G("ngIf",n.error),e.R7$(1),e.Y8G("ngIf",e.bMT(9,3,n.clientes$)))},dependencies:[l.Sq,l.bT,l.Jj],styles:[".list-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;padding-bottom:1rem;border-bottom:1px solid var(--color-border)}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:600}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background-color:var(--color-white);border-radius:8px;overflow:hidden;box-shadow:var(--shadow-sm)}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;text-align:left;border-bottom:1px solid var(--color-border)}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--color-light);font-weight:600}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#fcfcfc}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 10px;font-size:.875rem}.btn-edit[_ngcontent-%COMP%]{background-color:var(--color-secondary);color:var(--color-white)}.btn-edit[_ngcontent-%COMP%]:hover{background-color:#5a6268}.btn-delete[_ngcontent-%COMP%]{background-color:var(--color-danger);color:var(--color-white)}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#c82333}.loading-indicator[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%], .no-data[_ngcontent-%COMP%]{text-align:center;padding:2rem;font-size:1.1rem;color:var(--color-secondary)}.error-message[_ngcontent-%COMP%]{color:var(--color-danger);background-color:#f8d7da;border:1px solid #f5c6cb;border-radius:4px}"]})}}return o})();var _=d(8829);function $(o,s){if(1&o&&(e.j41(0,"div",17),e.EFF(1),e.k0s()),2&o){const t=e.XpG();e.R7$(1),e.SpI(" ",t.errorMessage," ")}}let T=(()=>{class o{constructor(t,r){this.fb=t,this.petService=r,this.clienteId=null,this.pet=null,this.closeModal=new e.bkB,this.saveSuccess=new e.bkB,this.isEditMode=!1,this.isLoading=!1,this.errorMessage=null,this.petForm=this.fb.group({nome:["",a.k0.required],especie:["",a.k0.required],raca:["",a.k0.required]})}ngOnChanges(t){t.pet&&this.pet?(this.isEditMode=!0,this.petForm.patchValue(this.pet)):(this.isEditMode=!1,this.petForm.reset())}submitForm(){if(this.petForm.invalid||!this.clienteId)return void(this.errorMessage="Todos os campos s\xe3o obrigat\xf3rios.");this.isLoading=!0,this.errorMessage=null;const t={...this.petForm.value,clienteId:this.clienteId};(this.isEditMode&&this.pet?this.petService.updatePet(this.pet.id,t):this.petService.createPet(t)).subscribe({next:()=>{this.isLoading=!1,this.saveSuccess.emit(),this.onClose()},error:n=>{this.isLoading=!1,this.errorMessage=n.error?.erro||"Erro ao salvar o pet."}})}onClose(){this.closeModal.emit()}static{this.\u0275fac=function(r){return new(r||o)(e.rXU(a.ok),e.rXU(_.T))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-pet-form-modal"]],inputs:{clienteId:"clienteId",pet:"pet"},outputs:{closeModal:"closeModal",saveSuccess:"saveSuccess"},features:[e.OA$],decls:27,vars:5,consts:[[1,"modal-overlay",3,"click"],[1,"modal-container"],[1,"modal-header"],[1,"btn-close",3,"click"],[3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"form-group"],["for","pet-nome",1,"form-label"],["id","pet-nome","type","text","formControlName","nome",1,"form-control"],["for","pet-especie",1,"form-label"],["id","pet-especie","type","text","formControlName","especie",1,"form-control"],["for","pet-raca",1,"form-label"],["id","pet-raca","type","text","formControlName","raca",1,"form-control"],["class","error-message",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn-secondary",3,"click"],["type","submit",1,"btn-primary",3,"disabled"],[1,"error-message"]],template:function(r,n){1&r&&(e.j41(0,"div",0),e.bIt("click",function(){return n.onClose()}),e.k0s(),e.j41(1,"div",1)(2,"header",2)(3,"h2"),e.EFF(4),e.k0s(),e.j41(5,"button",3),e.bIt("click",function(){return n.onClose()}),e.EFF(6,"\xd7"),e.k0s()(),e.j41(7,"form",4),e.bIt("ngSubmit",function(){return n.submitForm()}),e.j41(8,"div",5)(9,"div",6)(10,"label",7),e.EFF(11,"Nome do Pet"),e.k0s(),e.nrm(12,"input",8),e.k0s(),e.j41(13,"div",6)(14,"label",9),e.EFF(15,"Esp\xe9cie (ex: Cachorro, Gato)"),e.k0s(),e.nrm(16,"input",10),e.k0s(),e.j41(17,"div",6)(18,"label",11),e.EFF(19,"Ra\xe7a (ex: SRD, Poodle)"),e.k0s(),e.nrm(20,"input",12),e.k0s(),e.DNE(21,$,2,1,"div",13),e.k0s(),e.j41(22,"footer",14)(23,"button",15),e.bIt("click",function(){return n.onClose()}),e.EFF(24," Cancelar "),e.k0s(),e.j41(25,"button",16),e.EFF(26),e.k0s()()()()),2&r&&(e.R7$(4),e.JRh(n.isEditMode?"Editar Pet":"Adicionar Novo Pet"),e.R7$(3),e.Y8G("formGroup",n.petForm),e.R7$(14),e.Y8G("ngIf",n.errorMessage),e.R7$(4),e.Y8G("disabled",n.isLoading||n.petForm.invalid),e.R7$(1),e.SpI(" ",n.isLoading?"Salvando...":"Salvar Pet"," "))},dependencies:[l.bT,a.qT,a.me,a.BC,a.cb,a.j4,a.JD],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#00000080;z-index:1000}.modal-container[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:100%;max-width:500px;background-color:var(--color-white);border-radius:8px;box-shadow:var(--shadow-md);z-index:1001;display:flex;flex-direction:column}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 1.5rem;border-bottom:1px solid var(--color-border)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;color:var(--color-secondary)}.modal-body[_ngcontent-%COMP%]{padding:1.5rem}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.5rem;padding:1rem 1.5rem;border-top:1px solid var(--color-border)}.btn-secondary[_ngcontent-%COMP%]{background-color:var(--color-light);color:var(--color-dark);border:1px solid var(--color-border)}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#e2e6ea}.error-message[_ngcontent-%COMP%]{color:var(--color-danger);margin-top:1rem}"]})}}return o})();function R(o,s){1&o&&(e.j41(0,"div",25),e.EFF(1," E-mail \xe9 obrigat\xf3rio. "),e.k0s())}function L(o,s){1&o&&(e.j41(0,"div",25),e.EFF(1," E-mail inv\xe1lido. "),e.k0s())}function G(o,s){1&o&&(e.j41(0,"div",25),e.EFF(1," Senha \xe9 obrigat\xf3ria. "),e.k0s())}function N(o,s){1&o&&(e.j41(0,"div",25),e.EFF(1," Senha deve ter no m\xednimo 6 caracteres. "),e.k0s())}function V(o,s){if(1&o&&(e.j41(0,"div",6)(1,"label",26),e.EFF(2,"Senha"),e.k0s(),e.nrm(3,"input",27),e.DNE(4,G,2,0,"div",9),e.DNE(5,N,2,0,"div",9),e.k0s()),2&o){const t=e.XpG();let r,n;e.R7$(4),e.Y8G("ngIf",(null==(r=t.clienteForm.get("senha"))?null:r.touched)&&(null==(r=t.clienteForm.get("senha"))?null:r.hasError("required"))),e.R7$(1),e.Y8G("ngIf",(null==(n=t.clienteForm.get("senha"))?null:n.touched)&&(null==(n=t.clienteForm.get("senha"))?null:n.hasError("minlength")))}}function A(o,s){if(1&o&&(e.j41(0,"div",28),e.EFF(1),e.k0s()),2&o){const t=e.XpG();e.R7$(1),e.SpI(" ",t.errorMessage," ")}}function X(o,s){if(1&o){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td",36)(8,"button",37),e.bIt("click",function(){const i=e.eBV(t).$implicit,c=e.XpG(3);return e.Njj(c.openPetModal(i))}),e.EFF(9,"Editar"),e.k0s(),e.j41(10,"button",38),e.bIt("click",function(){const i=e.eBV(t).$implicit,c=e.XpG(3);return e.Njj(c.onDeletePet(i))}),e.EFF(11,"Excluir"),e.k0s()()()}if(2&o){const t=s.$implicit;e.R7$(2),e.JRh(t.nome),e.R7$(2),e.JRh(t.especie),e.R7$(2),e.JRh(t.raca)}}function Y(o,s){if(1&o&&(e.j41(0,"table",34)(1,"thead")(2,"tr")(3,"th"),e.EFF(4,"Nome"),e.k0s(),e.j41(5,"th"),e.EFF(6,"Esp\xe9cie"),e.k0s(),e.j41(7,"th"),e.EFF(8,"Ra\xe7a"),e.k0s(),e.j41(9,"th"),e.EFF(10,"A\xe7\xf5es"),e.k0s()()(),e.j41(11,"tbody"),e.DNE(12,X,12,3,"tr",35),e.k0s()()),2&o){const t=e.XpG(2);e.R7$(12),e.Y8G("ngForOf",t.cliente.pets)}}function U(o,s){1&o&&(e.j41(0,"div",39),e.EFF(1," Este cliente ainda n\xe3o possui pets cadastrados. "),e.k0s())}function B(o,s){if(1&o){const t=e.RV6();e.j41(0,"section",29)(1,"header",30)(2,"h2"),e.EFF(3),e.k0s(),e.j41(4,"button",31),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.openPetModal(null))}),e.EFF(5," + Adicionar Pet "),e.k0s()(),e.DNE(6,Y,13,1,"table",32),e.DNE(7,U,2,0,"ng-template",null,33,e.C5r),e.k0s()}if(2&o){const t=e.sdS(8),r=e.XpG();e.R7$(3),e.SpI("Pets Cadastrados (",r.cliente.pets.length,")"),e.R7$(3),e.Y8G("ngIf",r.cliente.pets.length>0)("ngIfElse",t)}}function z(o,s){if(1&o){const t=e.RV6();e.j41(0,"app-pet-form-modal",40),e.bIt("closeModal",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closePetModal())})("saveSuccess",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.handlePetSave())}),e.k0s()}if(2&o){const t=e.XpG();e.Y8G("clienteId",t.clienteId)("pet",t.currentPetToEdit)}}let b=(()=>{class o{constructor(t,r,n,i,c){this.fb=t,this.clienteService=r,this.petService=n,this.router=i,this.route=c,this.isEditMode=!1,this.isLoading=!1,this.errorMessage=null,this.clienteId=null,this.cliente=null,this.isPetModalOpen=!1,this.currentPetToEdit=null,this.clienteForm=this.fb.group({nome:["",a.k0.required],email:["",[a.k0.required,a.k0.email]],senha:["",[a.k0.required,a.k0.minLength(6)]],cpf:["",[a.k0.required]],telefone:["",a.k0.required],endereco:[""]})}ngOnInit(){const t=this.route.snapshot.paramMap.get("id");t&&(this.isEditMode=!0,this.clienteId=+t,this.loadClienteData(),this.clienteForm.get("senha")?.clearValidators(),this.clienteForm.get("senha")?.updateValueAndValidity())}loadClienteData(){this.clienteId&&(this.isLoading=!0,this.clienteService.getClienteById(this.clienteId).subscribe({next:t=>{this.isLoading=!1,this.cliente=t,this.clienteForm.patchValue({nome:t.nome,email:t.email,cpf:t.cpf,telefone:t.telefone,endereco:t.endereco})},error:t=>{this.isLoading=!1,this.errorMessage="Cliente n\xe3o encontrado.",this.router.navigate(["/admin/clientes"])}}))}onSubmit(){if(this.clienteForm.invalid)return void(this.errorMessage="Por favor, corrija os erros no formul\xe1rio.");this.isLoading=!0,this.errorMessage=null;const t=this.clienteForm.value;(this.isEditMode?this.clienteService.updateCliente(this.clienteId,{nome:t.nome,cpf:t.cpf,telefone:t.telefone,endereco:t.endereco}):this.clienteService.createCliente(t)).subscribe({next:()=>{this.isLoading=!1,this.router.navigate(["/admin/clientes"])},error:n=>{this.isLoading=!1,this.errorMessage=n.error?.erro||"Erro ao salvar cliente. Verifique o CPF e E-mail."}})}openPetModal(t=null){this.currentPetToEdit=t,this.isPetModalOpen=!0}closePetModal(){this.isPetModalOpen=!1,this.currentPetToEdit=null}handlePetSave(){this.loadClienteData()}onDeletePet(t){confirm(`Tem certeza que deseja excluir o pet "${t.nome}"?`)&&this.petService.deletePet(t.id).subscribe({next:()=>this.loadClienteData(),error:r=>alert("Erro ao excluir pet.")})}goBack(){this.router.navigate(["/admin/clientes"])}static{this.\u0275fac=function(r){return new(r||o)(e.rXU(a.ok),e.rXU(v),e.rXU(_.T),e.rXU(m.Ix),e.rXU(m.nX))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-cliente-form"]],decls:46,vars:11,consts:[[1,"form-container"],[1,"form-header"],[1,"btn-back",3,"click"],[1,"card",3,"formGroup","ngSubmit"],[1,"form-section"],[1,"form-row"],[1,"form-group"],["for","email",1,"form-label"],["id","email","type","email","formControlName","email",1,"form-control",3,"readonly"],["class","text-danger",4,"ngIf"],["class","form-group",4,"ngIf"],["for","nome",1,"form-label"],["id","nome","type","text","formControlName","nome",1,"form-control"],["for","cpf",1,"form-label"],["id","cpf","type","text","formControlName","cpf",1,"form-control"],["for","telefone",1,"form-label"],["id","telefone","type","text","formControlName","telefone",1,"form-control"],["for","endereco",1,"form-label"],["id","endereco","type","text","formControlName","endereco",1,"form-control"],[1,"form-actions"],["class","error-message",4,"ngIf"],["type","button",1,"btn-secondary",3,"click"],["type","submit",1,"btn-primary",3,"disabled"],["class","card pet-section",4,"ngIf"],[3,"clienteId","pet","closeModal","saveSuccess",4,"ngIf"],[1,"text-danger"],["for","senha",1,"form-label"],["id","senha","type","password","formControlName","senha",1,"form-control"],[1,"error-message"],[1,"card","pet-section"],[1,"page-header"],[1,"btn-primary",3,"click"],["class","data-table",4,"ngIf","ngIfElse"],["noPets",""],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"action-buttons"],[1,"btn-edit",3,"click"],[1,"btn-delete",3,"click"],[1,"no-data"],[3,"clienteId","pet","closeModal","saveSuccess"]],template:function(r,n){if(1&r&&(e.j41(0,"div",0)(1,"header",1)(2,"button",2),e.bIt("click",function(){return n.goBack()}),e.EFF(3," \u2190 Voltar para a Lista "),e.k0s(),e.j41(4,"h1"),e.EFF(5),e.k0s()(),e.j41(6,"form",3),e.bIt("ngSubmit",function(){return n.onSubmit()}),e.j41(7,"fieldset",4)(8,"legend"),e.EFF(9,"Dados de Acesso"),e.k0s(),e.j41(10,"div",5)(11,"div",6)(12,"label",7),e.EFF(13,"E-mail (Login)"),e.k0s(),e.nrm(14,"input",8),e.DNE(15,R,2,0,"div",9),e.DNE(16,L,2,0,"div",9),e.k0s(),e.DNE(17,V,6,2,"div",10),e.k0s()(),e.j41(18,"fieldset",4)(19,"legend"),e.EFF(20,"Dados Pessoais"),e.k0s(),e.j41(21,"div",6)(22,"label",11),e.EFF(23,"Nome Completo"),e.k0s(),e.nrm(24,"input",12),e.k0s(),e.j41(25,"div",5)(26,"div",6)(27,"label",13),e.EFF(28,"CPF"),e.k0s(),e.nrm(29,"input",14),e.k0s(),e.j41(30,"div",6)(31,"label",15),e.EFF(32,"Telefone"),e.k0s(),e.nrm(33,"input",16),e.k0s()(),e.j41(34,"div",6)(35,"label",17),e.EFF(36,"Endere\xe7o (Opcional)"),e.k0s(),e.nrm(37,"input",18),e.k0s()(),e.j41(38,"footer",19),e.DNE(39,A,2,1,"div",20),e.j41(40,"button",21),e.bIt("click",function(){return n.goBack()}),e.EFF(41,"Cancelar"),e.k0s(),e.j41(42,"button",22),e.EFF(43),e.k0s()()(),e.DNE(44,B,9,3,"section",23),e.k0s(),e.DNE(45,z,1,2,"app-pet-form-modal",24)),2&r){let i,c;e.R7$(5),e.JRh(n.isEditMode?"Editar Cliente":"Novo Cliente"),e.R7$(1),e.Y8G("formGroup",n.clienteForm),e.R7$(8),e.Y8G("readonly",n.isEditMode),e.R7$(1),e.Y8G("ngIf",(null==(i=n.clienteForm.get("email"))?null:i.touched)&&(null==(i=n.clienteForm.get("email"))?null:i.hasError("required"))),e.R7$(1),e.Y8G("ngIf",(null==(c=n.clienteForm.get("email"))?null:c.touched)&&(null==(c=n.clienteForm.get("email"))?null:c.hasError("email"))),e.R7$(1),e.Y8G("ngIf",!n.isEditMode),e.R7$(22),e.Y8G("ngIf",n.errorMessage),e.R7$(3),e.Y8G("disabled",n.isLoading||n.clienteForm.invalid),e.R7$(1),e.SpI(" ",n.isLoading?"Salvando...":n.isEditMode?"Salvar Altera\xe7\xf5es":"Cadastrar Cliente"," "),e.R7$(1),e.Y8G("ngIf",n.isEditMode&&n.cliente),e.R7$(1),e.Y8G("ngIf",n.isPetModalOpen)}},dependencies:[l.Sq,l.bT,a.qT,a.me,a.BC,a.cb,a.j4,a.JD,T],styles:[".form-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto}.form-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;margin-bottom:1.5rem}.btn-back[_ngcontent-%COMP%]{background:none;border:none;color:var(--color-primary);font-weight:500}.btn-back[_ngcontent-%COMP%]:hover{text-decoration:underline}.form-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:600}.card[_ngcontent-%COMP%]{background-color:var(--color-white);border-radius:8px;box-shadow:var(--shadow-sm);padding:2rem}.form-section[_ngcontent-%COMP%]{border:none;padding:0;margin-bottom:2rem}.form-section[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:1px solid var(--color-border);width:100%}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;gap:1rem;border-top:1px solid var(--color-border);padding-top:1.5rem;margin-top:1.5rem}.error-message[_ngcontent-%COMP%]{color:var(--color-danger);margin-right:auto}.btn-secondary[_ngcontent-%COMP%]{background-color:var(--color-light);color:var(--color-dark);border:1px solid var(--color-border)}.pet-section[_ngcontent-%COMP%]{margin-top:2rem}.pet-section[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:1px solid var(--color-border)}.pet-section[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.no-data[_ngcontent-%COMP%]{text-align:center;padding:1rem}"]})}}return o})();var C=d(7949);function q(o,s){1&o&&(e.j41(0,"div",6),e.EFF(1," Carregando... "),e.k0s())}function J(o,s){if(1&o&&(e.j41(0,"div",7),e.EFF(1),e.k0s()),2&o){const t=e.XpG();e.R7$(1),e.SpI(" ",t.error," ")}}function H(o,s){if(1&o){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.nI1(5,"slice"),e.k0s(),e.j41(6,"td"),e.EFF(7),e.nI1(8,"currency"),e.k0s(),e.j41(9,"td",12)(10,"button",13),e.bIt("click",function(){const i=e.eBV(t).$implicit,c=e.XpG(3);return e.Njj(c.navigateToEdit(i.id))}),e.EFF(11," Editar "),e.k0s(),e.j41(12,"button",14),e.bIt("click",function(){const i=e.eBV(t).$implicit,c=e.XpG(3);return e.Njj(c.onDelete(i.id,i.nome))}),e.EFF(13," Excluir "),e.k0s()()()}if(2&o){const t=s.$implicit;e.R7$(2),e.JRh(t.nome),e.R7$(2),e.Lme("",e.brH(5,4,t.descricao||"",0,100),"",(t.descricao||"").length>100?"...":"",""),e.R7$(3),e.JRh(e.i5U(8,8,t.preco,"BRL"))}}function W(o,s){if(1&o&&(e.j41(0,"table",10)(1,"thead")(2,"tr")(3,"th"),e.EFF(4,"Nome"),e.k0s(),e.j41(5,"th"),e.EFF(6,"Descri\xe7\xe3o"),e.k0s(),e.j41(7,"th"),e.EFF(8,"Pre\xe7o"),e.k0s(),e.j41(9,"th"),e.EFF(10,"A\xe7\xf5es"),e.k0s()()(),e.j41(11,"tbody"),e.DNE(12,H,14,11,"tr",11),e.k0s()()),2&o){const t=e.XpG().ngIf;e.R7$(12),e.Y8G("ngForOf",t)}}function Q(o,s){1&o&&(e.j41(0,"div",15),e.EFF(1," Nenhum servi\xe7o cadastrado ainda. "),e.k0s())}function K(o,s){if(1&o&&(e.j41(0,"div"),e.DNE(1,W,13,1,"table",8),e.DNE(2,Q,2,0,"div",9),e.k0s()),2&o){const t=s.ngIf,r=e.XpG();e.R7$(1),e.Y8G("ngIf",!r.isLoading&&t.length>0),e.R7$(1),e.Y8G("ngIf",!r.isLoading&&0===t.length)}}let Z=(()=>{class o{constructor(t,r){this.servicoService=t,this.router=r,this.isLoading=!0,this.error=null}ngOnInit(){this.loadServicos()}loadServicos(){this.isLoading=!0,this.error=null,this.servicos$=this.servicoService.getAllServicos(),this.servicos$.subscribe({next:()=>this.isLoading=!1,error:t=>{this.isLoading=!1,this.error="Falha ao carregar servi\xe7os. Tente novamente.",console.error(t)}})}navigateToAdd(){this.router.navigate(["/admin/servicos/novo"])}navigateToEdit(t){this.router.navigate(["/admin/servicos/editar",t])}onDelete(t,r){confirm(`Tem certeza que deseja excluir o servi\xe7o "${r}"?`)&&this.servicoService.deleteServico(t).subscribe({next:()=>{this.loadServicos()},error:n=>{this.error=n.error?.erro||"Falha ao excluir. Verifique se o servi\xe7o est\xe1 vinculado a agendamentos.",console.error(n)}})}static{this.\u0275fac=function(r){return new(r||o)(e.rXU(C.h),e.rXU(m.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-servico-list"]],decls:10,vars:5,consts:[[1,"list-container"],[1,"page-header"],[1,"btn-primary","btn-add",3,"click"],["class","loading-indicator",4,"ngIf"],["class","error-message",4,"ngIf"],[4,"ngIf"],[1,"loading-indicator"],[1,"error-message"],["class","data-table",4,"ngIf"],["class","no-data",4,"ngIf"],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"action-buttons"],[1,"btn-edit",3,"click"],[1,"btn-delete",3,"click"],[1,"no-data"]],template:function(r,n){1&r&&(e.j41(0,"div",0)(1,"header",1)(2,"h1"),e.EFF(3,"Gerenciar Servi\xe7os"),e.k0s(),e.j41(4,"button",2),e.bIt("click",function(){return n.navigateToAdd()}),e.EFF(5," + Novo Servi\xe7o "),e.k0s()(),e.DNE(6,q,2,0,"div",3),e.DNE(7,J,2,1,"div",4),e.DNE(8,K,3,2,"div",5),e.nI1(9,"async"),e.k0s()),2&r&&(e.R7$(6),e.Y8G("ngIf",n.isLoading),e.R7$(1),e.Y8G("ngIf",n.error),e.R7$(1),e.Y8G("ngIf",e.bMT(9,3,n.servicos$)))},dependencies:[l.Sq,l.bT,l.Jj,l.P9,l.oe],styles:[".list-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;padding-bottom:1rem;border-bottom:1px solid var(--color-border)}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:600}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background-color:var(--color-white);border-radius:8px;overflow:hidden;box-shadow:var(--shadow-sm)}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;text-align:left;border-bottom:1px solid var(--color-border)}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--color-light);font-weight:600}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#fcfcfc}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 10px;font-size:.875rem}.btn-edit[_ngcontent-%COMP%]{background-color:var(--color-secondary);color:var(--color-white)}.btn-edit[_ngcontent-%COMP%]:hover{background-color:#5a6268}.btn-delete[_ngcontent-%COMP%]{background-color:var(--color-danger);color:var(--color-white)}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#c82333}.loading-indicator[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%], .no-data[_ngcontent-%COMP%]{text-align:center;padding:2rem;font-size:1.1rem;color:var(--color-secondary)}.error-message[_ngcontent-%COMP%]{color:var(--color-danger);background-color:#f8d7da;border:1px solid #f5c6cb;border-radius:4px}"]})}}return o})();function ee(o,s){1&o&&(e.j41(0,"div",17),e.EFF(1," Nome \xe9 obrigat\xf3rio. "),e.k0s())}function te(o,s){1&o&&(e.j41(0,"div",17),e.EFF(1," Pre\xe7o \xe9 obrigat\xf3rio. "),e.k0s())}function oe(o,s){1&o&&(e.j41(0,"div",17),e.EFF(1," Pre\xe7o deve ser positivo. "),e.k0s())}function ne(o,s){if(1&o&&(e.j41(0,"div",18),e.EFF(1),e.k0s()),2&o){const t=e.XpG();e.R7$(1),e.SpI(" ",t.errorMessage," ")}}let F=(()=>{class o{constructor(t,r,n,i){this.fb=t,this.servicoService=r,this.router=n,this.route=i,this.isEditMode=!1,this.isLoading=!1,this.errorMessage=null,this.servicoId=null,this.servicoForm=this.fb.group({nome:["",a.k0.required],descricao:[""],preco:[null,[a.k0.required,a.k0.min(.01)]]})}ngOnInit(){const t=this.route.snapshot.paramMap.get("id");t&&(this.isEditMode=!0,this.servicoId=+t,this.loadServicoData())}loadServicoData(){this.servicoId&&(this.isLoading=!0,this.servicoService.getServicoById(this.servicoId).subscribe({next:t=>{this.isLoading=!1,this.servicoForm.patchValue(t)},error:t=>{this.isLoading=!1,this.errorMessage="Servi\xe7o n\xe3o encontrado.",this.router.navigate(["/admin/servicos"])}}))}onSubmit(){if(this.servicoForm.invalid)return void(this.errorMessage="Por favor, corrija os erros no formul\xe1rio.");this.isLoading=!0,this.errorMessage=null;const t=this.servicoForm.value;(this.isEditMode?this.servicoService.updateServico(this.servicoId,t):this.servicoService.createServico(t)).subscribe({next:()=>{this.isLoading=!1,this.router.navigate(["/admin/servicos"])},error:n=>{this.isLoading=!1,this.errorMessage=n.error?.erro||"Erro ao salvar servi\xe7o."}})}goBack(){this.router.navigate(["/admin/servicos"])}static{this.\u0275fac=function(r){return new(r||o)(e.rXU(a.ok),e.rXU(C.h),e.rXU(m.Ix),e.rXU(m.nX))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-servico-form"]],decls:31,vars:8,consts:[[1,"form-container"],[1,"form-header"],[1,"btn-back",3,"click"],[1,"card",3,"formGroup","ngSubmit"],[1,"form-section"],[1,"form-group"],["for","nome",1,"form-label"],["id","nome","type","text","formControlName","nome",1,"form-control"],["class","text-danger",4,"ngIf"],["for","preco",1,"form-label"],["id","preco","type","number","formControlName","preco","min","0.01","step","0.01","placeholder","ex: 50.00",1,"form-control"],["for","descricao",1,"form-label"],["id","descricao","formControlName","descricao","rows","4",1,"form-control"],[1,"form-actions"],["class","error-message",4,"ngIf"],["type","button",1,"btn-secondary",3,"click"],["type","submit",1,"btn-primary",3,"disabled"],[1,"text-danger"],[1,"error-message"]],template:function(r,n){if(1&r&&(e.j41(0,"div",0)(1,"header",1)(2,"button",2),e.bIt("click",function(){return n.goBack()}),e.EFF(3," \u2190 Voltar para a Lista "),e.k0s(),e.j41(4,"h1"),e.EFF(5),e.k0s()(),e.j41(6,"form",3),e.bIt("ngSubmit",function(){return n.onSubmit()}),e.j41(7,"fieldset",4)(8,"legend"),e.EFF(9,"Dados do Servi\xe7o"),e.k0s(),e.j41(10,"div",5)(11,"label",6),e.EFF(12,"Nome do Servi\xe7o"),e.k0s(),e.nrm(13,"input",7),e.DNE(14,ee,2,0,"div",8),e.k0s(),e.j41(15,"div",5)(16,"label",9),e.EFF(17,"Pre\xe7o (R$)"),e.k0s(),e.nrm(18,"input",10),e.DNE(19,te,2,0,"div",8),e.DNE(20,oe,2,0,"div",8),e.k0s(),e.j41(21,"div",5)(22,"label",11),e.EFF(23,"Descri\xe7\xe3o (Opcional)"),e.k0s(),e.nrm(24,"textarea",12),e.k0s()(),e.j41(25,"footer",13),e.DNE(26,ne,2,1,"div",14),e.j41(27,"button",15),e.bIt("click",function(){return n.goBack()}),e.EFF(28,"Cancelar"),e.k0s(),e.j41(29,"button",16),e.EFF(30),e.k0s()()()()),2&r){let i,c,u;e.R7$(5),e.JRh(n.isEditMode?"Editar Servi\xe7o":"Novo Servi\xe7o"),e.R7$(1),e.Y8G("formGroup",n.servicoForm),e.R7$(8),e.Y8G("ngIf",(null==(i=n.servicoForm.get("nome"))?null:i.touched)&&(null==(i=n.servicoForm.get("nome"))?null:i.hasError("required"))),e.R7$(5),e.Y8G("ngIf",(null==(c=n.servicoForm.get("preco"))?null:c.touched)&&(null==(c=n.servicoForm.get("preco"))?null:c.hasError("required"))),e.R7$(1),e.Y8G("ngIf",(null==(u=n.servicoForm.get("preco"))?null:u.touched)&&(null==(u=n.servicoForm.get("preco"))?null:u.hasError("min"))),e.R7$(6),e.Y8G("ngIf",n.errorMessage),e.R7$(3),e.Y8G("disabled",n.isLoading||n.servicoForm.invalid),e.R7$(1),e.SpI(" ",n.isLoading?"Salvando...":n.isEditMode?"Salvar Altera\xe7\xf5es":"Cadastrar Servi\xe7o"," ")}},dependencies:[l.bT,a.qT,a.me,a.Q0,a.BC,a.cb,a.VZ,a.j4,a.JD],styles:[".form-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto}.form-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;margin-bottom:1.5rem}.btn-back[_ngcontent-%COMP%]{background:none;border:none;color:var(--color-primary);font-weight:500}.btn-back[_ngcontent-%COMP%]:hover{text-decoration:underline}.form-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:600}.card[_ngcontent-%COMP%]{background-color:var(--color-white);border-radius:8px;box-shadow:var(--shadow-sm);padding:2rem}.form-section[_ngcontent-%COMP%]{border:none;padding:0;margin-bottom:2rem}.form-section[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:1px solid var(--color-border);width:100%}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;gap:1rem;border-top:1px solid var(--color-border);padding-top:1.5rem;margin-top:1.5rem}.error-message[_ngcontent-%COMP%]{color:var(--color-danger);margin-right:auto}.btn-secondary[_ngcontent-%COMP%]{background-color:var(--color-light);color:var(--color-dark);border:1px solid var(--color-border)}.pet-section[_ngcontent-%COMP%]{margin-top:2rem}.pet-section[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:1px solid var(--color-border)}.pet-section[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.no-data[_ngcontent-%COMP%]{text-align:center;padding:1rem}"]})}}return o})(),k=(()=>{class o{constructor(t){this.http=t,this.apiUrl=`${f.c.apiUrl}/api/produtos`}getAllProdutos(){return this.http.get(this.apiUrl)}getProdutoById(t){return this.http.get(`${this.apiUrl}/${t}`)}createProduto(t){return this.http.post(this.apiUrl,t)}updateProduto(t,r){return this.http.put(`${this.apiUrl}/${t}`,r)}deleteProduto(t){return this.http.delete(`${this.apiUrl}/${t}`)}static{this.\u0275fac=function(r){return new(r||o)(e.KVO(g.Qq))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function re(o,s){1&o&&(e.j41(0,"div",6),e.EFF(1," Carregando... "),e.k0s())}function ie(o,s){if(1&o&&(e.j41(0,"div",7),e.EFF(1),e.k0s()),2&o){const t=e.XpG();e.R7$(1),e.SpI(" ",t.error," ")}}function ae(o,s){if(1&o){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.nI1(7,"currency"),e.k0s(),e.j41(8,"td"),e.EFF(9),e.nI1(10,"currency"),e.k0s(),e.j41(11,"td",12)(12,"button",13),e.bIt("click",function(){const i=e.eBV(t).$implicit,c=e.XpG(3);return e.Njj(c.navigateToEdit(i.id))}),e.EFF(13," Editar "),e.k0s(),e.j41(14,"button",14),e.bIt("click",function(){const i=e.eBV(t).$implicit,c=e.XpG(3);return e.Njj(c.onDelete(i.id,i.nome))}),e.EFF(15," Excluir "),e.k0s()()()}if(2&o){const t=s.$implicit;e.R7$(2),e.JRh(t.nome),e.R7$(2),e.JRh(t.qtdEstoque),e.R7$(2),e.JRh(e.i5U(7,4,t.precoCusto,"BRL")),e.R7$(3),e.JRh(e.i5U(10,7,t.precoVenda,"BRL"))}}function se(o,s){if(1&o&&(e.j41(0,"table",10)(1,"thead")(2,"tr")(3,"th"),e.EFF(4,"Nome"),e.k0s(),e.j41(5,"th"),e.EFF(6,"Estoque"),e.k0s(),e.j41(7,"th"),e.EFF(8,"Pre\xe7o de Custo"),e.k0s(),e.j41(9,"th"),e.EFF(10,"Pre\xe7o de Venda"),e.k0s(),e.j41(11,"th"),e.EFF(12,"A\xe7\xf5es"),e.k0s()()(),e.j41(13,"tbody"),e.DNE(14,ae,16,10,"tr",11),e.k0s()()),2&o){const t=e.XpG().ngIf;e.R7$(14),e.Y8G("ngForOf",t)}}function ce(o,s){1&o&&(e.j41(0,"div",15),e.EFF(1," Nenhum produto cadastrado ainda. "),e.k0s())}function le(o,s){if(1&o&&(e.j41(0,"div"),e.DNE(1,se,15,1,"table",8),e.DNE(2,ce,2,0,"div",9),e.k0s()),2&o){const t=s.ngIf,r=e.XpG();e.R7$(1),e.Y8G("ngIf",!r.isLoading&&t.length>0),e.R7$(1),e.Y8G("ngIf",!r.isLoading&&0===t.length)}}let de=(()=>{class o{constructor(t,r){this.produtoService=t,this.router=r,this.isLoading=!0,this.error=null}ngOnInit(){this.loadProdutos()}loadProdutos(){this.isLoading=!0,this.error=null,this.produtos$=this.produtoService.getAllProdutos(),this.produtos$.subscribe({next:()=>this.isLoading=!1,error:t=>{this.isLoading=!1,this.error="Falha ao carregar produtos. Tente novamente.",console.error(t)}})}navigateToAdd(){this.router.navigate(["/admin/produtos/novo"])}navigateToEdit(t){this.router.navigate(["/admin/produtos/editar",t])}onDelete(t,r){confirm(`Tem certeza que deseja excluir o produto "${r}"?`)&&this.produtoService.deleteProduto(t).subscribe({next:()=>{this.loadProdutos()},error:n=>{this.error=n.error?.erro||"Falha ao excluir produto.",console.error(n)}})}static{this.\u0275fac=function(r){return new(r||o)(e.rXU(k),e.rXU(m.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-produto-list"]],decls:10,vars:5,consts:[[1,"list-container"],[1,"page-header"],[1,"btn-primary","btn-add",3,"click"],["class","loading-indicator",4,"ngIf"],["class","error-message",4,"ngIf"],[4,"ngIf"],[1,"loading-indicator"],[1,"error-message"],["class","data-table",4,"ngIf"],["class","no-data",4,"ngIf"],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"action-buttons"],[1,"btn-edit",3,"click"],[1,"btn-delete",3,"click"],[1,"no-data"]],template:function(r,n){1&r&&(e.j41(0,"div",0)(1,"header",1)(2,"h1"),e.EFF(3,"Gerenciar Produtos"),e.k0s(),e.j41(4,"button",2),e.bIt("click",function(){return n.navigateToAdd()}),e.EFF(5," + Novo Produto "),e.k0s()(),e.DNE(6,re,2,0,"div",3),e.DNE(7,ie,2,1,"div",4),e.DNE(8,le,3,2,"div",5),e.nI1(9,"async"),e.k0s()),2&r&&(e.R7$(6),e.Y8G("ngIf",n.isLoading),e.R7$(1),e.Y8G("ngIf",n.error),e.R7$(1),e.Y8G("ngIf",e.bMT(9,3,n.produtos$)))},dependencies:[l.Sq,l.bT,l.Jj,l.oe],styles:[".list-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;padding-bottom:1rem;border-bottom:1px solid var(--color-border)}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:600}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background-color:var(--color-white);border-radius:8px;overflow:hidden;box-shadow:var(--shadow-sm)}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;text-align:left;border-bottom:1px solid var(--color-border)}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--color-light);font-weight:600}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#fcfcfc}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 10px;font-size:.875rem}.btn-edit[_ngcontent-%COMP%]{background-color:var(--color-secondary);color:var(--color-white)}.btn-edit[_ngcontent-%COMP%]:hover{background-color:#5a6268}.btn-delete[_ngcontent-%COMP%]{background-color:var(--color-danger);color:var(--color-white)}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#c82333}.loading-indicator[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%], .no-data[_ngcontent-%COMP%]{text-align:center;padding:2rem;font-size:1.1rem;color:var(--color-secondary)}.error-message[_ngcontent-%COMP%]{color:var(--color-danger);background-color:#f8d7da;border:1px solid #f5c6cb;border-radius:4px}"]})}}return o})();function me(o,s){if(1&o&&(e.j41(0,"div",21),e.EFF(1),e.k0s()),2&o){const t=e.XpG();e.R7$(1),e.SpI(" ",t.errorMessage," ")}}let E=(()=>{class o{constructor(t,r,n,i){this.fb=t,this.produtoService=r,this.router=n,this.route=i,this.isEditMode=!1,this.isLoading=!1,this.errorMessage=null,this.produtoId=null,this.produtoForm=this.fb.group({nome:["",a.k0.required],descricao:[""],precoCusto:[null,[a.k0.required,a.k0.min(0)]],precoVenda:[null,[a.k0.required,a.k0.min(.01)]],qtdEstoque:[null,[a.k0.required,a.k0.min(0)]]})}ngOnInit(){const t=this.route.snapshot.paramMap.get("id");t&&(this.isEditMode=!0,this.produtoId=+t,this.loadProdutoData())}loadProdutoData(){this.produtoId&&(this.isLoading=!0,this.produtoService.getProdutoById(this.produtoId).subscribe({next:t=>{this.isLoading=!1,this.produtoForm.patchValue(t)},error:t=>{this.isLoading=!1,this.errorMessage="Produto n\xe3o encontrado.",this.router.navigate(["/admin/produtos"])}}))}onSubmit(){if(this.produtoForm.invalid)return void(this.errorMessage="Por favor, corrija os erros no formul\xe1rio.");this.isLoading=!0,this.errorMessage=null;const t=this.produtoForm.value;(this.isEditMode?this.produtoService.updateProduto(this.produtoId,t):this.produtoService.createProduto(t)).subscribe({next:()=>{this.isLoading=!1,this.router.navigate(["/admin/produtos"])},error:n=>{this.isLoading=!1,this.errorMessage=n.error?.erro||"Erro ao salvar produto."}})}goBack(){this.router.navigate(["/admin/produtos"])}static{this.\u0275fac=function(r){return new(r||o)(e.rXU(a.ok),e.rXU(k),e.rXU(m.Ix),e.rXU(m.nX))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-produto-form"]],decls:37,vars:5,consts:[[1,"form-container"],[1,"form-header"],[1,"btn-back",3,"click"],[1,"card",3,"formGroup","ngSubmit"],[1,"form-section"],[1,"form-group"],["for","nome",1,"form-label"],["id","nome","type","text","formControlName","nome",1,"form-control"],[1,"form-row"],["for","precoCusto",1,"form-label"],["id","precoCusto","type","number","formControlName","precoCusto","min","0","step","0.01","placeholder","ex: 20.00",1,"form-control"],["for","precoVenda",1,"form-label"],["id","precoVenda","type","number","formControlName","precoVenda","min","0.01","step","0.01","placeholder","ex: 35.00",1,"form-control"],["for","qtdEstoque",1,"form-label"],["id","qtdEstoque","type","number","formControlName","qtdEstoque","min","0","step","1","placeholder","ex: 100",1,"form-control"],["for","descricao",1,"form-label"],["id","descricao","formControlName","descricao","rows","4",1,"form-control"],[1,"form-actions"],["class","error-message",4,"ngIf"],["type","button",1,"btn-secondary",3,"click"],["type","submit",1,"btn-primary",3,"disabled"],[1,"error-message"]],template:function(r,n){1&r&&(e.j41(0,"div",0)(1,"header",1)(2,"button",2),e.bIt("click",function(){return n.goBack()}),e.EFF(3," \u2190 Voltar para a Lista "),e.k0s(),e.j41(4,"h1"),e.EFF(5),e.k0s()(),e.j41(6,"form",3),e.bIt("ngSubmit",function(){return n.onSubmit()}),e.j41(7,"fieldset",4)(8,"legend"),e.EFF(9,"Dados do Produto"),e.k0s(),e.j41(10,"div",5)(11,"label",6),e.EFF(12,"Nome do Produto"),e.k0s(),e.nrm(13,"input",7),e.k0s(),e.j41(14,"div",8)(15,"div",5)(16,"label",9),e.EFF(17,"Pre\xe7o de Custo (R$)"),e.k0s(),e.nrm(18,"input",10),e.k0s(),e.j41(19,"div",5)(20,"label",11),e.EFF(21,"Pre\xe7o de Venda (R$)"),e.k0s(),e.nrm(22,"input",12),e.k0s(),e.j41(23,"div",5)(24,"label",13),e.EFF(25,"Estoque (Unid.)"),e.k0s(),e.nrm(26,"input",14),e.k0s()(),e.j41(27,"div",5)(28,"label",15),e.EFF(29,"Descri\xe7\xe3o (Opcional)"),e.k0s(),e.nrm(30,"textarea",16),e.k0s()(),e.j41(31,"footer",17),e.DNE(32,me,2,1,"div",18),e.j41(33,"button",19),e.bIt("click",function(){return n.goBack()}),e.EFF(34,"Cancelar"),e.k0s(),e.j41(35,"button",20),e.EFF(36),e.k0s()()()()),2&r&&(e.R7$(5),e.JRh(n.isEditMode?"Editar Produto":"Novo Produto"),e.R7$(1),e.Y8G("formGroup",n.produtoForm),e.R7$(26),e.Y8G("ngIf",n.errorMessage),e.R7$(3),e.Y8G("disabled",n.isLoading||n.produtoForm.invalid),e.R7$(1),e.SpI(" ",n.isLoading?"Salvando...":n.isEditMode?"Salvar Altera\xe7\xf5es":"Cadastrar Produto"," "))},dependencies:[l.bT,a.qT,a.me,a.Q0,a.BC,a.cb,a.VZ,a.j4,a.JD],styles:[".form-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto}.form-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;margin-bottom:1.5rem}.btn-back[_ngcontent-%COMP%]{background:none;border:none;color:var(--color-primary);font-weight:500}.btn-back[_ngcontent-%COMP%]:hover{text-decoration:underline}.form-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:600}.card[_ngcontent-%COMP%]{background-color:var(--color-white);border-radius:8px;box-shadow:var(--shadow-sm);padding:2rem}.form-section[_ngcontent-%COMP%]{border:none;padding:0;margin-bottom:2rem}.form-section[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:1px solid var(--color-border);width:100%}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;gap:1rem;border-top:1px solid var(--color-border);padding-top:1.5rem;margin-top:1.5rem}.error-message[_ngcontent-%COMP%]{color:var(--color-danger);margin-right:auto}.btn-secondary[_ngcontent-%COMP%]{background-color:var(--color-light);color:var(--color-dark);border:1px solid var(--color-border)}.pet-section[_ngcontent-%COMP%]{margin-top:2rem}.pet-section[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:1px solid var(--color-border)}.pet-section[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.no-data[_ngcontent-%COMP%]{text-align:center;padding:1rem}"]})}}return o})();var p=d(6683),pe=d(6190),ue=d(1584),ge=d(3859),he=d(959),fe=d(1413),ve=d(1245);function _e(o,s){1&o&&(e.j41(0,"div",12),e.EFF(1," Carregando agendamentos... "),e.k0s())}function be(o,s){if(1&o){const t=e.RV6();e.j41(0,"mwl-calendar-month-view",13),e.bIt("dayClicked",function(n){e.eBV(t);const i=e.XpG();return i.setView(i.CalendarView.Day),e.Njj(i.viewDate=n.day.date)}),e.k0s()}if(2&o){const t=e.XpG();e.Y8G("viewDate",t.viewDate)("events",t.events)("refresh",t.refresh)("locale",t.locale)}}function Ce(o,s){if(1&o&&e.nrm(0,"mwl-calendar-week-view",14),2&o){const t=e.XpG();e.Y8G("viewDate",t.viewDate)("events",t.events)("refresh",t.refresh)("locale",t.locale)}}function Fe(o,s){if(1&o&&e.nrm(0,"mwl-calendar-day-view",14),2&o){const t=e.XpG();e.Y8G("viewDate",t.viewDate)("events",t.events)("refresh",t.refresh)("locale",t.locale)}}const P={AGENDADO:{primary:"#007bff",secondary:"#D1E7FD"},CONCLUIDO:{primary:"#198754",secondary:"#D1FAD0"},CANCELADO:{primary:"#6c757d",secondary:"#E2E3E5"}};let ke=(()=>{class o{constructor(t){this.agendamentoService=t,this.view=p.St.Month,this.CalendarView=p.St,this.viewDate=new Date,this.locale="pt",this.events=[],this.isLoading=!0,this.refresh=new fe.B}ngOnInit(){this.loadAgendamentos()}loadAgendamentos(){this.isLoading=!0;const t=(0,pe.A)((0,ue.A)(this.viewDate)),r=(0,ge.A)((0,he.A)(this.viewDate));this.agendamentoService.getAgendamentos(t.toISOString(),r.toISOString()).subscribe(n=>{this.events=n.map(i=>({id:i.id,start:new Date(i.dataHora),title:`(${i.status.substring(0,3)}) ${i.pet.nome} - ${i.servicos.map(c=>c.nome).join(", ")}`,color:P[i.status]||P.CANCELADO,allDay:!1})),this.isLoading=!1,this.refresh.next()})}onViewDateChange(){this.loadAgendamentos()}setView(t){this.view=t}static{this.\u0275fac=function(r){return new(r||o)(e.rXU(ve.F))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-agenda"]],decls:27,vars:21,consts:[[1,"list-container"],[1,"page-header"],[1,"calendar-header"],[1,"btn-group"],[1,"btn-secondary",3,"click"],["mwlCalendarPreviousView","",1,"btn-secondary",3,"view","viewDate","viewDateChange"],["mwlCalendarToday","",1,"btn-secondary",3,"viewDate","viewDateChange"],["mwlCalendarNextView","",1,"btn-secondary",3,"view","viewDate","viewDateChange"],["class","loading-indicator",4,"ngIf"],[1,"calendar-container","card",3,"ngSwitch"],[3,"viewDate","events","refresh","locale","dayClicked",4,"ngSwitchCase"],[3,"viewDate","events","refresh","locale",4,"ngSwitchCase"],[1,"loading-indicator"],[3,"viewDate","events","refresh","locale","dayClicked"],[3,"viewDate","events","refresh","locale"]],template:function(r,n){1&r&&(e.j41(0,"div",0)(1,"header",1)(2,"h1"),e.EFF(3,"Agenda de Agendamentos"),e.k0s()(),e.j41(4,"div",2)(5,"div",3)(6,"button",4),e.bIt("click",function(){return n.setView(n.CalendarView.Month)}),e.EFF(7," M\xeas "),e.k0s(),e.j41(8,"button",4),e.bIt("click",function(){return n.setView(n.CalendarView.Week)}),e.EFF(9," Semana "),e.k0s(),e.j41(10,"button",4),e.bIt("click",function(){return n.setView(n.CalendarView.Day)}),e.EFF(11," Dia "),e.k0s()(),e.j41(12,"div",3)(13,"button",5),e.bIt("viewDateChange",function(c){return n.viewDate=c})("viewDateChange",function(){return n.onViewDateChange()}),e.EFF(14," Anterior "),e.k0s(),e.j41(15,"button",6),e.bIt("viewDateChange",function(c){return n.viewDate=c})("viewDateChange",function(){return n.onViewDateChange()}),e.EFF(16," Hoje "),e.k0s(),e.j41(17,"button",7),e.bIt("viewDateChange",function(c){return n.viewDate=c})("viewDateChange",function(){return n.onViewDateChange()}),e.EFF(18," Pr\xf3ximo "),e.k0s()(),e.j41(19,"h3"),e.EFF(20),e.nI1(21,"calendarDate"),e.k0s()(),e.DNE(22,_e,2,0,"div",8),e.j41(23,"div",9),e.DNE(24,be,1,4,"mwl-calendar-month-view",10),e.DNE(25,Ce,1,4,"mwl-calendar-week-view",11),e.DNE(26,Fe,1,4,"mwl-calendar-day-view",11),e.k0s()()),2&r&&(e.R7$(6),e.AVh("active",n.view===n.CalendarView.Month),e.R7$(2),e.AVh("active",n.view===n.CalendarView.Week),e.R7$(2),e.AVh("active",n.view===n.CalendarView.Day),e.R7$(3),e.Y8G("view",n.view)("viewDate",n.viewDate),e.R7$(2),e.Y8G("viewDate",n.viewDate),e.R7$(2),e.Y8G("view",n.view)("viewDate",n.viewDate),e.R7$(3),e.JRh(e.brH(21,17,n.viewDate,n.view+"ViewTitle",n.locale)),e.R7$(2),e.Y8G("ngIf",n.isLoading),e.R7$(1),e.Y8G("ngSwitch",n.view),e.R7$(1),e.Y8G("ngSwitchCase",n.CalendarView.Month),e.R7$(1),e.Y8G("ngSwitchCase",n.CalendarView.Week),e.R7$(1),e.Y8G("ngSwitchCase",n.CalendarView.Day))},dependencies:[l.bT,l.ux,l.e1,p.xt,p.Nl,p.u8,p.jD,p.tG,p.T$,p.Sz],styles:[".calendar-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;padding:1rem;background-color:var(--color-white);border-radius:8px;box-shadow:var(--shadow-sm)}.calendar-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:500;margin:0}.btn-group[_ngcontent-%COMP%]{display:flex;gap:.25rem}.btn-group[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background-color:var(--color-light);color:var(--color-dark);border:1px solid var(--color-border);padding:8px 12px}.btn-group[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background-color:#e2e6ea}.btn-group[_ngcontent-%COMP%]   .btn-secondary.active[_ngcontent-%COMP%]{background-color:var(--color-primary);color:var(--color-white);border-color:var(--color-primary-dark)}.calendar-container.card[_ngcontent-%COMP%]{background-color:var(--color-white);border-radius:8px;box-shadow:var(--shadow-sm);padding:1rem}mwl-calendar-week-view[_ngcontent-%COMP%], mwl-calendar-day-view[_ngcontent-%COMP%]{display:block;height:600px}"]})}}return o})();var Ee=d(7113),Pe=d(4978);const Me=[{path:"",component:O,children:[{path:"agenda",component:ke},{path:"clientes",component:D},{path:"clientes/novo",component:b},{path:"clientes/editar/:id",component:b},{path:"servicos",component:Z},{path:"servicos/novo",component:F},{path:"servicos/editar/:id",component:F},{path:"produtos",component:de},{path:"produtos/novo",component:E},{path:"produtos/editar/:id",component:E},{path:"cadastrar",component:Ee.c,canActivate:[Pe.p],data:{roles:["ADMIN"]}},{path:"",redirectTo:"agenda",pathMatch:"full"}]}];let Oe=(()=>{class o{static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({imports:[m.iI.forChild(Me),m.iI]})}}return o})(),we=(()=>{class o{static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({imports:[l.MD,m.iI,Oe,g.q1,a.YN,a.X1,p.rO]})}}return o})()}}]);